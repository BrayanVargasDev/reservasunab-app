import{c as _,h as y,j as d,m as E}from"./chunk-SVZGXVR3.js";import{a as f}from"./chunk-4HN4PAFJ.js";import{A as u,C as h}from"./chunk-YPFPCNBD.js";import{D as p,H as c,Rb as m,U as t,pb as e}from"./chunk-U6U25BWF.js";import{a,b as s,j as l}from"./chunk-LVXXLD6S.js";var F=(()=>{let o=class o{constructor(){this.http=c(m),this.queryClient=c(u),this._paginacion=t({pageIndex:0,pageSize:10}),this._datosPaginador=t(null),this._filtroTexto=t(""),this.paginacion=e(()=>this._paginacion()),this.datosPaginador=e(()=>this._datosPaginador()),this.filtroTexto=this._filtroTexto.asReadonly(),this.espaciosQuery=h(()=>({queryKey:["espacios",this.paginacion(),this._filtroTexto()],queryFn:()=>d(this.http,s(a({},this.paginacion()),{search:this._filtroTexto()})),select:i=>(this._datosPaginador.set(i.meta),i.data)})),this.edificiosQuery=h(()=>({queryKey:["edificios"],queryFn:()=>y(this.http),select:i=>i.data,staleTime:1e3*60*3})),this._espacioAEditar=t(null),this.espacioAEditar=this._espacioAEditar.asReadonly(),this._i18nDatePicker=t(f),this.i18nDatePicker=this._i18nDatePicker.asReadonly(),this._modalAbierta=t(!1),this.modalAbierta=this._modalAbierta.asReadonly(),this._modoEdicion=t(!1),this.modoEdicion=this._modoEdicion.asReadonly(),this.colorModal=e(()=>this._modoEdicion()?"secondary":"primary"),this.tituloModal=e(()=>this._modoEdicion()?"Editar Espacio":"Nuevo Espacio")}setPaginacion(i){this._paginacion.set(i)}setFiltroTexto(i){this._filtroTexto.set(i),this.setPaginacion(s(a({},this._paginacion()),{pageIndex:0}))}limpiarFiltro(){this._filtroTexto.set("")}abrirModal(){this._modalAbierta.set(!0)}cerrarModal(){this._modalAbierta.set(!1),this._modoEdicion.set(!1),this._espacioAEditar.set(null)}setModoEdicion(i){this._modoEdicion.set(i)}setEspacioAEditar(i){this._espacioAEditar.set(i)}guardarEsapacio(i){return _(this.http,i)}cambiarEstadoEspacio(i,n){return l(this,null,function*(){return E(this.http,i,n)})}prefetchEspacios(i){this.queryClient.prefetchQuery({queryKey:["espacios",i,this._filtroTexto()],queryFn:()=>d(this.http,s(a({},i),{search:this._filtroTexto()})),staleTime:1e3*60*5})}};o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=p({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();export{F as a};
