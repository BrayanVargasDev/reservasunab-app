import{a as j}from"./chunk-V377ZSN6.js";import"./chunk-SVZGXVR3.js";import{a as Ue}from"./chunk-I7IWUYYH.js";import{a as Me,b as Ve,c as Ie,d as Ae,f as Pe,g as Re,h as $e,i as ke,j as De,k as Je}from"./chunk-KWYFY7T2.js";import{a as Te}from"./chunk-AWJWBZOU.js";import{a as N}from"./chunk-ZU7Q4APP.js";import"./chunk-AI3LD7IZ.js";import{a as Fe}from"./chunk-ODBDBKE7.js";import{e as L,h as K}from"./chunk-4HN4PAFJ.js";import{i as U}from"./chunk-AV73RGVI.js";import{f as H}from"./chunk-N4CCYIXR.js";import"./chunk-UAEYNMJW.js";import{b as xe,c as ge,e as M,g as be,h as _e,k as Ce,n as ve,p as he,q as Ee,r as Se,s as ye,x as we,z as G}from"./chunk-YPFPCNBD.js";import{Aa as F,Ba as p,Ca as l,Da as s,Db as D,Ea as g,Fa as O,Ga as q,H as u,Ia as T,Ja as v,Ka as d,Lb as J,N as b,O as _,R as ae,Ra as V,Sa as $,Ta as I,U as Q,Wa as re,Xa as c,Ya as se,Za as h,_b as ue,aa as z,bc as fe,c as Y,cb as k,da as r,eb as le,ha as y,hb as ce,ia as R,ib as pe,lb as P,na as S,qb as de,rb as me,ta as Z,tb as A,u as te,v as ie,va as f,wa as x,xa as ne,z as oe,za as w}from"./chunk-U6U25BWF.js";import"./chunk-B3LSNZRN.js";import"./chunk-WUBXWBRT.js";import"./chunk-B52GHH4C.js";import"./chunk-KZ3CI6ZI.js";import"./chunk-HC6MZPB3.js";import"./chunk-SV2ZKNWA.js";import"./chunk-IA5KSSRM.js";import"./chunk-RS5W3JWO.js";import"./chunk-XENCGOZ2.js";import"./chunk-XZRAAXKF.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-QY5CJPR3.js";import"./chunk-MCRJI3T3.js";import"./chunk-ZD4SBDZ6.js";import"./chunk-NCLOD2DI.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-BAKMWPBW.js";import"./chunk-AESNPOCP.js";import"./chunk-H3ZVKW6B.js";import"./chunk-HMK4XMX7.js";import"./chunk-E7UUDSES.js";import"./chunk-JQ3FRJ6A.js";import"./chunk-3IVKBF6N.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import{a as W,b as X}from"./chunk-LVXXLD6S.js";var Ge=["estadoCell"],He=["alertaEspacio"],Le=(e,a,i)=>({"badge font-semibold min-w-20 transition-all tooltip-right lg:tooltip-left align-middle":!0,"badge-success":e,"badge-error":a,"tooltip hover:cursor-pointer hover:scale-105":i}),B=(e,a)=>a.id;function Ke(e,a){if(e&1){let i=T();l(0,"div",7),v("click",function(){let n=b(i).$implicit,o=d();return _(o.authService.tienePermisos(o.permisos.DESACTIVAR_ESPACIOS)?o.cambiarEstadoEspacio(n.row.original):null)}),c(1),ce(2,"upperFirst"),s()}if(e&2){let i=a.$implicit,t=d();p("ngClass",le(5,Le,i.getValue()==="activo",i.getValue()==="inactivo",t.authService.tienePermisos(t.permisos.DESACTIVAR_ESPACIOS))),Z("data-tip",i.getValue()==="activo"?"Desactivar":"Activar"),r(),h(" ",pe(2,3,i.getValue())," ")}}function Be(e,a){e&1&&g(0,"th",8)}function We(e,a){if(e&1&&(O(0),g(1,"span",11),q()),e&2){let i=a.$implicit;r(),p("innerHTML",i,z)}}function Xe(e,a){if(e&1&&S(0,We,2,1,"ng-container",10),e&2){let i=d().$implicit;p("flexRender",i.column.columnDef.header)("flexRenderProps",i.getContext())}}function Ye(e,a){if(e&1&&(l(0,"th",9),f(1,Xe,1,2,"ng-container"),s()),e&2){let i=a.$implicit;p("colSpan",i.colSpan),r(),x(i.isPlaceholder?-1:1)}}function Ze(e,a){if(e&1&&(l(0,"tr",5),f(1,Be,1,0,"th",8),w(2,Ye,2,2,"th",9,B),s()),e&2){let i=a.$implicit;d();let t=I(3);r(),x(t.hiddenColumnIds().size!==0?1:-1),r(),F(i.headers)}}function et(e,a){if(e&1){let i=T();l(0,"td",13)(1,"app-table-expansor",16),v("toggleExpand",function(){b(i);let n=d().$implicit;return _(n.toggleExpanded())}),s()()}if(e&2){let i=d().$implicit,t=d();r(),p("disabled",t.appService.editando())("isExpanded",i.getIsExpanded())}}function tt(e,a){if(e&1&&(O(0),g(1,"div",17),q()),e&2){let i=a.$implicit;r(),p("innerHTML",i,z)}}function it(e,a){if(e&1&&(l(0,"td",14),S(1,tt,2,1,"ng-container",10),s()),e&2){let i=a.$implicit;r(),p("flexRender",i.column.columnDef.cell)("flexRenderProps",i.getContext())}}function ot(e,a){if(e&1&&(O(0),g(1,"div",17),q()),e&2){let i=a.$implicit;r(),p("innerHTML",i,z)}}function at(e,a){if(e&1&&(l(0,"li",19)(1,"span",20),c(2),s(),l(3,"span"),S(4,ot,2,1,"ng-container",10),s()()),e&2){let i=d().$implicit,t=d(3).$implicit;d();let n=I(3);r(2),h(" ",i.columnDef.header,": "),r(2),p("flexRender",n.getCell(i,t).column.columnDef.cell)("flexRenderProps",n.getCell(i,t).getContext())}}function nt(e,a){if(e&1&&f(0,at,5,3,"li",19),e&2){let i=a.$implicit;d(4);let t=I(3);x(t.hiddenColumnIds().has(i.id)?0:-1)}}function rt(e,a){if(e&1&&(l(0,"ul"),w(1,nt,1,1,null,null,ne),s()),e&2){let i=d(3);r(),F(i.tablaEspacios.getAllLeafColumns())}}function st(e,a){if(e&1&&(l(0,"tr",15)(1,"td")(2,"div",18),f(3,rt,3,0,"ul"),s()()()),e&2){let i=d().$implicit;d();let t=I(3);r(),Z("colspan",i.getVisibleCells().length+1),r(2),x(t.hiddenColumnIds().size!==0?3:-1)}}function lt(e,a){if(e&1&&(l(0,"tr",12),f(1,et,2,2,"td",13),w(2,it,2,2,"td",14,B),s(),f(4,st,4,2,"tr",15)),e&2){let i=a.$implicit;d();let t=I(3);r(),x(t.hiddenColumnIds().size!==0?1:-1),r(),F(i.getVisibleCells()),r(2),x(i.getIsExpanded()&&t.hiddenColumnIds().size!==0?4:-1)}}function ct(e,a){}var Qe=(()=>{let a=class a{constructor(){this.router=u(fe),this.route=u(ue),this.authService=u(H),this.appService=u(U),this.espaciosService=u(j),this.alertaService=u(N),this.permisos=L,this.estadoCell=A.required("estadoCell"),this.columnasPorDefecto=Q([{id:"id",accessorKey:"id",header:"ID",cell:t=>`<span class="font-bold">${t.getValue()}</span>`},{id:"nombre",accessorKey:"nombre",header:"Nombre",cell:t=>`${t.getValue().toUpperCase()}`},{id:"sede",accessorKey:"sede",header:"Ubicaci\xF3n",cell:t=>`${t.getValue()}`},{id:"tipoEspacio",accessorKey:"tipoEspacio",header:"Tipo de Espacio",cell:t=>`<span class="uppercase font-semibold">${t.getValue()}</span>`},{id:"estado",accessorKey:"estado",header:"Estado",cell:this.estadoCell},{id:"acciones",header:"Acciones",cell:t=>{let n=this.authService.tienePermisos(this.permisos.CONFIGURAR_ESPACIOS)?[{tooltip:"Configurar",icono:"construct-outline",color:"secondary",disabled:this.appService.editando(),eventoClick:()=>this.router.navigate(["configuracion",t.row.original.id],{relativeTo:this.route})}]:[];return Pe(Ue,{inputs:{visibles:t.column.getIsVisible(),acciones:n}})}}]),this.alertaEspacio=A.required("alertaEspacio",{read:y}),this.tableState=Q({expanded:{},globalFilter:""}),this.tablaEspacios=$e(()=>({data:this.espaciosQuery.data()??[],columns:this.columnasPorDefecto(),getCoreRowModel:Me(),getPaginationRowModel:Ae(),getRowCanExpand:()=>!0,autoResetExpanded:!1,getFilteredRowModel:Ie(),getExpandedRowModel:Ve(),manualPagination:!0,autoResetPageIndex:!1,state:{pagination:this.espaciosService.paginacion(),expanded:this.tableState().expanded,globalFilter:this.tableState().globalFilter},onPaginationChange:t=>{let n=typeof t=="function"?t(this.espaciosService.paginacion()):t;this.espaciosService.setPaginacion({pageIndex:n.pageIndex,pageSize:n.pageSize})},onExpandedChange:t=>{let n=typeof t=="function"?t(this.tableState().expanded):t;this.tableState.update(o=>X(W({},o),{expanded:n}))}}))}ngOnInit(){}get espaciosQuery(){return this.espaciosService.espaciosQuery}onToggleRow(t,n=!1){let o=t.id,m=this.tableState().expanded,C;n?C={[o]:!0}:C=m[o]?{}:{[o]:!0},this.tableState.update(E=>X(W({},E),{expanded:C}))}cambiarEstadoEspacio(t){let n=t.estado.toLowerCase()==="activo"?"inactivo":"activo",o=n==="activo"?"activar":"desactivar";this.alertaService.confirmarAccion(`\xBFEst\xE1s seguro de que quieres ${o} a  el espacio <strong>${t.nombre}</strong>?`,this.alertaEspacio(),`${o.charAt(0).toUpperCase()+o.slice(1)} espacio`,n==="activo"?"success":"warning").then(m=>{m&&this.espaciosService.cambiarEstadoEspacio(t.id,n).then(()=>{this.alertaService.success(`Espacio ${o==="activar"?"activado":"desactivado"} exitosamente.`,5e3,this.alertaEspacio(),"fixed flex p-4 transition-all ease-in-out bottom-4 right-4"),this.espaciosService.espaciosQuery.refetch()}).catch(C=>{console.error(`Error al ${o} el espacio:`,C),this.alertaService.error(`Error al ${o} el espacio. Por favor, int\xE9ntalo de nuevo.`,5e3,this.alertaEspacio(),"fixed flex p-4 transition-all ease-in-out bottom-4 right-4")})})}onPageChange(t){this.espaciosService.setPaginacion(t)}};a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=R({type:a,selectors:[["tabla-espacios"]],viewQuery:function(n,o){n&1&&(V(o.estadoCell,Ge,5),V(o.alertaEspacio,He,5,y)),n&2&&$(2)},decls:13,vars:8,consts:[["estadoCell",""],["tabla","responsiveTable"],["alertaEspacio",""],["responsiveTable","",1,"table","w-full","rounded-box","table-sm","sm:table-md",3,"table"],[1,"sticky","top-0","z-20","bg-base-300"],[1,"bg-base-300","z-20","rounded-t-box"],[3,"cambioPaginacion","prefetchFunction","ngClass","estado","paginacion","mostrarInfo","mostrarSelectorTamano","mostrarExtremos","deshabilitado"],[3,"click","ngClass"],[1,"p-2","text-left","first:rounded-tl-box","border-none","last:rounded-tr-box","bg-base-100","z-20"],[1,"p-2","text-left","first:rounded-tl-box","border-none","last:rounded-tr-box","bg-base-100","z-20",3,"colSpan"],[4,"flexRender","flexRenderProps"],[1,"text-left",3,"innerHTML"],[1,"bg-base-100"],[1,"!pe-0"],[1,"py-1"],[1,"bg-base-300","border-none"],[3,"toggleExpand","disabled","isExpanded"],[3,"innerHTML"],[1,"bg-base-100","rounded-md","p-1","px-3","w-full"],[1,"flex","my-2","flex-row","gap-2","items-center"],[1,"font-bold","text-base-content"]],template:function(n,o){if(n&1){let m=T();S(0,Ke,3,9,"ng-template",null,0,P),l(2,"table",3,1)(4,"thead",4),w(5,Ze,4,1,"tr",5,B),s(),l(7,"tbody"),w(8,lt,5,2,null,null,B),s()(),l(10,"app-paginador",6),v("cambioPaginacion",function(E){return b(m),_(o.onPageChange(E))})("prefetchFunction",function(E){return b(m),_(o.espaciosService.prefetchEspacios(E))}),s(),S(11,ct,0,0,"ng-template",null,2,P)}n&2&&(r(2),p("table",o.tablaEspacios()),r(3),F(o.tablaEspacios.getHeaderGroups()),r(3),F(o.tablaEspacios.getRowModel().rows),r(2),p("ngClass","flex flex-col sm:flex-row items-center justify-between gap-2 md:gap-4 p-2 md:p-4 bg-base-100 sticky bottom-0 z-10 rounded-b-box")("estado",o.espaciosService.paginacion())("paginacion",o.espaciosService.datosPaginador()??null)("mostrarInfo",!0)("mostrarSelectorTamano",!0)("mostrarExtremos",!0)("deshabilitado",o.espaciosQuery.isFetching()))},dependencies:[J,D,Re,Je,De,ke,Fe],encapsulation:2,changeDetection:0});let e=a;return e})();var pt=["espaciosModal"],dt=["alertaFormEspacio"],ee=e=>({"input input-bordered w-full h-11 rounded-box placeholder:text-gray-400 placeholder:text-xs md:placeholder:text-sm":!0,"input-error":e}),ze=e=>({"select input-bordered w-full h-11 rounded-box placeholder:text-gray-400 placeholder:text-xs md:placeholder:text-sm":!0,"input-error":e}),Oe=(e,a)=>a.id;function mt(e,a){if(e&1&&(l(0,"div",15),c(1),s()),e&2){let i=d();r(),h(" ",i.formUtils.obtenerErrorDelCampo(i.espacioForm,"nombre")," ")}}function ut(e,a){if(e&1&&(l(0,"option",19),c(1),s()),e&2){let i=a.$implicit;p("value",i.id),r(),h(" ",`${i.nombre}`," ")}}function ft(e,a){if(e&1&&(l(0,"div",15),c(1),s()),e&2){let i=d();r(),h(" ",i.formUtils.obtenerErrorDelCampo(i.espacioForm,"sede")," ")}}function xt(e,a){if(e&1&&(l(0,"option",19),c(1),s()),e&2){let i=a.$implicit;p("value",i.id),r(),h(" ",`${i.nombre}`," ")}}function gt(e,a){if(e&1&&(l(0,"div",15),c(1),s()),e&2){let i=d();r(),h(" ",i.formUtils.obtenerErrorDelCampo(i.espacioForm,"categoria")," ")}}function bt(e,a){if(e&1&&(l(0,"div",15),c(1),s()),e&2){let i=d(2);r(),h(" ",i.formUtils.obtenerErrorDelCampo(i.espacioForm,"minimoJugadores")," ")}}function _t(e,a){if(e&1&&(l(0,"div",15),c(1),s()),e&2){let i=d(2);r(),h(" ",i.formUtils.obtenerErrorDelCampo(i.espacioForm,"maximoJugadores")," ")}}function Ct(e,a){if(e&1&&(l(0,"div",10)(1,"div",11)(2,"label",29),c(3," M\xEDnimo de jugadores: "),l(4,"span",13),c(5,"*"),s()(),g(6,"input",30),f(7,bt,2,1,"div",15),s(),l(8,"div",11)(9,"label",31),c(10," M\xE1ximo de Jugadores: "),l(11,"span",13),c(12,"*"),s()(),g(13,"input",32),f(14,_t,2,1,"div",15),s()(),l(15,"div",10)(16,"div",21)(17,"label",33),g(18,"input",34),c(19," Se puede agregar usuarios externos "),s()()()),e&2){let i=d();r(6),p("ngClass",k(4,ee,i.formUtils.esCampoInvalido(i.espacioForm,"minimoJugadores"))),r(),x(i.formUtils.esCampoInvalido(i.espacioForm,"minimoJugadores")?7:-1),r(6),p("ngClass",k(6,ee,i.formUtils.esCampoInvalido(i.espacioForm,"maximoJugadores"))),r(),x(i.formUtils.esCampoInvalido(i.espacioForm,"maximoJugadores")?14:-1)}}function vt(e,a){}var qe=(()=>{let a=class a{constructor(){this.fb=u(we),this.injector=u(ae),this.alertaService=u(N),this.estilosAlerta=Q("flex justify-center p-4 transition-all ease-in-out w-full").asReadonly(),this.guardadoExitoso=me(),this.espaciosService=u(j),this.appService=u(U),this.formUtils=Te,this.espacioForm=this.fb.group({nombre:["",[M.required]],descripcion:["",[M.required]],categoria:["",[M.required]],sede:["",[M.required]],permitirJugadores:[!1],permitirExternos:[!1],minimoJugadores:[0],maximoJugadores:[0]}),this.modalEspacios=A("espaciosModal"),this.alertaFormEspacio=A.required("alertaFormEspacio",{read:y})}ngOnInit(){de(()=>{let t=this.modalEspacios()?.nativeElement;t&&(this.espaciosService.modalAbierta()?this.abrirModal(t):this.cerrarModal(t))},{injector:this.injector})}abrirModal(t){t.showModal()}cerrarModal(t){t.close(),this.espaciosService.cerrarModal(),this.espacioForm.get("minimoJugadores")?.clearValidators(),this.espacioForm.get("maximoJugadores")?.clearValidators(),this.espacioForm.reset()}onPermitirJugadoresChange(t){let n=t.target,o=this.espacioForm.get("minimoJugadores"),m=this.espacioForm.get("maximoJugadores");n.checked?(o?.setValidators([M.required,M.min(1)]),m?.setValidators([M.required,M.min(1)])):(o?.clearValidators(),m?.clearValidators()),o?.updateValueAndValidity(),o?.markAsTouched(),m?.updateValueAndValidity(),m?.markAsTouched()}enviarFormulario(){if(this.espacioForm.markAllAsTouched(),this.espacioForm.invalid){this.alertaService.error("Por favor, completa todos los campos requeridos.",5e3,this.alertaFormEspacio(),this.estilosAlerta());return}let t=this.espacioForm.value;t.minimoJugadores||(t.minimoJugadores=0),t.maximoJugadores||(t.maximoJugadores=0),t.permitirJugadores=t.permitirJugadores||!1,t.permitirExternos=t.permitirExternos||!1,this.espaciosService.guardarEsapacio(t).then(n=>{this.espaciosService.espaciosQuery.refetch(),this.cerrarModal(this.modalEspacios()?.nativeElement),this.guardadoExitoso.emit(!0)}).catch(n=>{if(this.alertaFormEspacio()){let o=Object.values(n.errors);this.alertaService.error(`Error al crear el espacio: ${o.join(", ")}`,5e3,this.alertaFormEspacio(),this.estilosAlerta())}})}};a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=R({type:a,selectors:[["modal-espacios"]],viewQuery:function(n,o){n&1&&(V(o.modalEspacios,pt,5),V(o.alertaFormEspacio,dt,5,y)),n&2&&$(2)},outputs:{guardadoExitoso:"guardadoExitoso"},decls:59,vars:19,consts:[["espaciosModal",""],["permitirJugadores",""],["alertaFormEspacio",""],[1,"modal","p-0","z-50"],[1,"modal-box","max-w-1/2"],[1,"sticky","top-0","bg-base-100","z-10","border-b","border-base-300","px-4","py-4","flex","justify-between","items-center"],[1,"text-lg","font-bold"],["type","button","aria-label","Cerrar modal",1,"btn","btn-xs","btn-circle","btn-neutral","btn-outline",3,"click"],["nombreIcono","close-outline","estilos","h-5 w-5"],[3,"ngSubmit","formGroup"],[1,"my-4","flex","flex-col","md:flex-row","w-full","gap-2","md:gap-3"],[1,"flex","flex-col","w-full","md:w-1/2"],["for","nombre",1,"label","text-sm","font-[600]","text-base-content","mb-1","md:mb-2"],[1,"text-error"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre",3,"ngClass"],[1,"text-sm","text-error"],["for","tipoDocumento",1,"label","text-sm","font-[600]","text-base-content","mb-1","md:mb-2"],["type","text","id","sede","formControlName","sede",3,"ngClass"],["value","","disabled","","selected",""],[3,"value"],["type","text","id","categoria","formControlName","categoria",3,"ngClass"],[1,"flex","flex-col","w-full"],["for","descripcion",1,"label","text-sm","font-[600]","text-base-content","mb-1","md:mb-2"],["id","descripcion","formControlName","descripcion","placeholder","Escribe los detalles de este espacio",1,"textarea","w-full","placeholder:text-gray-400"],["for","permitirJugadores",1,"label","text-sm","text-base-content"],["id","permitirJugadores","formControlName","permitirJugadores","type","checkbox",1,"checkbox","checkbox-bordered","mr-2",3,"change"],[1,"modal-action"],["type","button",1,"btn","btn-ghost","h-11","rounded-box",3,"click"],["type","submit",3,"disabled"],["for","minimoJugadores",1,"label","text-sm","font-[600]","text-base-content","mb-1","md:mb-2"],["type","text","id","minimoJugadores","formControlName","minimoJugadores","placeholder","3",3,"ngClass"],["for","maximoJugadores",1,"label","text-sm","font-[600]","text-base-content","mb-1","md:mb-2"],["type","text","id","maximoJugadores","formControlName","maximoJugadores","placeholder","10",3,"ngClass"],["for","permitirExternos",1,"label","text-sm","text-base-content"],["id","permitirExternos","formControlName","permitirExternos","type","checkbox",1,"checkbox","checkbox-bordered","mr-2"]],template:function(n,o){if(n&1){let m=T();l(0,"dialog",3,0)(2,"div",4)(3,"div",5)(4,"h3",6),c(5),s(),l(6,"button",7),v("click",function(){return b(m),_(o.espaciosService.cerrarModal())}),g(7,"app-web-icon",8),s()(),l(8,"form",9),v("ngSubmit",function(){return b(m),_(o.enviarFormulario())}),l(9,"div",10)(10,"div",11)(11,"label",12),c(12," Nombre "),l(13,"span",13),c(14,"*"),s()(),g(15,"input",14),f(16,mt,2,1,"div",15),s(),l(17,"div",11)(18,"label",16),c(19," Sede "),l(20,"span",13),c(21,"*"),s()(),l(22,"select",17)(23,"option",18),c(24,"Seleccione"),s(),w(25,ut,2,2,"option",19,Oe),s(),f(27,ft,2,1,"div",15),s()(),l(28,"div",10)(29,"div",11)(30,"label",16),c(31," Tipo de espacio: "),l(32,"span",13),c(33,"*"),s()(),l(34,"select",20)(35,"option",18),c(36,"Seleccione"),s(),w(37,xt,2,2,"option",19,Oe),s(),f(39,gt,2,1,"div",15),s()(),l(40,"div",10)(41,"div",21)(42,"label",22),c(43," Descripci\xF3n: "),s(),g(44,"textarea",23),s()(),l(45,"div",10)(46,"div",21)(47,"label",24)(48,"input",25,1),v("change",function(E){return b(m),_(o.onPermitirJugadoresChange(E))}),s(),c(50," Se puede agregar jugadores "),s()()(),f(51,Ct,20,8),S(52,vt,0,0,"ng-template",null,2,P),l(54,"div",26)(55,"button",27),v("click",function(){return b(m),_(o.espaciosService.cerrarModal())}),c(56," Cerrar "),s(),l(57,"button",28),c(58),s()()()()()}if(n&2){let m=I(49);r(5),se(o.espaciosService.tituloModal()),r(3),p("formGroup",o.espacioForm),r(7),p("ngClass",k(13,ee,o.formUtils.esCampoInvalido(o.espacioForm,"nombre"))),r(),x(o.formUtils.esCampoInvalido(o.espacioForm,"nombre")?16:-1),r(6),p("ngClass",k(15,ze,o.formUtils.esCampoInvalido(o.espacioForm,"sede"))),r(3),F(o.appService.sedesQuery.data()),r(2),x(o.formUtils.esCampoInvalido(o.espacioForm,"sede")?27:-1),r(7),p("ngClass",k(17,ze,o.formUtils.esCampoInvalido(o.espacioForm,"categoria"))),r(3),F(o.appService.categoriasQuery.data()),r(2),x(o.formUtils.esCampoInvalido(o.espacioForm,"categoria")?39:-1),r(12),x(m.checked?51:-1),r(6),re(`btn btn-${o.espaciosService.colorModal()}  btn-soft h-11 rounded-box`),p("disabled",o.espacioForm.invalid||!1),r(),h(" ",o.espaciosService.modoEdicion()?"Actualizar":"Guardar"," ")}},dependencies:[J,D,G,Ce,Se,ye,ge,xe,Ee,be,_e,ve,he,K],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let e=a;return e})();var ht=["alertaEspacios"];function Et(e,a){if(e&1){let i=T();l(0,"button",9),v("click",function(){b(i);let n=d();return _(n.crearEspacio())}),g(1,"app-web-icon",10),c(2," Nuevo espacio "),s()}if(e&2){let i=d();p("disabled",i.appService.editando())}}function St(e,a){}var fi=(()=>{let a=class a{constructor(){this.alertaService=u(N),this.authService=u(H),this.appService=u(U),this.espaciosService=u(j),this.permisos=L,this.alertaEspacio=A.required("alertaEspacios",{read:y}),this.destroy$=new Y,this.searchSubject=new Y}ngOnInit(){this.searchSubject.pipe(te(300),ie(),oe(this.destroy$)).subscribe(t=>{this.espaciosService.setFiltroTexto(t)})}crearEspacio(){this.espaciosService.abrirModal()}editarEspacio(t){this.espaciosService.setEspacioAEditar(t),this.espaciosService.setModoEdicion(!0),this.espaciosService.abrirModal()}espacioGuardadoExitoso(t){let n="fixed flex p-4 transition-all ease-in-out bottom-4 right-4";t?this.alertaService.success("Espacio guardado exitosamente.",5e4,this.alertaEspacio(),n):this.alertaService.error("Error al guardar el espacio. Por favor, int\xE9ntalo de nuevo.",5e4,this.alertaEspacio(),n)}aplicarFiltro(t){this.searchSubject.next(t)}limpiarFiltro(){this.espaciosService.limpiarFiltro()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=R({type:a,selectors:[["app-espacios-main"]],viewQuery:function(n,o){n&1&&V(o.alertaEspacio,ht,5,y),n&2&&$()},hostAttrs:[1,"flex","flex-col","w-full","h-full","sm:pl-3","relative"],decls:11,vars:4,consts:[["alertaEspacios",""],[1,"flex","flex-col","md:flex-row","md:pr-2","w-full","pb-2","md:pb-4","items-stretch","justify-center","md:justify-between","sticky","top-0","z-10","bg-base-300"],[1,"flex","items-center","justify-center","sm:justify-start"],[1,"font-bold","text-4xl","max-sm:text-2xl","mb-2","md:mb-0"],[1,"flex","flex-col","md:flex-row","max-md:gap-1","gap-2","mt-1"],["type","text","placeholder","Buscar por nombre o categoria",1,"input","input-bordered","max-sm:input-sm","input-primary","w-full","sm:h-11","rounded-box","md:max-w-xs","placeholder:text-gray-500","placeholder:text-sm","disabled:placeholder:text-gray-400",3,"input","disabled","value"],[1,"btn","max-sm:btn-sm","btn-primary","sm:h-11","rounded-box",3,"disabled"],[3,"ngClass"],[3,"guardadoExitoso"],[1,"btn","max-sm:btn-sm","btn-primary","sm:h-11","rounded-box",3,"click","disabled"],["estilos","h-6 w-6","nombreIcono","add-outline"]],template:function(n,o){if(n&1){let m=T();l(0,"div",1)(1,"div",2)(2,"h2",3),c(3,"Espacios"),s()(),l(4,"div",4)(5,"input",5),v("input",function(E){return b(m),_(o.aplicarFiltro(E.target.value))}),s(),f(6,Et,3,1,"button",6),s()(),g(7,"tabla-espacios",7),S(8,St,0,0,"ng-template",null,0,P),l(10,"modal-espacios",8),v("guardadoExitoso",function(E){return b(m),_(o.espacioGuardadoExitoso(E))}),s()}n&2&&(r(5),p("disabled",o.appService.editando())("value",o.espaciosService.filtroTexto()),r(),x(o.authService.tienePermisos(o.permisos.CREAR_ESPACIOS)?6:-1),r(),p("ngClass","flex flex-col max-h-[calc(100%)] overflow-y-auto"))},dependencies:[J,D,G,K,Qe,qe],encapsulation:2,changeDetection:0});let e=a;return e})();export{fi as EspaciosMainPage};
