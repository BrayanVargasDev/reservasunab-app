import{a as ne}from"./chunk-AI3LD7IZ.js";import{h as te}from"./chunk-4HN4PAFJ.js";import{f as ee}from"./chunk-N4CCYIXR.js";import{G as p}from"./chunk-YPFPCNBD.js";import{Aa as F,Ba as k,Ca as i,Da as a,Db as Z,Ea as v,Fa as J,Ga as K,H as z,Hb as q,Jb as Q,Ka as f,Lb as Y,Pb as C,Xa as r,Ya as S,Za as u,_a as $,bb as U,da as l,eb as W,hb as b,ia as G,ib as P,jb as E,k as c,sb as X,va as x,wa as _,za as T}from"./chunk-U6U25BWF.js";import{a as N,b as O,j as d}from"./chunk-LVXXLD6S.js";var ie=p.apiUrl,Le=(t,n,e)=>d(null,null,function*(){let o=`${ie}/reservas/${n}/agregar-jugadores`;return c(t.post(o,{jugadores:e},{headers:{"Content-Type":"application/json"}}))});var re=p.apiUrl,Ne=(t,n)=>d(null,null,function*(){let e=`${re}/reservas/${n}/aprobar`;return c(t.put(e,null,{headers:{"Content-Type":"application/json"}}))});var ae=p.apiUrl,Ke=(t,n,e=!1)=>d(null,null,function*(){let o=`${ae}/usuarios/buscar-jugadores`,m=new C;return n?.trim()&&(m=m.append("term",n.trim())),e&&(m=m.append("permiteExternos","true")),c(t.get(o,{params:m,headers:{"Content-Type":"application/json"}}))});var le=p.apiUrl,Qe=(t,n)=>d(null,null,function*(){let e=`${le}/reservas/confirmar`;return c(t.post(e,O(N({},n),{valor_elementos:n.valor_elementos??0,valor_total_reserva:(n.valor_descuento||0)+(n.valor_elementos||0),jugadores:n.jugadores?.map(o=>o.id)}),{headers:{"Content-Type":"application/json"}}))});var se=p.apiUrl,ot=(t,n)=>d(null,null,function*(){let e=`${se}/reservas/${n}/cancelar`;return c(t.delete(e,{headers:{"Content-Type":"application/json"}}))});var me=p.apiUrl,mt=(t,n,e)=>d(null,null,function*(){let o=`${me}/dreservas/espacios/${n}`,m=new C;return e&&(m=m.append("fecha",e)),c(t.get(o,{params:m,headers:{"Content-Type":"application/json"}}))});var pe=p.apiUrl,_t=(t,n)=>d(null,null,function*(){let e=`${pe}/dreservas/espacios`,o=new C;return n.fecha&&(o=o.append("fecha",n.fecha)),n.idGrupo&&(o=o.append("id_grupo",n.idGrupo.toString())),n.idSede&&(o=o.append("id_sede",n.idSede.toString())),n.idCategoria&&(o=o.append("id_categoria",n.idCategoria.toString())),c(t.get(e,{params:o,headers:{"Content-Type":"application/json"}}))});var de=p.apiUrl,Ct=(t,n)=>d(null,null,function*(){let e=`${de}/reservas/mi-reserva/${n}`;return c(t.get(e,{headers:{"Content-Type":"application/json"}}))});var ce=p.apiUrl,Rt=(t,n="")=>d(null,null,function*(){let e=`${ce}/reservas/me`,o=new C().set("search",n);return c(t.get(e,{params:o,headers:{"Content-Type":"application/json"}}))});var ue=p.apiUrl,Ut=(t,n)=>d(null,null,function*(){let e=`${ue}/reservas`,o=new C().set("page",(n.pageIndex+1).toString()).set("per_page",n.pageSize.toString()).set("search",n.search||"");return c(t.get(e,{params:o,headers:{"Content-Type":"application/json"}}))});var xe=p.apiUrl,Vt=(t,n)=>d(null,null,function*(){let e=`${xe}/dreservas`;return c(t.post(e,n,{headers:{"Content-Type":"application/json"}}))});var _e=p.apiUrl,Ot=(t,n)=>d(null,null,function*(){let e=`${_e}/pagos/mensualidad`;return c(t.post(e,{id_espacio:n},{headers:{"Content-Type":"application/json"}}))});var fe=p.apiUrl,Kt=(t,n)=>d(null,null,function*(){let e=`${fe}/pagos/saldos`;return c(t.post(e,{id_reserva:n},{headers:{"Content-Type":"application/json"}}))});var ve=p.apiUrl,Qt=(t,n)=>d(null,null,function*(){let e=`${ve}/pagos/reservas`;return c(t.post(e,{id_reserva:n},{headers:{"Content-Type":"application/json"}}))});var nn=p.apiUrl;var ge=()=>["completada","cancelada","pagada"],be=()=>["Expirado","Fallido","No Autorizado","Error"],Ce=(t,n,e)=>({"border-success bg-success/10 text-success-content":t,"border-warning bg-warning/10 text-warning-content":n,"border-error bg-error/10 text-red-950":e}),oe=(t,n)=>n.id;function Se(t,n){if(t&1&&(i(0,"div",11)(1,"span",15),r(2),a()()),t&2){let e,o=f();l(2),u("Reserva realizada el: ",(e=o.resumen())==null?null:e.creado_en)}}function Ee(t,n){if(t&1&&(i(0,"span",20),r(1),b(2,"number"),a()),t&2){let e,o=f(2);l(),u(" $",E(2,1,((e=o.resumen())==null?null:e.valor)||0,"1.0-0")," ")}}function Ie(t,n){if(t&1&&(J(0),i(1,"span",22),r(2),a(),K()),t&2){let e,o=f(2);l(2),u(" -",(e=o.resumen())==null?null:e.porcentaje_descuento,"% ")}}function he(t,n){if(t&1&&(i(0,"div",12)(1,"div",16)(2,"div",1),v(3,"app-web-icon",17),i(4,"span",18),r(5,"Valor del espacio:"),a()(),i(6,"div",19),x(7,Ee,3,4,"span",20),i(8,"span",21),r(9),b(10,"number"),a(),x(11,Ie,3,1,"ng-container"),a()()()),t&2){let e,o,m,s=f();l(7),_((e=s.resumen())!=null&&e.porcentaje_descuento&&((e=s.resumen())==null?null:e.porcentaje_descuento)>0?7:-1),l(2),u(" $",E(10,3,((o=s.resumen())==null?null:o.valor_descuento)||0,"1.0-0")," "),l(2),_((m=s.resumen())!=null&&m.porcentaje_descuento&&((m=s.resumen())==null?null:m.porcentaje_descuento)>0?11:-1)}}function ye(t,n){if(t&1&&(i(0,"strong"),r(1,"Banner: "),a(),r(2)),t&2){let e=f().$implicit;l(2),u("",e.ldap_uid," ")}}function Re(t,n){if(t&1&&(i(0,"div",28)(1,"div",29)(2,"span",30),r(3),a(),i(4,"span",31)(5,"strong"),r(6),a(),r(7),x(8,ye,3,1),a()(),i(9,"div",32),r(10,"Confirmado"),a()()),t&2){let e=n.$implicit;l(3),$("",e.nombre," ",e.apellido),l(3),u("",e.codigo_tipo_documento,":"),l(),u(" ",e.documento||e.codigo_usuario," "),l(),_(e.ldap_uid?8:-1)}}function we(t,n){if(t&1&&(i(0,"div",12)(1,"div",23),v(2,"app-web-icon",24),i(3,"span",25),r(4),a()(),i(5,"p",26),r(6," Reservante: "),i(7,"strong"),r(8),a(),r(9,". La lista a continuaci\xF3n corresponde a los dem\xE1s participantes. "),a(),i(10,"div",27),T(11,Re,11,5,"div",28,oe),a()()),t&2){let e,o,m,s=f();l(4),u("Participantes (",((e=s.resumen())==null?null:e.jugadores).length,"):"),l(4),S((o=s.resumen())==null?null:o.usuario_reserva),l(3),F((m=s.resumen())==null?null:m.jugadores)}}function je(t,n){if(t&1&&(i(0,"div",34)(1,"div",36)(2,"span",37),r(3),a(),i(4,"span",38),r(5),b(6,"number"),a()(),i(7,"span",39),r(8),b(9,"number"),a()()),t&2){let e=n.$implicit,o=f(2);l(3),S(e.nombre),l(2),$(" Cant: ",e.cantidad_seleccionada||1," x $",E(6,4,o.precioElemento(e),"1.0-0")," "),l(3),u(" $",E(9,7,o.precioElemento(e)*(e.cantidad_seleccionada||1),"1.0-0")," ")}}function Te(t,n){if(t&1&&(i(0,"div",35)(1,"span",40),r(2,"Subtotal elementos:"),a(),i(3,"span",41),r(4),b(5,"number"),a()()),t&2){let e,o=f(2);l(4),u("$",E(5,1,((e=o.resumen())==null?null:e.valor_elementos)||0,"1.0-0"))}}function Fe(t,n){if(t&1&&(i(0,"div",12)(1,"div",23),v(2,"app-web-icon",33),i(3,"span",25),r(4,"Elementos:"),a()(),i(5,"div",27),T(6,je,10,10,"div",34,oe),a(),x(8,Te,6,4,"div",35),a()),t&2){let e,o,m=f();l(6),F((e=m.resumen())==null?null:e.detalles),l(2),_((o=m.resumen())!=null&&o.valor_elementos?8:-1)}}function $e(t,n){if(t&1&&(i(0,"div",12)(1,"div",16)(2,"div",1),v(3,"app-web-icon",42),i(4,"span",18),r(5),a()(),i(6,"div",19)(7,"span",43),r(8),b(9,"number"),a()()()()),t&2){let e,o,m=f();l(5),u("Total ",U(5,ge).includes(((e=m.resumen())==null?null:e.estado)??"")?"pagado":"a pagar",":"),l(3),u(" $",E(9,2,((o=m.resumen())==null?null:o.valor_total_reserva)||0,"1.0-0")," ")}}function Ue(t,n){if(t&1&&(i(0,"div",13)(1,"h4",44),r(2,"Informaci\xF3n del pago"),a(),i(3,"p",45),r(4," C\xF3digo de pago: "),i(5,"strong"),r(6),a()(),i(7,"p",45),r(8," Valor pagado: "),i(9,"strong"),r(10),b(11,"number"),a()(),i(12,"p",45),r(13," Estado: "),i(14,"strong"),r(15),a()()()),t&2){let e,o,m,s,g=f();k("ngClass",W(8,Ce,((e=g.obtenerInfoPago())==null?null:e.estado)==="Completado",((e=g.obtenerInfoPago())==null?null:e.estado)==="Creado",((e=g.obtenerInfoPago())==null?null:e.estado)&&U(7,be).includes(((e=g.obtenerInfoPago())==null?null:e.estado)||""))),l(6),S((o=g.obtenerInfoPago())==null?null:o.codigoPago),l(4),u(" $",E(11,4,((m=g.obtenerInfoPago())==null?null:m.valorPagado)||0,"1.0-0")," "),l(5),S((s=g.obtenerInfoPago())==null?null:s.estado)}}function Pe(t,n){t&1&&(i(0,"div",14)(1,"p",46),r(2,"\xA1Tu reserva ha sido completada exitosamente!"),a()())}var Un=(()=>{let n=class n{constructor(){this.resumen=X(),this.authService=z(ee),this.precioElemento=o=>{let s=`valor_${this.authService.usuario()?.tipo_usuario?.[0]?.toLowerCase()}`;return o[s]??o.valor??0}}obtenerInfoPago(){if(!this.resumen()||!this.resumen()?.pago)return null;let o=this.resumen().pago,m={CREATED:"Creado",PENDING:"Pendiente",OK:"Completado",FAILED:"Fallido",EXPIRED:"Expirado",NOT_AUTHORIZED:"No Autorizado"};return"codigo"in o&&"estado"in o?{codigoPago:o.codigo,estado:m[o.estado]||o.estado,valorPagado:parseFloat(o.valor)}:"id"in o?{codigoPago:`Movimiento #${o.id}`,estado:"OK",valorPagado:parseFloat(o.valor)}:null}};n.\u0275fac=function(m){return new(m||n)},n.\u0275cmp=G({type:n,selectors:[["dreservas-info-reserva"]],hostAttrs:[1,"bg-base-200","rounded-lg","p-2","md:p-4"],inputs:{resumen:[1,"resumen"]},decls:54,vars:18,consts:[[1,"grid","grid-cols-1","md:grid-cols-2","gap-1","md:gap-2"],[1,"flex","items-center"],["nombreIcono","home-outline","estilos","h-6 w-6 mr-3 text-primary"],[1,"text-sm","text-base-content/70"],[1,"font-medium"],["nombreIcono","location-outline","estilos","h-6 w-6 mr-3 text-primary"],["nombreIcono","calendar-outline","estilos","h-6 w-6 mr-3 text-primary"],["nombreIcono","time-outline","estilos","h-6 w-6 mr-3 text-primary"],["nombreIcono","hourglass-outline","estilos","h-6 w-6 mr-3 text-primary"],["nombreIcono","person-outline","estilos","h-6 w-6 mr-3 text-primary"],[1,"text-sm","text-base-content/50"],[1,"mt-2","p-1","bg-accent/10","rounded-lg","flex","items-center","w-full","border","border-accent"],[1,"mt-2","p-2","bg-base-100","rounded-lg","border","border-base-300"],[1,"text-center","flex","flex-col","items-start","text-base-content/70","mt-2","p-2","rounded-lg","border",3,"ngClass"],[1,"text-center","text-base-content/70"],[1,"text-xs","text-cyan-950","font-semibold"],[1,"flex","items-center","justify-between"],["nombreIcono","card-outline","estilos","h-5 w-5 max-sm:mr-1 mr-3 text-success"],[1,"max-sm:text-base","text-lg","font-semibold"],[1,"flex","gap-1","items-center"],[1,"text-sm","md:text-base","line-through","text-base-content/70","italic","mr-2"],[1,"max-sm:text-xl","text-2xl","font-bold","text-success"],[1,"text-xs","badge","badge-secondary","font-bold","rounded","px-2","py-0.5"],[1,"flex","items-center","mb-2"],["nombreIcono","people-outline","estilos","h-5 w-5 mr-3 text-info"],[1,"text-lg","font-semibold"],[1,"text-sm","text-base-content/70","mb-2"],[1,"space-y-1"],[1,"flex","items-center","justify-between","bg-info/10","rounded-lg","px-3","py-1"],[1,"flex","flex-col","max-[380px]:max-w-1/2","gap-0.5"],[1,"font-semibold","text-wrap"],[1,"text-sm","italic","text-base-content/70"],[1,"badge","badge-info"],["nombreIcono","briefcase-outline","estilos","h-5 w-5 mr-3 text-secondary"],[1,"flex","items-center","justify-between","bg-secondary/5","rounded","px-2","py-1","gap-2"],[1,"flex","items-center","justify-between","mt-2","pt-2","border-t"],[1,"flex","flex-col","min-w-0"],[1,"text-sm","font-medium","truncate"],[1,"text-xs","text-base-content/70"],[1,"text-sm","font-semibold","text-base-content/80"],[1,"text-sm","font-semibold"],[1,"text-sm","font-bold"],["nombreIcono","cash-outline","estilos","h-5 w-5 max-sm:mr-1 mr-3 text-primary"],[1,"max-sm:text-xl","text-2xl","font-bold","text-primary"],[1,"font-semibold","text-base"],[1,"text-sm"],[1,"text-lg"]],template:function(m,s){if(m&1&&(i(0,"div",0)(1,"div",1),v(2,"app-web-icon",2),i(3,"div")(4,"span",3),r(5,"Espacio:"),a(),i(6,"p",4),r(7),a()()(),i(8,"div",1),v(9,"app-web-icon",5),i(10,"div")(11,"span",3),r(12,"Sede:"),a(),i(13,"p",4),r(14),b(15,"uppercase"),a()()(),i(16,"div",1),v(17,"app-web-icon",6),i(18,"div")(19,"span",3),r(20,"Fecha:"),a(),i(21,"p",4),r(22),a()()(),i(23,"div",1),v(24,"app-web-icon",7),i(25,"div")(26,"span",3),r(27,"Hora de inicio:"),a(),i(28,"p",4),r(29),a()()(),i(30,"div",1),v(31,"app-web-icon",8),i(32,"div")(33,"span",3),r(34,"Duraci\xF3n:"),a(),i(35,"p",4),r(36),b(37,"formatearDuracion"),a()()(),i(38,"div",1),v(39,"app-web-icon",9),i(40,"div")(41,"span",3),r(42,"Reservado por:"),a(),i(43,"p",4),r(44),a(),i(45,"p",10),r(46),a()()()(),x(47,Se,3,1,"div",11),x(48,he,12,6,"div",12),x(49,we,13,2,"div",12),x(50,Fe,9,1,"div",12),x(51,$e,10,6,"div",12),x(52,Ue,16,12,"div",13),x(53,Pe,3,0,"div",14)),m&2){let g,B,A,L,V,D,M,I,h,y,R,H,w,j;l(7),u(" ",(g=s.resumen())==null?null:g.nombre_espacio," "),l(7),S(P(15,14,(B=s.resumen())==null?null:B.sede)),l(8),u(" ",(A=s.resumen())==null?null:A.fecha," "),l(7),S((L=s.resumen())==null?null:L.hora_inicio),l(7),S(P(37,16,(V=s.resumen())==null?null:V.duracion)),l(8),S((D=s.resumen())==null?null:D.usuario_reserva),l(2),u(" ",(M=s.resumen())==null?null:M.codigo_usuario," "),l(),_((I=s.resumen())!=null&&I.id&&((I=s.resumen())!=null&&I.creado_en)?47:-1),l(),_((h=s.resumen())!=null&&h.valor&&((h=s.resumen())==null?null:h.valor)>0?48:-1),l(),_((y=s.resumen())!=null&&y.jugadores&&((y=s.resumen())==null?null:y.jugadores.length)>0?49:-1),l(),_((R=s.resumen())!=null&&R.detalles&&((R=s.resumen())==null?null:R.detalles.length)>0?50:-1),l(),_((H=s.resumen())!=null&&H.valor_total_reserva?51:-1),l(),_((w=s.resumen())!=null&&w.id&&((w=s.resumen())==null?null:w.pago)!==null?52:-1),l(),_(((j=s.resumen())==null?null:j.estado)==="completada"&&((j=s.resumen())!=null&&j.id)?53:-1)}},dependencies:[Y,Z,q,Q,te,ne],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let t=n;return t})();export{Le as a,Ne as b,Ke as c,Qe as d,ot as e,mt as f,_t as g,Ct as h,Rt as i,Ut as j,Vt as k,Ot as l,Kt as m,Qt as n,Un as o};
