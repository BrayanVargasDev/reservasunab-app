import{a as F}from"./chunk-NH3QUD4I.js";import{a as H}from"./chunk-PQQVET5C.js";import"./chunk-KTGXZBKE.js";import"./chunk-LKADUWP6.js";import"./chunk-6CQPCFUJ.js";import{b as z}from"./chunk-ZYDVWXPM.js";import"./chunk-XPPSGRKL.js";import{h as M}from"./chunk-4HN4PAFJ.js";import{D as V,F as b}from"./chunk-UAEYNMJW.js";import"./chunk-YPFPCNBD.js";import{Ba as E,Ca as r,Da as a,Ea as c,H as v,Ia as x,Ja as _,Ka as m,Lb as y,N as p,O as g,Rb as T,U as P,Xa as d,Ya as C,Za as k,_b as R,bc as j,da as s,ia as h,oa as O,pb as w,qb as S,va as f,wa as u}from"./chunk-U6U25BWF.js";import"./chunk-B3LSNZRN.js";import"./chunk-WUBXWBRT.js";import{a as D}from"./chunk-AUJJZC6I.js";import"./chunk-B52GHH4C.js";import"./chunk-KZ3CI6ZI.js";import"./chunk-HC6MZPB3.js";import"./chunk-SV2ZKNWA.js";import"./chunk-IA5KSSRM.js";import"./chunk-RS5W3JWO.js";import"./chunk-XENCGOZ2.js";import"./chunk-XZRAAXKF.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-QY5CJPR3.js";import"./chunk-MCRJI3T3.js";import"./chunk-ZD4SBDZ6.js";import"./chunk-NCLOD2DI.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-BAKMWPBW.js";import"./chunk-AESNPOCP.js";import"./chunk-H3ZVKW6B.js";import"./chunk-HMK4XMX7.js";import"./chunk-E7UUDSES.js";import"./chunk-JQ3FRJ6A.js";import"./chunk-3IVKBF6N.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import{j as I}from"./chunk-LVXXLD6S.js";var U=(()=>{let n=class n{constructor(){this.title="Cargando",this.message="Por favor espera..."}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h({type:n,selectors:[["app-loading-spinner"]],inputs:{title:"title",message:"message"},decls:13,vars:2,consts:[[1,"loading-overlay"],[1,"loading-card"],[1,"spinner-container"],["name","crescent","color","primary"],[1,"spinner-pulse"],[1,"loading-dots"]],template:function(t,l){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),c(3,"ion-spinner",3)(4,"div",4),a(),r(5,"h3"),d(6),a(),r(7,"p"),d(8),a(),r(9,"div",5),c(10,"span")(11,"span")(12,"span"),a()()()),t&2&&(s(6),C(l.title),s(2),C(l.message))},dependencies:[y,b,V],styles:[".loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:linear-gradient(135deg,var(--color-accent) 0%,var(--color-secondary) 100%);display:flex;align-items:center;justify-content:center;z-index:9999}.loading-card[_ngcontent-%COMP%]{background:#fff;padding:3rem 2rem;border-radius:20px;text-align:center;max-width:320px;box-shadow:0 20px 40px #0000001a;animation:_ngcontent-%COMP%_slideUp .5s ease-out}.spinner-container[_ngcontent-%COMP%]{position:relative;display:inline-block;margin-bottom:2rem}ion-spinner[_ngcontent-%COMP%]{transform:scale(2)}.spinner-pulse[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:60px;height:60px;border:2px solid rgba(102,126,234,.3);border-radius:50%;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}h3[_ngcontent-%COMP%]{color:#333;margin:0 0 .5rem;font-size:1.25rem;font-weight:600}p[_ngcontent-%COMP%]{color:#666;margin:0 0 2rem;line-height:1.5}.loading-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#667eea;animation:_ngcontent-%COMP%_bounce 1.4s ease-in-out infinite both}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:translate(-50%,-50%) scale(1);opacity:1}50%{transform:translate(-50%,-50%) scale(1.1);opacity:.7}}@keyframes _ngcontent-%COMP%_bounce{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}"]});let o=n;return o})();function G(o,n){if(o&1){let i=x();r(0,"button",8),_("click",function(){p(i);let t=m();return g(t.onRetry())}),c(1,"app-web-icon",9),d(2),a()}if(o&2){let i=m();s(2),k(" ",i.retryText," ")}}var A=(()=>{let n=class n{constructor(){this.titulo="\xA1Ups! Algo sali\xF3 mal",this.mensaje="Ha ocurrido un error inesperado.",this.showRetry=!0,this.retryText="Reintentar",this.homeText="Volver al inicio",this.retry=new O,this.goHome=new O}onRetry(){this.retry.emit()}onGoHome(){this.goHome.emit()}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h({type:n,selectors:[["app-error-display"]],inputs:{titulo:"titulo",mensaje:"mensaje",showRetry:"showRetry",retryText:"retryText",homeText:"homeText"},outputs:{retry:"retry",goHome:"goHome"},decls:13,vars:4,consts:[[1,"error-overlay"],[1,"error-card"],[1,"error-icon-container"],["nombreIcono","alert-circle","estilos","error-icon"],[1,"error-actions"],["fill","outline","color","primary",1,"btn","btn-primary","btn-outline","font-semibold","h-12","rounded-xl","action-button"],["fill","solid","color","primary",1,"btn","btn-primary","font-semibold","h-12","rounded-xl","action-button",3,"click"],["nombreIcono","home"],["fill","outline","color","primary",1,"btn","btn-primary","btn-outline","font-semibold","h-12","rounded-xl","action-button",3,"click"],["nombreIcono","refresh"]],template:function(t,l){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),c(3,"app-web-icon",3),a(),r(4,"h3"),d(5),a(),r(6,"p"),d(7),a(),r(8,"div",4),f(9,G,3,1,"button",5),r(10,"button",6),_("click",function(){return l.onGoHome()}),c(11,"app-web-icon",7),d(12),a()()()()),t&2&&(s(5),C(l.titulo),s(2),C(l.mensaje),s(2),u(l.showRetry?9:-1),s(3),k(" ",l.homeText," "))},dependencies:[y,b,M],styles:[".error-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;z-index:9999;padding:1rem}.error-card[_ngcontent-%COMP%]{background:#fff;padding:3rem 2rem;border-radius:20px;text-align:center;max-width:400px;width:100%;box-shadow:0 20px 40px #0000001a;animation:_ngcontent-%COMP%_slideUp .5s ease-out}.error-icon-container[_ngcontent-%COMP%]{margin-bottom:2rem}.error-icon[_ngcontent-%COMP%]{font-size:4rem;color:#f44336;animation:_ngcontent-%COMP%_shake .5s ease-in-out}h3[_ngcontent-%COMP%]{color:#333;margin:0 0 1rem;font-size:1.5rem;font-weight:600}p[_ngcontent-%COMP%]{color:#666;margin:0 0 2rem;line-height:1.6;font-size:1rem}.error-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}@media (min-width: 480px){.error-actions[_ngcontent-%COMP%]{flex-direction:row;justify-content:center}.action-button[_ngcontent-%COMP%]{min-width:140px}}"]});let o=n;return o})();function Y(o,n){o&1&&c(0,"app-loading-spinner",1)}function L(o,n){if(o&1){let i=x();r(0,"app-error-display",4),_("retry",function(){p(i);let t=m();return g(t.reintentar())})("goHome",function(){p(i);let t=m();return g(t.volver())}),a()}if(o&2){let i=m();E("titulo","\xA1Ups! Algo sali\xF3 mal")("mensaje",i.error()??"")("showRetry",!!i.codigo)}}function B(o,n){if(o&1){let i=x();r(0,"button",11),_("click",function(){p(i);let t=m(2);return g(t.reintentar())}),c(1,"app-web-icon",12),d(2," Actualizar estado "),a()}}function W(o,n){if(o&1){let i=x();r(0,"div",3),c(1,"app-pago-info-card",5),r(2,"div",6)(3,"div",7)(4,"button",8),_("click",function(){p(i);let t=m();return g(t.volver())}),c(5,"app-web-icon",9),d(6," Volver al inicio "),a(),f(7,B,3,0,"button",10),a()()()}if(o&2){let i,e=m();s(),E("pagoInfo",e.pagoInfo())("formatearMonto",e.formatearMonto.bind(e))("formatearFecha",e.formatearFecha.bind(e))("obtenerMensajeEstado",e.obtenerMensajeEstado.bind(e)),s(6),u(((i=e.pagoInfo())==null||i.pago==null?null:i.pago.estado)==="pendiente"||((i=e.pagoInfo())==null||i.pago==null?null:i.pago.estado)==="procesando"?7:-1)}}var Ce=(()=>{let n=class n{constructor(){this.route=v(R),this.router=v(j),this.http=v(T),this.pagosService=v(H),this._pagoInfo=P(null),this._loading=P(!0),this._error=P(null),this._codigo=P(null),this.pagoInfo=w(()=>this._pagoInfo()),this.loading=w(()=>this._loading()),this.error=w(()=>this._error()),this.codigo=w(()=>this._codigo())}ngOnInit(){return I(this,null,function*(){S(()=>{if(D.isNativePlatform()){let t=this._loading()?"#667eea":"#f8f9fa";z.setBackgroundColor({color:t})}}),this.route.queryParams.subscribe(e=>{this._codigo.set(e.codigo),this._codigo()?this.cargarInfoPago():(this._error.set("C\xF3digo de pago no v\xE1lido"),this._loading.set(!1))})})}cargarInfoPago(){return I(this,null,function*(){if(this.codigo())try{this._loading.set(!0),this._error.set(null);let{data:e}=yield this.pagosService.obtenerInfoPago({codigo:this._codigo()});if(!e)throw new Error("No se encontr\xF3 informaci\xF3n del pago");this._pagoInfo.set(e)}catch(e){console.error("Error al cargar informaci\xF3n del pago:",e),this._error.set(e.message||"Error al cargar la informaci\xF3n del pago")}finally{this._loading.set(!1)}})}getEstadoClass(e){switch(e){case"completado":return"estado-completado";case"pendiente":return"estado-pendiente";case"procesando":return"estado-procesando";case"rechazado":return"estado-rechazado";default:return"estado-pendiente"}}getEstadoIcon(e){switch(e){case"completado":return"checkmark-circle-outline";case"pendiente":return"time-outline";case"PENDING":return"time-outline";case"procesando":return"refresh-circle-outline";case"rechazado":return"close-circle-outline";default:return"time-outline"}}getEstadoTexto(e){switch(e){case"completado":return"Pago Completado";case"pendiente":return"Pago Pendiente";case"PENDING":return"Pago Pendiente";case"procesando":return"Procesando Pago";case"rechazado":return"Pago Rechazado";default:return"Estado Desconocido"}}volver(){this.router.navigate(["/"])}reintentar(){this.codigo()&&this.cargarInfoPago()}formatearMonto(e){return this.pagosService.formatearMonto(e)}formatearFecha(e){return this.pagosService.formatearFecha(e)}obtenerMensajeEstado(e){return this.pagosService.obtenerMensajeEstado(e)}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h({type:n,selectors:[["app-pago-redirect"]],decls:4,vars:3,consts:[[1,"h-dvh","overflow-hidden","bg-base-200","flex","flex-col"],["title","Verificando informaci\xF3n del pago","message","Por favor espera mientras procesamos tu solicitud..."],[3,"titulo","mensaje","showRetry"],[1,"flex-1","overflow-y-auto"],[3,"retry","goHome","titulo","mensaje","showRetry"],[3,"pagoInfo","formatearMonto","formatearFecha","obtenerMensajeEstado"],[1,"w-full"],[1,"flex","flex-col","md:flex-row","items-center","justify-center","max-w-4xl","mx-auto","p-2","gap-2"],[1,"btn","btn-outline","btn-ghost","font-semibold","h-11",3,"click"],["nombreIcono","arrow-back-circle-outline","estilos","h-5 w-5"],[1,"btn","btn-primary","font-semibold","h-11"],[1,"btn","btn-primary","font-semibold","h-11",3,"click"],["nombreIcono","refresh-outline","estilos","h-5 w-5"]],template:function(t,l){t&1&&(r(0,"div",0),f(1,Y,1,0,"app-loading-spinner",1),f(2,L,1,3,"app-error-display",2),f(3,W,8,5,"div",3),a()),t&2&&(s(),u(l.loading()?1:-1),s(),u(l.error()&&!l.loading()?2:-1),s(),u(l.pagoInfo()&&!l.loading()?3:-1))},dependencies:[y,b,U,A,F,M],encapsulation:2});let o=n;return o})();export{Ce as PagoRedirectPage};
