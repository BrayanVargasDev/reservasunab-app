import{h as O}from"./chunk-4HN4PAFJ.js";import{F as y}from"./chunk-UAEYNMJW.js";import{Aa as R,Ba as s,Ca as r,Da as c,Db as h,Ea as p,Ka as x,Lb as I,Xa as m,Ya as N,Za as u,da as i,ia as g,pb as f,sb as l,va as E,wa as v,za as A}from"./chunk-U6U25BWF.js";var M=(t,a)=>a.value;function F(t,a){if(t&1&&(r(0,"div",2)(1,"label",3),m(2),c(),r(3,"span",4),m(4),c()()),t&2){let d=a.$implicit;i(2),u("",d.label,":"),i(),s("ngClass",d.class),i(),N(d.value)}}var w=(()=>{let a=class a{constructor(){this.title=l.required(),this.items=l.required()}};a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=g({type:a,selectors:[["pago-info-item"]],hostAttrs:[1,"bg-base-100","p-3","md:p-4","rounded-xl","shadow-lg","w-full"],inputs:{title:[1,"title"],items:[1,"items"]},decls:5,vars:1,consts:[[1,"max-sm:text-base","text-lg","font-semibold","text-gray-800","mb-2","flex","items-center","before:bg-accent","before:mr-3","before:rounded","before:w-1","before:h-5"],[1,"grid","grid-cols-1","gap-x-4","gap-y-2","md:grid-cols-2"],[1,"flex","flex-col","gap-1"],[1,"max-sm:text-xs","text-sm","font-semibold","text-gray-500","uppercase","tracking-wide","underline"],[1,"max-sm:text-sm","text-base",3,"ngClass"]],template:function(n,o){n&1&&(r(0,"h2",0),m(1),c(),r(2,"div",1),A(3,F,5,3,"div",2,M),c()),n&2&&(i(),u(" ",o.title(),`
`),i(2),R(o.items()))},dependencies:[I,h],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let t=a;return t})();function _(t,a){if(t&1&&p(0,"pago-info-item",5),t&2){let d=x();s("items",d.infoReservaItems())("title","Informaci\xF3n de la reserva")}}function U(t,a){if(t&1&&p(0,"pago-info-item",5),t&2){let d=x();s("items",d.infoMensualidadItems())("title","Informaci\xF3n de la mensualidad")}}var B=(()=>{let a=class a{constructor(){this.pagoInfo=l.required(),this.formatearMonto=l.required(),this.formatearFecha=l.required(),this.obtenerMensajeEstado=l.required(),this.informacionTransaccionItems=f(()=>this.pagoInfo().transaccion?[{label:"C\xF3digo",value:this.pagoInfo().pago.codigo,class:"bg-accent uppercase w-fit border-accent font-semibold px-2 py-1 border text-accent-content rounded-xl"},{label:"valor",value:this.formatearMonto()(this.pagoInfo().pago.valor),class:"bg-success text-lg w-fit font-semibold px-2 py-1 rounded-xl"},{label:"fecha de actualizaci\xF3n",value:this.formatearFecha()(this.pagoInfo().pago.actualizado_en),class:"font-semibold"},{label:"Id de transacci\xF3n",value:this.pagoInfo().pago.ticket_id,class:"bg-primary uppercase w-fit border-primary font-semibold px-2 py-1 border text-primary-content rounded-xl"},{label:"C\xF3digo trazabilidad",value:this.pagoInfo().transaccion.codigo_traza},{label:"M\xE9todo de Pago",value:this.pagoInfo().transaccion.tipo,class:"font-semibold"},{label:"Por medio de",value:this.pagoInfo().transaccion.entidad,class:"font-semibold"},{label:"Fecha de transacci\xF3n",value:this.formatearFecha()(this.pagoInfo().transaccion.fecha_banco)},{label:"Estado de transacci\xF3n",value:this.obtenerMensajeEstado()(this.pagoInfo().pago.estado),class:`estado-${this.pagoInfo().pago.estado}`}]:[]),this.infoUsuarioItems=f(()=>!this.pagoInfo().reserva?.usuario&&!this.pagoInfo().mensualidad?.usuario?[]:[{label:"Nombre",value:this.pagoInfo().reserva?.usuario.nombre_completo||this.pagoInfo().mensualidad?.usuario.nombre_completo},{label:"Correo electr\xF3nico",value:this.pagoInfo().reserva?.usuario.email||this.pagoInfo().mensualidad?.usuario.email||"No proporcionado"},{label:"Documento",value:`${this.pagoInfo().reserva?.usuario.tipo_documento||this.pagoInfo().mensualidad?.usuario.tipo_documento}: ${this.pagoInfo().reserva?.usuario.documento||this.pagoInfo().mensualidad?.usuario.documento}`,class:"font-semibold"},{label:"Tel\xE9fono",value:this.pagoInfo().reserva?.usuario.celular||this.pagoInfo().mensualidad?.usuario.celular||"No proporcionado"}]),this.infoReservaItems=f(()=>this.pagoInfo().reserva?this.pagoInfo().mensualidad?[]:[{label:"C\xF3digo de reserva",value:this.pagoInfo().reserva.codigo,class:"bg-warning uppercase w-fit border-warning font-semibold px-2 py-1 border text-warning-content rounded-xl"},{label:"Fecha",value:this.formatearFecha()(this.pagoInfo().reserva.fecha)},{label:"Hora",value:`${this.formatearFecha()(this.pagoInfo().reserva.hora_inicio)} - ${this.formatearFecha()(this.pagoInfo().reserva.hora_fin)}`},{label:"Espacio reservado",value:this.pagoInfo().reserva.espacio.nombre}]:[]),this.infoMensualidadItems=f(()=>{let e=this.pagoInfo().mensualidad;return!e||this.pagoInfo().reserva?[]:[{label:"ID Mensualidad",value:String(e.id),class:"bg-secondary uppercase w-fit border-secondary font-semibold px-2 py-1 border text-secondary-content rounded-xl"},{label:"Fecha inicio",value:this.formatearFecha()(e.fecha_inicio)},{label:"Fecha fin",value:this.formatearFecha()(e.fecha_fin)},{label:"Duraci\xF3n (d\xEDas)",value:this.calcularDuracion(e.fecha_inicio,e.fecha_fin),class:"font-semibold"},{label:"Espacio asignado",value:e.espacio.nombre}]}),this.esMensualidad=f(()=>{let e=this.pagoInfo();return!!e.mensualidad&&!e.reserva})}calcularDuracion(e,n){try{let o=new Date(e),C=new Date(n),b=Math.max(0,C.getTime()-o.getTime()),D=Math.ceil(b/(1e3*60*60*24));return String(D)}catch{return"-"}}getEstadoClass(e){let n="bg-success text-success-content font-bold w-full rounded-xl shadow-lg",o="bg-warning text-warning-content font-bold w-full rounded-xl shadow-lg",C="bg-info text-info-content font-bold w-full rounded-xl shadow-lg",b="bg-error text-error-content font-bold w-full rounded-xl shadow-lg";switch(e.toUpperCase()){case"OK":case"PAGADA":case"CONFIRMADA":case"COMPLETADO":case"ENROLLED":return n;case"PENDING":case"BANK":case"CAPTURED":case"CREATED":case"INICIAL":case"PENDIENTE":case"PROCESANDO":return o;case"NOT_AUTHORIZED":case"FAILED":case"EXPIRED":case"RECHAZADO":case"RECHAZADA":case"ERROR":return b;default:return o}}getEstadoIcon(e){switch(e.toUpperCase()){case"OK":case"PAGADA":case"CONFIRMADA":case"COMPLETADO":case"ENROLLED":return"checkmark-circle-outline";case"PENDING":case"BANK":case"CAPTURED":case"CREATED":case"INICIAL":case"PENDIENTE":case"PROCESANDO":return"time-outline";case"NOT_AUTHORIZED":case"FAILED":case"EXPIRED":case"RECHAZADO":case"RECHAZADA":case"ERROR":return"close-circle-outline";default:return"time-outline"}}getEstadoTexto(e){switch(e.toUpperCase()){case"OK":case"PAGADA":case"CONFIRMADA":case"COMPLETADO":case"ENROLLED":return"Pago Completado";case"PENDING":case"BANK":case"CAPTURED":case"CREATED":case"INICIAL":case"PENDIENTE":case"PROCESANDO":return"Pago Pendiente";case"NOT_AUTHORIZED":case"FAILED":case"EXPIRED":case"RECHAZADO":case"RECHAZADA":case"ERROR":return"Pago Rechazado";default:return"Estado Desconocido"}}};a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=g({type:a,selectors:[["app-pago-info-card"]],inputs:{pagoInfo:[1,"pagoInfo"],formatearMonto:[1,"formatearMonto"],formatearFecha:[1,"formatearFecha"],obtenerMensajeEstado:[1,"obtenerMensajeEstado"]},decls:10,vars:9,consts:[[1,"flex","flex-col","items-center","max-w-4xl","mx-auto","p-2","gap-2","animate-fade-in"],[1,"max-sm:px-4","px-8","max-sm:py-2","py-4",3,"ngClass"],[1,"flex","items-center","justify-center"],["estilos","max-sm:h-6 h-8 max-sm:w-6 w-8 mr-2",3,"nombreIcono"],[1,"max-sm:text-xl","max-md:text-2xl","text-3xl"],[3,"items","title"]],template:function(n,o){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),p(3,"app-web-icon",3),r(4,"h1",4),m(5),c()()(),p(6,"pago-info-item",5),E(7,_,1,2,"pago-info-item",5),E(8,U,1,2,"pago-info-item",5),p(9,"pago-info-item",5),c()),n&2&&(i(),s("ngClass",o.getEstadoClass(o.pagoInfo().pago.estado)),i(2),s("nombreIcono",o.getEstadoIcon(o.pagoInfo().pago.estado)),i(2),u(" ",o.getEstadoTexto(o.pagoInfo().pago.estado)," "),i(),s("items",o.informacionTransaccionItems())("title","Informaci\xF3n de la Transacci\xF3n"),i(),v(o.infoReservaItems().length>0?7:-1),i(),v(o.infoMensualidadItems().length>0?8:-1),i(),s("items",o.infoUsuarioItems())("title","Informaci\xF3n del usuario"))},dependencies:[I,h,y,O,w],encapsulation:2});let t=a;return t})();export{B as a};
