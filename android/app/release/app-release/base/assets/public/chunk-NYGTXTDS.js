import{a as Ve}from"./chunk-M4CGKRW4.js";import{b as Me,e as Ie,h as $e,j as te,o as De}from"./chunk-OCOUEVTR.js";import"./chunk-WXQYSXFO.js";import{a as Pe}from"./chunk-I7IWUYYH.js";import{a as xe,b as be,c as Ce,d as Re,f as Se,g as ye,h as we,i as Te,j as Ee,k as Fe}from"./chunk-KWYFY7T2.js";import{a as G}from"./chunk-ZU7Q4APP.js";import{a as _e}from"./chunk-PQQVET5C.js";import"./chunk-KTGXZBKE.js";import"./chunk-LKADUWP6.js";import"./chunk-6CQPCFUJ.js";import"./chunk-AI3LD7IZ.js";import{a as ge}from"./chunk-ODBDBKE7.js";import"./chunk-XPPSGRKL.js";import{f as ve,h as he}from"./chunk-4HN4PAFJ.js";import{i as U}from"./chunk-AV73RGVI.js";import{f as K}from"./chunk-N4CCYIXR.js";import"./chunk-UAEYNMJW.js";import{A as ue,C as fe,z as me}from"./chunk-YPFPCNBD.js";import{Aa as $,Ba as p,Ca as s,D as oe,Da as l,Db as B,Ea as u,Fa as j,Ga as N,H as m,Ia as w,Ib as de,Ja as S,Ka as c,Lb as Q,N as x,O as b,Ra as g,Rb as O,Sa as D,Ta as A,U as h,Xa as v,Ya as H,Za as q,_a as le,aa as z,bc as pe,c as J,da as o,ha as V,hb as L,ia as M,ib as ce,jb as Z,lb as T,na as y,pb as ee,ta as X,tb as _,u as ae,v as re,va as C,wa as R,xa as se,z as ne,za as I}from"./chunk-U6U25BWF.js";import"./chunk-B3LSNZRN.js";import"./chunk-WUBXWBRT.js";import"./chunk-B52GHH4C.js";import"./chunk-KZ3CI6ZI.js";import"./chunk-HC6MZPB3.js";import"./chunk-SV2ZKNWA.js";import"./chunk-IA5KSSRM.js";import"./chunk-RS5W3JWO.js";import"./chunk-XENCGOZ2.js";import"./chunk-XZRAAXKF.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-QY5CJPR3.js";import"./chunk-MCRJI3T3.js";import"./chunk-ZD4SBDZ6.js";import"./chunk-NCLOD2DI.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-BAKMWPBW.js";import"./chunk-AESNPOCP.js";import"./chunk-H3ZVKW6B.js";import"./chunk-HMK4XMX7.js";import"./chunk-E7UUDSES.js";import"./chunk-JQ3FRJ6A.js";import"./chunk-3IVKBF6N.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import{a as F,b as P,j as k}from"./chunk-LVXXLD6S.js";var Y=(()=>{let a=class a{constructor(){this.http=m(O),this.queryClient=m(ue),this._paginacion=h({pageIndex:0,pageSize:10}),this._datosPaginador=h(null),this._filtroTexto=h(""),this.paginacion=ee(()=>this._paginacion()),this.datosPaginador=ee(()=>this._datosPaginador()),this.filtroTexto=this._filtroTexto.asReadonly(),this.reservasQuery=fe(()=>({queryKey:["reservas",this.paginacion(),this._filtroTexto()],queryFn:()=>te(this.http,P(F({},this.paginacion()),{search:this._filtroTexto()})),select:e=>(this._datosPaginador.set(e.meta),e.data)}))}setPaginacion(e){this._paginacion.set(e)}setFiltroTexto(e){this._filtroTexto.set(e),this.setPaginacion(P(F({},this._paginacion()),{pageIndex:0}))}limpiarFiltro(){this._filtroTexto.set("")}aprobar(e){return k(this,null,function*(){return Me(this.http,e)})}eliminar(e){return k(this,null,function*(){return Ie(this.http,e)})}prefetchReservas(e){this.queryClient.prefetchQuery({queryKey:["reservas",e,this._filtroTexto()],queryFn:()=>te(this.http,P(F({},e),{search:this._filtroTexto()})),staleTime:1e3*60*5})}};a.\u0275fac=function(i){return new(i||a)},a.\u0275prov=oe({token:a,factory:a.\u0275fac,providedIn:"root"});let t=a;return t})();var ke=["dialog"];function ze(t,a){t&1&&(s(0,"div",10),u(1,"span",16),s(2,"span"),v(3,"Cargando detalles..."),l()())}function je(t,a){if(t&1&&(s(0,"div",11)(1,"span"),v(2),l()()),t&2){let n=c();o(2),H(n.error())}}function Ne(t,a){if(t&1&&u(0,"dreservas-info-reserva",12),t&2){let n=c();p("resumen",n.resumen())}}var Ae=(()=>{let a=class a{constructor(){this.http=m(O),this.dialogRef=_("dialog"),this.cargando=h(!1),this.resumen=h(null),this.error=h(null)}open(e){return k(this,null,function*(){let i=this.dialogRef()?.nativeElement;if(i){this.cargando.set(!0),this.error.set(null),this.resumen.set(null),i.showModal();try{let r=yield $e(this.http,e);this.resumen.set(r.data??null),r.data||this.error.set("No se encontraron detalles de la reserva.")}catch{this.error.set("Error al cargar los detalles de la reserva.")}finally{this.cargando.set(!1)}}})}close(){let e=this.dialogRef()?.nativeElement;e&&(e.close(),this.resumen.set(null),this.error.set(null),this.cargando.set(!1))}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=M({type:a,selectors:[["modal-ver-reserva"]],viewQuery:function(i,r){i&1&&g(r.dialogRef,ke,5),i&2&&D()},decls:20,vars:1,consts:[["dialog",""],[1,"modal","p-0","z-50",2,"scrollbar-gutter","unset"],[1,"modal-box","p-0","max-w-[95dvw]","lg:max-w-[80dvw]","xl:max-w-[45rem]","w-full","max-h-[90dvh]","overflow-hidden","relative","flex","flex-col"],[1,"sticky","top-0","bg-base-100","z-10","border-b","border-base-300","px-3","lg:px-6","py-3","flex","items-center","justify-between"],[1,"flex","items-center","gap-2"],["nombreIcono","information-circle-outline","estilos","h-6 w-6"],[1,"text-xl","font-bold"],[1,"btn","btn-xs","btn-circle","btn-neutral","btn-outline",3,"click"],["nombreIcono","close-outline","estilos","h-5 w-5"],[1,"flex-grow","overflow-y-auto","px-3","lg:px-6","py-4"],[1,"flex","items-center","justify-center","h-40","gap-2"],[1,"alert","alert-error","rounded-lg"],[3,"resumen"],[1,"sticky","bottom-0","bg-base-100","z-10","border-t","border-base-300","px-3","lg:px-6","py-3","flex","justify-end"],[1,"btn","max-sm:btn-sm","btn-primary","sm:h-11",3,"click"],["method","dialog",1,"modal-backdrop"],[1,"loading","loading-spinner","loading-lg","text-primary"]],template:function(i,r){if(i&1){let d=w();s(0,"dialog",1,0)(2,"div",2)(3,"div",3)(4,"div",4),u(5,"app-web-icon",5),s(6,"span",6),v(7,"Detalle de reserva"),l()(),s(8,"button",7),S("click",function(){return x(d),b(r.close())}),u(9,"app-web-icon",8),l()(),s(10,"div",9),C(11,ze,4,0,"div",10)(12,je,3,1,"div",11)(13,Ne,1,1,"dreservas-info-reserva",12),l(),s(14,"div",13)(15,"button",14),S("click",function(){return x(d),b(r.close())}),v(16,"Cerrar"),l()()(),s(17,"form",15)(18,"button"),v(19,"close"),l()()()}i&2&&(o(11),R(r.cargando()?11:r.error()?12:13))},dependencies:[Q,De,he],styles:[".modal-box[_ngcontent-%COMP%]{border-radius:.75rem}"],changeDetection:0});let t=a;return t})();var qe=["estadoCell"],Le=["codigoCell"],Be=["horasCell"],Oe=["idCell"],Ke=["modalVer"],Ue=["alertaReserva"],W=(t,a)=>a.id;function Ge(t,a){if(t&1){let n=w();s(0,"div",11),S("click",function(){let i=x(n).$implicit,r=c();return b(i.getValue()==="pendiente"&&r.authService.tienePermisos(r.permisos.ADMINISTRAR_RESERVAS)?r.aprobarReserva(i.row.original):null)}),v(1),L(2,"upperFirst"),l()}if(t&2){let n=a.$implicit,e=c();p("ngClass",`badge-${e.pagoService.obtenerColorEstado(n.row.original.estado)}`),o(),q(" ",ce(2,2,n.getValue())," ")}}function Ye(t,a){if(t&1&&(s(0,"span",12),v(1),l()),t&2){let n=a.$implicit;o(),H(n.getValue())}}function We(t,a){if(t&1&&(s(0,"span",13),v(1),L(2,"date"),L(3,"date"),l()),t&2){let n=a.$implicit;o(),le(" ",Z(2,2,n.row.original.hora_inicio,"shortTime")," - ",Z(3,5,n.row.original.hora_fin,"shortTime")," ")}}function Je(t,a){if(t&1&&(s(0,"div",14)(1,"span",15),v(2),l(),s(3,"div",16),u(4,"div",17)(5,"div",18),l()()),t&2){let n=a.$implicit,e=c();o(2),q(" ",n.getValue()," "),o(),X("data-tip",e.obtenerTextoReporte(n.row.original)),o(),p("ngClass",e.obtenerClaseReporte(n.row.original)),o(),p("ngClass",e.obtenerClaseReporte(n.row.original))}}function Xe(t,a){t&1&&u(0,"th",19)}function Ze(t,a){if(t&1&&(j(0),u(1,"span",22),N()),t&2){let n=a.$implicit;o(),p("innerHTML",n,z)}}function et(t,a){if(t&1&&y(0,Ze,2,1,"ng-container",21),t&2){let n=c().$implicit;p("flexRender",n.column.columnDef.header)("flexRenderProps",n.getContext())}}function tt(t,a){if(t&1&&(s(0,"th",20),C(1,et,1,2,"ng-container"),l()),t&2){let n=a.$implicit;p("colSpan",n.colSpan),o(),R(n.isPlaceholder?-1:1)}}function it(t,a){if(t&1&&(s(0,"tr",9),C(1,Xe,1,0,"th",19),I(2,tt,2,2,"th",20,W),l()),t&2){let n=a.$implicit;c();let e=A(9);o(),R(e.hiddenColumnIds().size!==0?1:-1),o(),$(n.headers)}}function at(t,a){if(t&1){let n=w();s(0,"td",24)(1,"app-table-expansor",27),S("toggleExpand",function(){x(n);let i=c().$implicit;return b(i.toggleExpanded())}),l()()}if(t&2){let n=c().$implicit,e=c();o(),p("disabled",e.appService.editando())("isExpanded",n.getIsExpanded())}}function rt(t,a){if(t&1&&(j(0),u(1,"div",28),N()),t&2){let n=a.$implicit;o(),p("innerHTML",n,z)}}function nt(t,a){if(t&1&&(s(0,"td",25),y(1,rt,2,1,"ng-container",21),l()),t&2){let n=a.$implicit;o(),p("flexRender",n.column.columnDef.cell)("flexRenderProps",n.getContext())}}function ot(t,a){if(t&1&&(j(0),u(1,"div",28),N()),t&2){let n=a.$implicit;o(),p("innerHTML",n,z)}}function st(t,a){if(t&1&&(s(0,"li",30)(1,"span",31),v(2),l(),y(3,ot,2,1,"ng-container",21),l()),t&2){let n=c().$implicit,e=c(3).$implicit;c();let i=A(9);o(2),q(" ",n.columnDef.header,": "),o(),p("flexRender",i.getCell(n,e).column.columnDef.cell)("flexRenderProps",i.getCell(n,e).getContext())}}function lt(t,a){if(t&1&&C(0,st,4,3,"li",30),t&2){let n=a.$implicit;c(4);let e=A(9);R(e.hiddenColumnIds().has(n.id)?0:-1)}}function ct(t,a){if(t&1&&(s(0,"ul"),I(1,lt,1,1,null,null,se),l()),t&2){let n=c(3);o(),$(n.tablaReservas.getAllLeafColumns())}}function dt(t,a){if(t&1&&(s(0,"tr",26)(1,"td")(2,"div",29),C(3,ct,3,0,"ul"),l()()()),t&2){let n=c().$implicit;c();let e=A(9);o(),X("colspan",n.getVisibleCells().length+1),o(2),R(e.hiddenColumnIds().size!==0?3:-1)}}function pt(t,a){if(t&1&&(s(0,"tr",23),C(1,at,2,2,"td",24),I(2,nt,2,2,"td",25,W),l(),C(4,dt,4,2,"tr",26)),t&2){let n=a.$implicit;c();let e=A(9);o(),R(e.hiddenColumnIds().size!==0?1:-1),o(),$(n.getVisibleCells()),o(2),R(n.getIsExpanded()&&e.hiddenColumnIds().size!==0?4:-1)}}function mt(t,a){}var Qe=(()=>{let a=class a{constructor(){this.router=m(pe),this.authService=m(K),this.appService=m(U),this.reservasService=m(Y),this.alertaService=m(G),this.pagoService=m(_e),this.permisos=ve,this.estadoCell=_.required("estadoCell"),this.codigoCell=_.required("codigoCell"),this.horasCell=_.required("horasCell"),this.idCell=_.required("idCell"),this.modalVerReservaRef=_("modalVer"),this.columnasPorDefecto=h([{id:"id",accessorKey:"id",header:"ID",size:40,meta:{priority:1/0},cell:this.idCell},{id:"usuario",header:"Usuario",size:300,meta:{priority:1/0},cell:e=>{let i=e.row.original.usuario_reserva?.persona;return i?`<span class="font-bold max-sm:text-sm text-base">${this.obtenerNombreCompleto(i)}</span>`:""}},{id:"espacio",header:"Espacio",size:300,cell:e=>`${e.row.original.espacio?.nombre||""}`},{id:"fecha",accessorKey:"fecha",header:"Fecha",cell:e=>new Date(e.getValue()).toLocaleDateString()},{id:"horas",header:"Horario",cell:this.horasCell},{id:"aprobado_por",header:"Aprobado por",cell:e=>{let i=e.row.original.aprobado_por?.persona;return i?`<span class="font-bold max-sm:text-sm text-base">${this.obtenerNombreCompleto(i)}</span>`:""}},{id:"aprobado_en",accessorKey:"aprobado_en",header:"Fecha aprob.",cell:e=>{let i=e.getValue();return i?new Date(i).toLocaleString():""}},{id:"estado",accessorKey:"estado",header:"Estado",meta:{priority:3},cell:this.estadoCell,accessorFn:e=>this.pagoService.obtenerMensajeEstadoBadge(e.estado)},{id:"acciones",header:"Acciones",meta:{priority:1/0},cell:e=>{let i=e.row.original,r=[];if(r.push({tooltip:"Ver detalles",icono:"eye-outline",color:"info",disabled:this.appService.editando?.(),eventoClick:()=>this.modalVerReservaRef()?.open(i.id)}),i.estado==="pendienteap"&&this.authService.tienePermisos?.(this.permisos.ADMINISTRAR_RESERVAS)){let d=this.esReservaPasada(i);r.push({tooltip:d?"No se puede aprobar reservas pasadas":"Aprobar",icono:"checkmark-done-circle-outline",color:"success",disabled:this.appService.editando?.()||d,eventoClick:()=>this.aprobarReserva(i)})}if(this.authService.tienePermisos?.(this.permisos.CANCELAR_RESERVAS)){let d=this.estaCancelada(i),f=this.esReservaPasada(i);r.push({tooltip:d?"Reserva ya cancelada":f?"No se puede cancelar reservas pasadas":"Cancelar",icono:"trash-outline",color:"error",disabled:this.appService.editando?.()||d||f||!e.row.original.puede_cancelar,eventoClick:()=>this.cancelarReserva(i)})}return Se(Pe,{inputs:{visibles:e.column.getIsVisible(),acciones:r}})}}]),this.alertaReserva=_.required("alertaReserva",{read:V}),this.tableState=h({expanded:{},globalFilter:""}),this.tablaReservas=we(()=>({data:this.reservasQuery.data()??[],columns:this.columnasPorDefecto(),getCoreRowModel:xe(),getPaginationRowModel:Re(),getRowCanExpand:()=>!0,autoResetExpanded:!1,getFilteredRowModel:Ce(),getExpandedRowModel:be(),manualPagination:!0,autoResetPageIndex:!1,state:{pagination:this.reservasService.paginacion(),expanded:this.tableState().expanded,globalFilter:this.tableState().globalFilter},onPaginationChange:e=>{let i=typeof e=="function"?e(this.reservasService.paginacion()):e;this.reservasService.setPaginacion({pageIndex:i.pageIndex,pageSize:i.pageSize})},onExpandedChange:e=>{let i=typeof e=="function"?e(this.tableState().expanded):e;this.tableState.update(r=>P(F({},r),{expanded:i}))}}))}obtenerNombreCompleto(e){let i=`${e.primer_nombre||""} ${e.segundo_nombre||""}`.trim(),r=`${e.primer_apellido||""} ${e.segundo_apellido||""}`.trim();return`${i} ${r}`.trim()}get reservasQuery(){return this.reservasService.reservasQuery}onToggleRow(e,i=!1){let r=e.id,d=this.tableState().expanded,f;i?f={[r]:!0}:f=d[r]?{}:{[r]:!0},this.tableState.update(E=>P(F({},E),{expanded:f}))}aprobarReserva(e){if(this.esReservaPasada(e)){this.alertaService.error("No se pueden aprobar reservas anteriores al momento actual.",5e3,this.alertaReserva(),"fixed flex p-4 transition-all ease-in-out bottom-4 right-4");return}this.alertaService.confirmarAccion(`\xBFAprobar la reserva <strong>${e.codigo}</strong>?`,this.alertaReserva(),"Aprobar reserva","success").then(i=>{i&&this.reservasService.aprobar(e.id).then(()=>{this.alertaService.success("Reserva aprobada exitosamente.",5e3,this.alertaReserva(),"fixed flex p-4 transition-all ease-in-out bottom-4 right-4"),this.reservasService.reservasQuery.refetch()}).catch(r=>{console.error(r),this.alertaService.error("Error al aprobar la reserva.",5e3,this.alertaReserva(),"fixed flex p-4 transition-all ease-in-out bottom-4 right-4")})})}estaCancelada(e){let i=e?.eliminado_en;return e.estado?.toLowerCase?.()==="cancelada"||!!i}combinarFechaYHora(e,i){try{let r=new Date(e),d=new Date(i);if(isNaN(r.getTime())||isNaN(d.getTime()))return null;let f=new Date(r);return f.setHours(d.getHours(),d.getMinutes(),0,0),f}catch{return null}}esReservaPasada(e){let i=new Date,r=this.combinarFechaYHora(e.fecha,e.hora_inicio);return r?r.getTime()<i.getTime():!1}cancelarReserva(e){if(this.estaCancelada(e)){this.alertaService.info("La reserva ya est\xE1 cancelada.",4e3,this.alertaReserva(),"fixed flex p-4 transition-all ease-in-out bottom-4 right-4");return}if(this.esReservaPasada(e)){this.alertaService.error("No se pueden cancelar reservas anteriores al momento actual.",5e3,this.alertaReserva(),"fixed flex p-4 transition-all ease-in-out bottom-4 right-4");return}this.alertaService.confirmarAccion(`\xBFCancelar la reserva <strong>${e.codigo}</strong>?`,this.alertaReserva(),"Cancelar reserva","warning").then(i=>{i&&this.reservasService.eliminar(e.id).then(()=>{this.alertaService.success("Reserva cancelada.",5e3,this.alertaReserva(),"fixed flex p-4 transition-all ease-in-out bottom-4 right-4"),this.reservasService.reservasQuery.refetch(),this.appService.creditosQuery.refetch()}).catch(r=>{console.error(r),this.alertaService.error("Error al cancelar la reserva.",5e3,this.alertaReserva(),"fixed flex p-4 transition-all ease-in-out bottom-4 right-4")})})}onPageChange(e){this.reservasService.setPaginacion(e)}obtenerClaseReporte(e){return e.reportado?"status status-success":!e.reportado&&e.ultimo_error_reporte?"status status-error":"status status-neutral"}obtenerTextoReporte(e){return e.reportado?"":!e.reportado&&e.ultimo_error_reporte?e.ultimo_error_reporte||"Error desconocido":"No reportado"}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=M({type:a,selectors:[["tabla-reservas"]],viewQuery:function(i,r){i&1&&(g(r.estadoCell,qe,5),g(r.codigoCell,Le,5),g(r.horasCell,Be,5),g(r.idCell,Oe,5),g(r.modalVerReservaRef,Ke,5),g(r.alertaReserva,Ue,5,V)),i&2&&D(6)},decls:21,vars:8,consts:[["estadoCell",""],["codigoCell",""],["horasCell",""],["idCell",""],["tabla","responsiveTable"],["alertaReserva",""],["modalVer",""],["responsiveTable","",1,"table","w-full","rounded-box","table-sm","sm:table-md",3,"table"],[1,"sticky","top-0","z-20","bg-base-300"],[1,"bg-base-300","z-20","rounded-t-box"],[3,"cambioPaginacion","prefetchFunction","ngClass","estado","paginacion","mostrarInfo","mostrarSelectorTamano","mostrarExtremos","deshabilitado"],[1,"badge","font-semibold","min-w-28","transition-all","align-middle",3,"click","ngClass"],[1,"font-mono","text-sm","truncate","text-ellipsis"],[1,"max-sm:text-sm","text-base"],[1,"flex","items-center","gap-2","w-fit"],[1,"font-bold","max-sm:text-sm","text-base"],[1,"inline-grid","*:[grid-area:1/1]","tooltip","tooltip-right"],[1,"animate-ping",3,"ngClass"],[3,"ngClass"],[1,"p-2","text-left","first:rounded-tl-box","border-none","last:rounded-tr-box","bg-base-100","z-20"],[1,"p-2","text-left","first:rounded-tl-box","border-none","last:rounded-tr-box","bg-base-100","z-20",3,"colSpan"],[4,"flexRender","flexRenderProps"],[1,"text-left",3,"innerHTML"],[1,"bg-base-100"],[1,"!pe-0"],[1,"py-1"],[1,"bg-base-300","border-none"],[3,"toggleExpand","disabled","isExpanded"],[1,"max-sm:text-sm","text-base",3,"innerHTML"],[1,"bg-base-100","rounded-md","p-1","px-3","w-full"],[1,"flex","my-2","flex-row","gap-2","items-center"],[1,"font-bold","max-sm:text-sm","text-base","text-base-content"]],template:function(i,r){if(i&1){let d=w();y(0,Ge,3,4,"ng-template",null,0,T)(2,Ye,2,1,"ng-template",null,1,T)(4,We,4,8,"ng-template",null,2,T)(6,Je,6,4,"ng-template",null,3,T),s(8,"table",7,4)(10,"thead",8),I(11,it,4,1,"tr",9,W),l(),s(13,"tbody"),I(14,pt,5,2,null,null,W),l()(),s(16,"app-paginador",10),S("cambioPaginacion",function(E){return x(d),b(r.onPageChange(E))})("prefetchFunction",function(E){return x(d),b(r.reservasService.prefetchReservas(E))}),l(),y(17,mt,0,0,"ng-template",null,5,T),u(19,"modal-ver-reserva",null,6)}i&2&&(o(8),p("table",r.tablaReservas()),o(3),$(r.tablaReservas.getHeaderGroups()),o(3),$(r.tablaReservas.getRowModel().rows),o(2),p("ngClass","flex flex-col sm:flex-row items-center justify-between gap-2 md:gap-4 p-2 md:p-4 bg-base-100 rounded-b-box")("estado",r.reservasService.paginacion())("paginacion",r.reservasService.datosPaginador()??null)("mostrarInfo",!0)("mostrarSelectorTamano",!0)("mostrarExtremos",!0)("deshabilitado",r.reservasQuery.isFetching()))},dependencies:[Q,B,de,ye,Fe,Ee,Te,ge,Ae],styles:[".table[_ngcontent-%COMP%]   :where(th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]){white-space:nowrap}"],changeDetection:0});let t=a;return t})();var ut=["alertaReservas"];function ft(t,a){}var di=(()=>{let a=class a{constructor(){this.destroy$=new J,this.searchSubject=new J,this.authService=m(K),this.appService=m(U),this.reservasService=m(Y),this.alertaService=m(G),this.alertaReservas=_.required("alertaReservas",{read:V})}ngOnInit(){this.searchSubject.pipe(ae(300),re(),ne(this.destroy$)).subscribe(e=>this.reservasService.setFiltroTexto(e))}aplicarFiltro(e){this.searchSubject.next(e)}limpiarFiltro(){this.reservasService.limpiarFiltro()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=M({type:a,selectors:[["app-reservas-main"]],viewQuery:function(i,r){i&1&&g(r.alertaReservas,ut,5,V),i&2&&D()},hostAttrs:[1,"flex","flex-col","h-full","w-full","sm:pl-3"],decls:10,vars:3,consts:[["alertaReservas",""],[1,"flex","flex-col","md:flex-row","md:pr-2","w-full","pb-2","md:pb-4","items-stretch","justify-center","md:justify-between","sticky","top-0","z-10","bg-base-300"],[1,"flex","items-star","flex-col","gap-1"],[1,"font-bold","text-4xl","max-sm:text-2xl","mb-2","md:mb-0"],["estilos","py-0"],[1,"flex","flex-col","justify-center","md:flex-row","max-sm:px-1","pt-1","max-md:gap-1","gap-2"],["type","text","placeholder","Buscar...",1,"input","input-bordered","max-sm:input-sm","input-primary","w-full","sm:h-11","rounded-box","md:max-w-xs","placeholder:text-gray-500","placeholder:text-sm","disabled:placeholder:text-gray-400",3,"input","disabled","value"],[3,"ngClass"]],template:function(i,r){if(i&1){let d=w();s(0,"div",1)(1,"div",2)(2,"h2",3),v(3,"Reservas"),l(),u(4,"app-breadcrumbs",4),l(),s(5,"div",5)(6,"input",6),S("input",function(E){return x(d),b(r.aplicarFiltro(E.target.value))}),l()()(),u(7,"tabla-reservas",7),y(8,ft,0,0,"ng-template",null,0,T)}i&2&&(o(6),p("disabled",r.appService.editando())("value",r.reservasService.filtroTexto()),o(),p("ngClass","overflow-y-auto overflow-x-hidden"))},dependencies:[Q,B,me,Qe,Ve],encapsulation:2,changeDetection:0});let t=a;return t})();export{di as default};
