import{a as Ne,c as Qe,d as Je,e as Fe,f as qe,g as Be,h as Oe,k as Ge,l as $e,m as Le,n as Ue,o as ze}from"./chunk-OCOUEVTR.js";import{b as ke}from"./chunk-LHBRERJU.js";import{c as Ve}from"./chunk-WXQYSXFO.js";import{a as G}from"./chunk-AMCW56AE.js";import{a as Te,b as U}from"./chunk-WNVXENDG.js";import{a as Ae}from"./chunk-ZU7Q4APP.js";import{a as Ie,b as O}from"./chunk-KTGXZBKE.js";import{d as L,m as Pe}from"./chunk-LKADUWP6.js";import{f as q,g as B}from"./chunk-6CQPCFUJ.js";import{h as je}from"./chunk-4HN4PAFJ.js";import{i as we}from"./chunk-AV73RGVI.js";import{f as De}from"./chunk-N4CCYIXR.js";import{C as F,G as te}from"./chunk-YPFPCNBD.js";import{Aa as Q,Ba as C,Ca as r,D as oe,Da as s,Db as Ce,Ea as f,Eb as xe,Fa as de,Ga as ce,H as T,Hb as Se,Ia as w,Ib as be,Ja as b,Jb as ye,Ka as u,Kb as Ee,Lb as Me,N as x,O as S,R as re,Ra as X,Rb as Re,Sa as ue,U as M,Va as me,Xa as c,Ya as P,Za as y,_a as $,ba as se,bb as _e,cb as W,da as d,db as Z,ha as Y,hb as I,ia as le,ib as ve,jb as J,kb as pe,lb as he,na as H,pb as p,qb as ge,tb as ee,va as h,wa as g,wb as fe,xa as K,za as N}from"./chunk-U6U25BWF.js";import{a as j,b as A,j as D}from"./chunk-LVXXLD6S.js";var E={DISPONIBILIDAD:"disponibilidad",CARGANDO:"cargando",RESUMEN_NUEVA:"resumen_nueva",RESUMEN_EXISTENTE:"resumen_existente",AGREGAR_JUGADORES:"agregar_jugadores",AGREGAR_DETALLES:"agregar_detalles",PROCESANDO_PAGO:"procesando_pago",CANCELANDO_RESERVA:"cancelando_reserva"},Ye=(()=>{let o=class o{constructor(){this.http=T(Re),this._fecha=M(null),this._idGrupo=M(null),this._idSede=M(null),this._idCategoria=M(null),this._idEspacio=M(null),this._modalAbierta=M(!1),this._abiertaDesdeMisReservas=M(!1),this._estadoModal=M(E.DISPONIBILIDAD),this._mensajeCargando=M(""),this._estadoResumen=M(null),this._miReserva=M(null),this._idMiReserva=M(null),this._termino_busqueda_jugadores=M(""),this._jugadoresSeleccionados=M([]),this._detallesSeleccionados=M([]),this._termino_busqueda_elementos=M(""),this._requiere_reconfirmacion=M(!1),this.estadoModal=p(()=>this._estadoModal()),this.mensajeCargando=p(()=>this._mensajeCargando()),this.estadoResumen=p(()=>this._estadoResumen()),this.miReserva=p(()=>this._miReserva()),this.idMiReserva=p(()=>this._idMiReserva()),this.terminoBusquedaJugadores=p(()=>this._termino_busqueda_jugadores()),this.jugadoresSeleccionados=p(()=>this._jugadoresSeleccionados()),this.detallesSeleccionados=p(()=>this._detallesSeleccionados()),this.terminoBusquedaElementos=p(()=>this._termino_busqueda_elementos()),this.requiereReconfirmacion=p(()=>this._requiere_reconfirmacion()),this.cargando=p(()=>this._estadoModal()===E.CARGANDO||this._estadoModal()===E.PROCESANDO_PAGO||this._estadoModal()===E.CANCELANDO_RESERVA),this.mostrandoDisponibilidad=p(()=>this._estadoModal()===E.DISPONIBILIDAD),this.mostrandoResumenNueva=p(()=>this._estadoModal()===E.RESUMEN_NUEVA),this.mostrandoResumenExistente=p(()=>this._estadoModal()===E.RESUMEN_EXISTENTE),this.mostrandoJugadores=p(()=>this._estadoModal()===E.AGREGAR_JUGADORES),this.mostrandoDetalles=p(()=>this._estadoModal()===E.AGREGAR_DETALLES),this.procesandoPago=p(()=>this._estadoModal()===E.PROCESANDO_PAGO),this.resumen=p(()=>this.mostrandoResumenNueva()),this.mostrarJugadores=p(()=>this.mostrandoJugadores()),this.mostrarDetalles=p(()=>this.mostrandoDetalles()),this.fecha=this._fecha.asReadonly(),this.modalAbierta=this._modalAbierta.asReadonly(),this.abiertaDesdeMisReservas=this._abiertaDesdeMisReservas.asReadonly(),this.allEspaciosQuery=F(()=>({queryKey:["espacios","all",this._fecha(),this._idGrupo(),this._idSede(),this._idCategoria()],queryFn:()=>Be(this.http,{fecha:this._fecha(),idGrupo:this._idGrupo(),idSede:this._idSede(),idCategoria:this._idCategoria()}),select:e=>e.data,enabled:p(()=>this._fecha()!==null)})),this.espacioDetallesQuery=F(()=>({queryKey:["rvespacio","detalles",this._idEspacio(),this._fecha()],queryFn:()=>qe(this.http,this._idEspacio(),this._fecha()),select:e=>e.data,disabled:!this._idEspacio()})),this.miReservaQuery=F(()=>({queryKey:["rvespacio","miReserva",this._idMiReserva()],queryFn:()=>Oe(this.http,this._idMiReserva()),select:e=>e.data,enabled:!!this._idMiReserva(),staleTime:0})),this.jugadoresQuery=F(()=>({queryKey:["jugadores","buscar",this._termino_busqueda_jugadores()],queryFn:()=>Qe(this.http,this._termino_busqueda_jugadores(),this.espacioDetallesQuery.data()?.permite_externos),select:e=>e.data,enabled:p(()=>this._estadoModal()===E.AGREGAR_JUGADORES&&this._termino_busqueda_jugadores().trim().length>0),staleTime:30*1e3})),this.elementosQuery=F(()=>({queryKey:["elementos","buscar",this._termino_busqueda_elementos()],queryFn:()=>Ve(this.http,this._termino_busqueda_elementos(),this._idEspacio()),select:e=>e.data,enabled:p(()=>this._estadoModal()===E.AGREGAR_DETALLES&&this._termino_busqueda_elementos().trim().length>0),staleTime:30*1e3}))}setFecha(e){this._fecha.set(e)}setIdGrupo(e){this._idGrupo.set(e)}setIdSede(e){this._idSede.set(e)}setIdCategoria(e){this._idCategoria.set(e)}setFiltros(e){e.fecha!==void 0&&this._fecha.set(e.fecha),e.idGrupo!==void 0&&this._idGrupo.set(e.idGrupo),e.idSede!==void 0&&this._idSede.set(e.idSede),e.idCategoria!==void 0&&this._idCategoria.set(e.idCategoria)}limpiarFiltros(){this._fecha.set(null),this._idGrupo.set(null),this._idSede.set(null),this._idCategoria.set(null)}limpiarFecha(){this._fecha.set(null)}limpiarUbicacion(){this._idSede.set(null)}limpiarCategoria(){this._idCategoria.set(null)}limpiarGrupo(){this._idGrupo.set(null)}setIdEspacio(e){this._idEspacio.set(e)}abrirModal(e=!1){this._modalAbierta.set(!0),this._abiertaDesdeMisReservas.set(e)}cerrarModal(){return D(this,null,function*(){this._modalAbierta.set(!1),yield new Promise(e=>setTimeout(e,300)),this._idEspacio.set(null),this._estadoModal.set(E.DISPONIBILIDAD),this._mensajeCargando.set(""),this._estadoResumen.set(null),this._miReserva.set(null),this._idMiReserva.set(null),this._termino_busqueda_jugadores.set(""),this._jugadoresSeleccionados.set([]),this._detallesSeleccionados.set([]),this._termino_busqueda_elementos.set(""),this._requiere_reconfirmacion.set(!1),this._abiertaDesdeMisReservas.set(!1)})}setCargando(e){typeof e=="boolean"?e?(this._mensajeCargando.set("Cargando..."),this._estadoModal.set(E.CARGANDO)):this.setMostrarDisponibilidad():(this._mensajeCargando.set(e||"Cargando..."),this._estadoModal.set(E.CARGANDO))}setMostrarDisponibilidad(){this._estadoModal.set(E.DISPONIBILIDAD),this._mensajeCargando.set(""),this.espacioDetallesQuery.refetch()}setMostrarResumenNueva(e){this._estadoResumen.set(e),this._miReserva.set(null),this._estadoModal.set(E.RESUMEN_NUEVA),this._mensajeCargando.set("")}setMostrarResumenExistente(e){this._miReserva.set(e),this._estadoResumen.set(null),this._estadoModal.set(E.RESUMEN_EXISTENTE),this._mensajeCargando.set(""),this._requiere_reconfirmacion.set(!1)}setMostrarJugadores(){this._estadoModal.set(E.AGREGAR_JUGADORES),this._termino_busqueda_jugadores.set(""),this._jugadoresSeleccionados.set([]),this._mensajeCargando.set("")}setMostrarDetalles(){this._estadoModal.set(E.AGREGAR_DETALLES),this._termino_busqueda_elementos.set(""),this._mensajeCargando.set("")}setProcesandoPago(){this._mensajeCargando.set("Procesando pago..."),this._estadoModal.set(E.PROCESANDO_PAGO)}setCancelandoReserva(){this._mensajeCargando.set("Cancelando reserva..."),this._estadoModal.set(E.CANCELANDO_RESERVA)}setResumen(e){e||this.setMostrarDisponibilidad()}setPago(e){e&&this.setProcesandoPago()}iniciarReserva(e,a,n,l){return Ge(this.http,{base:e,fecha:a,horaInicio:n,horaFin:l})}setEstadoResumen(e){e?this.setMostrarResumenNueva(e):this._estadoResumen.set(null)}setMiReserva(e){e?this.setMostrarResumenExistente(e):this._miReserva.set(null)}setIdMiReserva(e){this._idMiReserva()!==e&&this._miReserva.set(null),this._idMiReserva.set(e)}pagarReserva(e){return Ue(this.http,e)}pagarReservaConSaldo(e){return Le(this.http,e)}cancelarReserva(e){return Fe(this.http,e)}setTerminoBusquedaJugadores(e){this._termino_busqueda_jugadores.set(e)}agregarJugadorSeleccionado(e){let a=this._jugadoresSeleccionados();a.some(n=>n.id===e.id)||this._jugadoresSeleccionados.set([...a,e])}removerJugadorSeleccionado(e){let a=this._jugadoresSeleccionados();this._jugadoresSeleccionados.set(a.filter(n=>n.id!==e))}limpiarJugadoresSeleccionados(){this._jugadoresSeleccionados.set([])}setTerminoBusquedaElementos(e){this._termino_busqueda_elementos.set(e)}agregarElemento(e,a=1){if(!e)return;let n=this._detallesSeleccionados(),l=n.findIndex(m=>m.id===e.id);if(l>=0){let m=n[l],v=A(j({},m),{cantidad_seleccionada:(m.cantidad_seleccionada??0)+Math.max(1,a)}),_=[...n];_[l]=v,this._detallesSeleccionados.set(_)}else{let m=A(j({},e),{cantidad_seleccionada:(e.cantidad_seleccionada??0)+Math.max(1,a)});this._detallesSeleccionados.set([...n,m])}}removerElemento(e){let a=this._detallesSeleccionados();this._detallesSeleccionados.set(a.filter((n,l)=>l!==e))}limpiarDetallesSeleccionados(){this._detallesSeleccionados.set([])}confirmarAgregarDetallesLocal(){let e=this._estadoResumen();if(!e)return;let a=e.detalles||[],n=this._detallesSeleccionados(),l=new Map;for(let _ of a)l.set(_.id,_);for(let _ of n){let R=l.get(_.id);R?l.set(_.id,A(j({},R),{cantidad_seleccionada:(R.cantidad_seleccionada??0)+(_.cantidad_seleccionada??0)})):l.set(_.id,_)}let m=Array.from(l.values()),v=A(j({},e),{detalles:m});this._estadoResumen.set(v),this.limpiarDetallesSeleccionados()}confirmarAgregarDetallesLocalEnExistente(){return D(this,null,function*(){let e=this._miReserva();if(!e)return;let a=e.detalles||[],n=this._detallesSeleccionados(),l=new Map;for(let _ of a)l.set(_.id,_);for(let _ of n){let R=l.get(_.id);R?l.set(_.id,A(j({},R),{cantidad_seleccionada:(R.cantidad_seleccionada??0)+(_.cantidad_seleccionada??0)})):l.set(_.id,_)}let m=Array.from(l.values()),v=A(j({},e),{detalles:m});this._miReserva.set(v),this.limpiarDetallesSeleccionados(),yield new Promise(_=>setTimeout(_,100)),this._requiere_reconfirmacion.set(!0)})}confirmarAgregarJugadoresLocal(){let e=this._estadoResumen();if(!e)return;let a=e.jugadores||[],n=this._jugadoresSeleccionados(),l=[...a,...n.filter(v=>!a.some(_=>_.id===v.id))],m=A(j({},e),{jugadores:l,total_jugadores:l.length});this._estadoResumen.set(m),this._jugadoresSeleccionados.set([])}confirmarAgregarJugadoresLocalEnExistente(){let e=this._miReserva();if(!e)return;let a=e.jugadores||[],n=this._jugadoresSeleccionados(),l=[...a,...n.filter(v=>!a.some(_=>_.id===v.id))],m=A(j({},e),{jugadores:l,total_jugadores:l.length});this._miReserva.set(m),this._jugadoresSeleccionados.set([]),this._requiere_reconfirmacion.set(!0)}confirmarReservaFinal(){return D(this,null,function*(){let e=this.estadoResumen()||this.miReserva();if(e.id&&!this._requiere_reconfirmacion())return e.id;let a=yield Je(this.http,A(j({},e),{id_espacio:this._idEspacio()}));return a.data&&(this._estadoResumen.set(null),this.setMostrarResumenExistente(a.data),this._requiere_reconfirmacion.set(!1)),a})}puedeAgregarMasJugadores(){let e=this._estadoResumen()||this._miReserva();if(!e||!e.puede_agregar_jugadores)return!1;let a=e.total_jugadores||0,n=this._jugadoresSeleccionados().length,l=a+n,m=Math.max(0,(e.maximo_jugadores||0)-1);return l<m}puedeSeleccionarJugador(e){let a=this._estadoResumen()||this._miReserva();if(!a||e&&this._jugadoresSeleccionados().some(_=>_.id===e)||e&&(a.jugadores||[]).some(_=>_.id===e))return!1;let n=a.total_jugadores||0,l=this._jugadoresSeleccionados().length,m=n+l,v=Math.max(0,(a.maximo_jugadores||0)-1);return m+1<=v}obtenerLimiteJugadores(){let e=this._estadoResumen()||this._miReserva();if(!e)return{actual:0,minimo:0,maximo:0,totalFinal:0};let a=e.total_jugadores||0,n=this._jugadoresSeleccionados().length,l=a+n,m=Math.max(0,(e.minimo_jugadores||0)-1),v=Math.max(0,(e.maximo_jugadores||0)-1);return{actual:a,minimo:m,maximo:v,totalFinal:l}}validarAgregarJugadores(){if(!(this._estadoResumen()||this._miReserva()))return{esValido:!1,mensaje:"No se encontr\xF3 informaci\xF3n de la reserva"};if(this._jugadoresSeleccionados().length===0)return{esValido:!1,mensaje:"Debe seleccionar al menos un jugador"};let n=this.obtenerLimiteJugadores();return n.totalFinal>n.maximo?{esValido:!1,mensaje:`Solo puedes agregar ${n.maximo-n.actual} jugador(es) m\xE1s. M\xE1ximo permitido: ${n.maximo}`}:{esValido:!0,mensaje:""}}agregarJugadores(e){return D(this,null,function*(){let a=this._jugadoresSeleccionados().map(n=>n.id);return Ne(this.http,e,a)})}pagarMensualidad(){return D(this,null,function*(){let e=this.espacioDetallesQuery.data();if(e)return $e(this.http,e.id);throw new Error("No se encontr\xF3 informaci\xF3n del espacio")})}};o.\u0275fac=function(a){return new(a||o)},o.\u0275prov=oe({token:o,factory:o.\u0275fac,providedIn:"root"});let i=o;return i})();function He(i,o){let t=B(i,o?.in),e=t.getFullYear(),a=t.getMonth(),n=q(t,0);return n.setFullYear(e,a+1,0),n.setHours(0,0,0,0),n.getDate()}function Ke(i,o,t){return Te(i,-o,t)}function Xe(i,o,t){let e=B(i,t?.in),a=e.getFullYear(),n=e.getDate(),l=q(t?.in||i,0);l.setFullYear(a,o,15),l.setHours(0,0,0,0);let m=He(l);return e.setMonth(o,Math.min(n,m)),e}function We(i,o,t){let e=B(i,t?.in);return isNaN(+e)?q(t?.in||i,NaN):(o.year!=null&&e.setFullYear(o.year),o.month!=null&&(e=Xe(e,o.month)),o.date!=null&&e.setDate(o.date),o.hours!=null&&e.setHours(o.hours),o.minutes!=null&&e.setMinutes(o.minutes),o.seconds!=null&&e.setSeconds(o.seconds),o.milliseconds!=null&&e.setMilliseconds(o.milliseconds),e)}function ie(i){if(!i)return null;if(i instanceof Date)return L(i)?i:null;if(/^\d{4}-\d{2}-\d{2}$/.test(i)){let e=U(i+"T12:00:00","yyyy-MM-dd'T'HH:mm:ss",new Date);return L(e)?e:null}let o=Ie(i);if(L(o))return o;let t=new Date(i);return L(t)?t:null}var tt=["dreservasModal"],it=["alertaModalReservas"],at=(i,o)=>({"alert-success":i,"alert-info":o}),nt=(i,o)=>({"bg-purple-100":i,"bg-base-300/70":o}),ot=()=>[1,2,3,4,5,6,7,8],rt=i=>({"h-[13rem] rounded-lg bg-gray-800 flex items-center justify-center":i}),st=i=>({"hover:opacity-90 hover:scale-101 transition-all duration-200":i}),ae=(i,o)=>o.id;function lt(i,o){i&1&&f(0,"span",5)}function dt(i,o){if(i&1&&(r(0,"span",6),c(1),s()),i&2){let t=u();d(),y(" ",t.espacioDetallesQuery==null?null:t.espacioDetallesQuery.nombre," ")}}function ct(i,o){if(i&1&&(r(0,"div",9),f(1,"span",18),r(2,"span",19),c(3),s()()),i&2){let t=u();d(3),P(t.dreservasService.mensajeCargando())}}function ut(i,o){i&1&&c(0," \xA1Reserva completada! ")}function mt(i,o){i&1&&c(0," Resumen de reserva ")}function _t(i,o){if(i&1&&(r(0,"div",20)(1,"div",25),f(2,"app-web-icon",26),r(3,"span",27),h(4,ut,1,0)(5,mt,1,0),s()()()),i&2){let t,e,a=u(2);d(2),C("nombreIcono",((t=a.estadoResumen())==null?null:t.estado)==="pagada"?"checkmark-circle-outline":"information-circle-outline"),d(2),g(((e=a.estadoResumen())==null?null:e.estado)==="pagada"?4:5)}}function vt(i,o){if(i&1&&(r(0,"div",21)(1,"div",25),f(2,"app-web-icon",26),r(3,"span",27),c(4),s()()()),i&2){let t,e,a,n=u(2);C("ngClass",Z(3,at,((t=n.miReserva())==null?null:t.estado)==="pagada",((t=n.miReserva())==null?null:t.estado)!=="pagada")),d(2),C("nombreIcono",((e=n.miReserva())==null?null:e.estado)==="pagada"?"checkmark-circle-outline":"information-circle-outline"),d(2),y(" ",`${((a=n.miReserva())==null?null:a.estado)==="pagada"?"\xA1Reserva completada!":"Resumen de reserva"}`," ")}}function pt(i,o){i&1&&(r(0,"div",20)(1,"div",25),f(2,"app-web-icon",28),r(3,"span",27),c(4,"Agregar Jugadores"),s()()())}function ht(i,o){i&1&&(r(0,"div",20)(1,"div",25),f(2,"app-web-icon",29),r(3,"span",27),c(4,"Agregar Elementos"),s()()())}function gt(i,o){i&1&&(r(0,"div",31)(1,"div",32),f(2,"app-web-icon",33),r(3,"span"),c(4," Tu reserva est\xE1 "),r(5,"strong"),c(6,"pendiente de aprobaci\xF3n"),s(),c(7,", se har\xE1 v\xE1lida tan pronto sea aprobada por un administrador. "),s()()())}function ft(i,o){if(i&1&&(r(0,"div",23),f(1,"dreservas-info-reserva",30),h(2,gt,8,0,"div",31),s()),i&2){let t,e=u(2);d(),C("resumen",e.estadoResumen()),d(),g((t=e.estadoResumen())!=null&&t.necesita_aprobacion&&((t=e.estadoResumen())==null?null:t.id)!==null&&((t=e.estadoResumen())==null?null:t.estado)==="pendienteap"?2:-1)}}function Ct(i,o){i&1&&(r(0,"div",34)(1,"div",32),f(2,"app-web-icon",35),r(3,"span"),c(4," Tienes "),r(5,"strong"),c(6,"30 minutos"),s(),c(7," para realizar el pago; de lo contrario, la reserva se "),r(8,"strong"),c(9,"cancelar\xE1 autom\xE1ticamente"),s(),c(10,". "),s()()())}function xt(i,o){i&1&&(r(0,"div",31)(1,"div",32),f(2,"app-web-icon",33),r(3,"span"),c(4," Tu reserva est\xE1 "),r(5,"strong"),c(6,"pendiente de aprobaci\xF3n"),s(),c(7,", se har\xE1 v\xE1lida tan pronto sea aprobada por un administrador. "),s()()())}function St(i,o){if(i&1&&(r(0,"div",23),f(1,"dreservas-info-reserva",30),h(2,Ct,11,0,"div",34),h(3,xt,8,0,"div",31),s()),i&2){let t,e,a=u(2);d(),C("resumen",a.miReserva()),d(),g(a.necesitaPago()&&((t=a.estadoResumen())==null?null:t.estado)!=="completada"?2:-1),d(),g((e=a.miReserva())!=null&&e.necesita_aprobacion&&a.miReserva().estado==="pendienteap"?3:-1)}}function bt(i,o){i&1&&(r(0,"div",36)(1,"div",25)(2,"span"),c(3),s()()()),i&2&&(d(3),P(o))}function yt(i,o){i&1&&(r(0,"div",47),f(1,"span",48),r(2,"span",49),c(3,"Buscando participantes..."),s()())}function Et(i,o){i&1&&(r(0,"div",50),c(1," No se encontraron participantes con ese criterio de b\xFAsqueda. "),s())}function Mt(i,o){i&1&&(r(0,"span",57),c(1," - Beneficiario"),s())}function Rt(i,o){if(i&1&&(r(0,"strong"),c(1,"Banner: "),s(),c(2)),i&2){let t=u().$implicit;d(2),y("",t.ldap_uid," ")}}function Dt(i,o){i&1&&c(0," Agregado ")}function wt(i,o){i&1&&c(0," L\xEDmite alcanzado ")}function jt(i,o){i&1&&c(0," Agregar ")}function At(i,o){if(i&1){let t=w();r(0,"div",53)(1,"div",54)(2,"div",55)(3,"span",56),c(4),h(5,Mt,2,0,"span",57),s(),r(6,"span",58),c(7),s(),r(8,"span",58)(9,"strong"),c(10),s(),c(11),h(12,Rt,3,1),s()(),r(13,"button",59),b("click",function(){let a=x(t).$implicit,n=u(6);return S(n.agregarJugador(a))}),h(14,Dt,1,0)(15,wt,1,0)(16,jt,1,0),s()()()}if(i&2){let t=o.$implicit,e=u(6);C("ngClass",Z(10,nt,t.es_beneficiario,!t.es_beneficiario)),d(4),$(" ",t.nombre," ",t.apellido," "),d(),g(t.es_beneficiario?5:-1),d(2),P(t.email),d(3),y("",t.codigo_tipo_documento,":"),d(),y(" ",t.documento," "),d(),g(t.ldap_uid?12:-1),d(),C("disabled",!e.puedeSeleccionarJugadorEspecifico(t.id)),d(),g(e.esJugadorSeleccionado(t.id)||e.yaEstaEnReserva(t.id)?14:e.puedeSeleccionarJugador()?16:15)}}function Tt(i,o){if(i&1&&(r(0,"div",51)(1,"h4",52),c(2," Participantes encontrados: "),s(),N(3,At,17,13,"div",53,ae),s()),i&2){let t=u(5);d(3),Q(t.dreservasService.jugadoresQuery.data())}}function Pt(i,o){if(i&1&&h(0,Et,2,0,"div",50)(1,Tt,5,0,"div",51),i&2){let t=u(4);g(t.dreservasService.jugadoresQuery.data().length===0?0:1)}}function It(i,o){if(i&1&&(r(0,"div",41),h(1,yt,4,0,"div",47)(2,Pt,2,1),s()),i&2){let t=u(3);d(),g(t.dreservasService.jugadoresQuery.isPending()?1:t.dreservasService.jugadoresQuery.data()?2:-1)}}function kt(i,o){i&1&&(r(0,"span",57),c(1," - Beneficiario"),s())}function Vt(i,o){if(i&1){let t=w();r(0,"button",63),b("click",function(){x(t);let a=u().$implicit,n=u(4);return S(n.removerJugador(a.id))}),f(1,"app-web-icon",64),s()}}function Nt(i,o){if(i&1&&(r(0,"div",61)(1,"div",55)(2,"span",56),c(3),h(4,kt,2,0,"span",57),s(),r(5,"span",58),c(6),s()(),h(7,Vt,2,0,"button",62),s()),i&2){let t=o.$implicit,e=u(4);d(3),$(" ",t.nombre," ",t.apellido," "),d(),g(t.es_beneficiario?4:-1),d(2),P(t.email),d(),g(t.id!==e.userIdActual()?7:-1)}}function Qt(i,o){if(i&1&&(r(0,"div",42)(1,"h4",52),c(2),s(),r(3,"div",60),N(4,Nt,8,5,"div",61,ae),s()()),i&2){let t=u(3);d(2),y(" Participantes seleccionados (",t.listaJugadoresSeleccionados().length,"): "),d(2),Q(t.listaJugadoresSeleccionados())}}function Jt(i,o){i&1&&f(0,"span",46)}function Ft(i,o){i&1&&c(0," Selecciona jugadores ")}function qt(i,o){if(i&1&&c(0),i&2){let t=u(3);y(" Confirmar (",t.dreservasService.jugadoresSeleccionados().length,") ")}}function Bt(i,o){if(i&1){let t=w();r(0,"div",24),h(1,bt,4,1,"div",36),r(2,"div",37)(3,"label",38)(4,"span",39),c(5,"Buscar participantes:"),s()(),r(6,"input",40),b("input",function(a){x(t);let n=u(2);return S(n.onBuscarJugadores(a))}),s()(),h(7,It,3,1,"div",41),h(8,Qt,6,1,"div",42),r(9,"div",43)(10,"button",44),b("click",function(){x(t);let a=u(2);return S(a.cancelarAgregarJugadores())}),c(11," Cancelar "),s(),r(12,"button",45),b("click",function(){x(t);let a=u(2);return S(a.confirmarAgregarJugadores())}),h(13,Jt,1,0,"span",46),h(14,Ft,1,0)(15,qt,1,1),s()()()}if(i&2){let t,e=u(2);d(),g((t=e.mensajeEstado())?1:-1,t),d(5),C("value",e.dreservasService.terminoBusquedaJugadores()),d(),g(e.dreservasService.terminoBusquedaJugadores().trim().length>0?7:-1),d(),g(e.listaJugadoresSeleccionados().length>0?8:-1),d(4),C("disabled",e.cargando()||e.dreservasService.jugadoresSeleccionados().length===0),d(),g(e.cargando()?13:-1),d(),g(e.dreservasService.jugadoresSeleccionados().length===0?14:15)}}function Ot(i,o){i&1&&(r(0,"div",47),f(1,"span",48),r(2,"span",49),c(3,"Buscando elementos..."),s()())}function Gt(i,o){i&1&&(r(0,"div",66),c(1," No se encontraron elementos con ese criterio. "),s())}function $t(i,o){if(i&1){let t=w();r(0,"div",68)(1,"div",69)(2,"div",55)(3,"span",56),c(4),s(),r(5,"span",70),c(6),I(7,"number"),s()(),r(8,"div",71)(9,"label",72),c(10,"Cantidad"),s(),r(11,"input",73),b("input",function(a){let n=x(t).$implicit,l=u(6);return S(l.onCantidadInput(n.id,a))}),s(),r(12,"button",74),b("click",function(){let a=x(t).$implicit,n=u(6);return S(n.agregarElemento(a))}),c(13," Agregar "),s()()()()}if(i&2){let t=o.$implicit,e=u(6);d(4),P(t.nombre),d(2),y("$ ",J(7,3,e.getPrecioUnitario(t),"1.0-0")," (x unidad)"),d(5),C("value",e.cantidadPorAgregar[t.id]||1)}}function Lt(i,o){if(i&1&&(r(0,"div",51)(1,"h4",67),c(2,"Resultados:"),s(),N(3,$t,14,6,"div",68,ae),s()),i&2){let t=u(5);d(3),Q(t.dreservasService.elementosQuery.data())}}function Ut(i,o){if(i&1&&h(0,Gt,2,0,"div",66)(1,Lt,5,0,"div",51),i&2){let t=u(4);g(t.dreservasService.elementosQuery.data().length===0?0:1)}}function zt(i,o){if(i&1&&(r(0,"div",41),h(1,Ot,4,0,"div",47)(2,Ut,2,1),s()),i&2){let t=u(3);d(),g(t.dreservasService.elementosQuery.isPending()?1:t.dreservasService.elementosQuery.data()?2:-1)}}function Yt(i,o){if(i&1){let t=w();r(0,"div",75)(1,"div",76)(2,"span",77),c(3),s(),r(4,"span",70),c(5),s()(),r(6,"div",78)(7,"span",79),c(8),I(9,"number"),s(),r(10,"button",63),b("click",function(){let a=x(t),n=a.$implicit,l=a.$index,m=u(4);return S(m.removerElementoSeleccionado(n,l))}),f(11,"app-web-icon",64),s()()()}if(i&2){let t=o.$implicit,e=u(4);d(3),P(t.nombre),d(2),y("Cant: ",t.cantidad_seleccionada||1),d(3),y("$ ",J(9,3,e.getPrecioUnitario(t)*(t.cantidad_seleccionada||1),"1.0-0")," ")}}function Ht(i,o){if(i&1&&(r(0,"div",42)(1,"h4",52),c(2),s(),r(3,"div",60),N(4,Yt,12,6,"div",75,K),s()()),i&2){let t=u(3);d(2),y(" Elementos agregados (",t.dreservasService.detallesSeleccionados().length,"): "),d(2),Q(t.dreservasService.detallesSeleccionados())}}function Kt(i,o){i&1&&f(0,"span",46)}function Xt(i,o){i&1&&c(0," Confirmar ")}function Wt(i,o){if(i&1){let t=w();r(0,"div",24)(1,"div",37)(2,"label",38)(3,"span",39),c(4,"Buscar elementos:"),s()(),r(5,"input",65),b("input",function(a){x(t);let n=u(2);return S(n.onBuscarElementos(a))}),s()(),h(6,zt,3,1,"div",41),h(7,Ht,6,1,"div",42),r(8,"div",43)(9,"button",44),b("click",function(){x(t);let a=u(2);return S(a.cancelarAgregarDetalles())}),c(10," Cancelar "),s(),r(11,"button",45),b("click",function(){x(t);let a=u(2);return S(a.confirmarAgregarDetalles())}),h(12,Kt,1,0,"span",46)(13,Xt,1,0),s()()()}if(i&2){let t=u(2);d(5),C("value",t.dreservasService.terminoBusquedaElementos()),d(),g(t.dreservasService.terminoBusquedaElementos().trim().length>0?6:-1),d(),g(t.dreservasService.detallesSeleccionados().length>0?7:-1),d(4),C("disabled",t.cargando()||t.dreservasService.detallesSeleccionados().length===0),d(),g(t.cargando()?12:13)}}function Zt(i,o){i&1&&(de(0),f(1,"div",101),ce())}function ei(i,o){i&1&&(r(0,"div",80)(1,"div",82)(2,"div",83),f(3,"div",84),s(),r(4,"div",85)(5,"div",71),f(6,"div",86)(7,"div",87),s(),f(8,"div",88)(9,"div",89),s()(),r(10,"div",90),f(11,"div",91),r(12,"div",92)(13,"div",93),H(14,Zt,2,0,"ng-container",94),s()()(),r(15,"div",90),f(16,"div",95),r(17,"div",96),f(18,"div",97)(19,"div",98)(20,"div",99)(21,"div",100),s()()()),i&2&&(d(14),C("ngForOf",_e(1,ot)))}function ti(i,o){i&1&&f(0,"app-web-icon",103),i&2&&C("estilos","w-30 h-30 text-white/80")}function ii(i,o){if(i&1&&f(0,"img",104),i&2){let t=u(4);C("src",t.getImagenUrl(t.espacioDetallesQuery==null||t.espacioDetallesQuery.imagen==null?null:t.espacioDetallesQuery.imagen.ubicacion),se)}}function ai(i,o){i&1&&(r(0,"span",113),c(1," No tienes una mensualidad activa para este espacio. "),s())}function ni(i,o){if(i&1&&(r(0,"span",114),c(1),s()),i&2){let t=u(4);d(),y(" ",t.esEstudiante()?"Estudiante":"Usuario"," habilitado para reservar. ")}}function oi(i,o){if(i&1&&(c(0),I(1,"currency")),i&2){let t=u(5);y(" Pagar mensualidad: ",pe(1,1,t.espacioDetallesQuery==null?null:t.espacioDetallesQuery.valor_mensualidad,"$","symbol","1.0-0")," ")}}function ri(i,o){i&1&&(f(0,"span",122),c(1," Redirigiendo... "))}function si(i,o){if(i&1){let t=w();r(0,"button",121),b("click",function(){x(t);let a=u(4);return S(a.pagarMensualidad())}),h(1,oi,2,6)(2,ri,2,0),s()}if(i&2){let t=u(4);C("disabled",t.pagandoMensualidad()),d(),g(t.pagandoMensualidad()?2:1)}}function li(i,o){if(i&1&&(r(0,"span",114),c(1),I(2,"date"),I(3,"date"),s()),i&2){let t=u(4);d(),$(" Mensualidad activa desde ",J(2,2,t.espacioDetallesQuery==null||t.espacioDetallesQuery.mensualidad==null?null:t.espacioDetallesQuery.mensualidad.fecha_inicio,"dd/MM/yyyy")," hasta ",J(3,5,t.espacioDetallesQuery==null||t.espacioDetallesQuery.mensualidad==null?null:t.espacioDetallesQuery.mensualidad.fecha_fin,"dd/MM/yyyy")," ")}}function di(i,o){if(i&1&&(r(0,"div",124),c(1),s()),i&2){let t=u().$implicit;d(),y(" ",t.novedad_desc," ")}}function ci(i,o){if(i&1&&(r(0,"span",125),c(1),s()),i&2){let t=u().$implicit;d(),P(t.hora_inicio)}}function ui(i,o){if(i&1&&(r(0,"span",126),c(1),s()),i&2){let t=u().$implicit;d(),y(" ",`${t.hora_inicio} - Reservado`," ")}}function mi(i,o){i&1&&(r(0,"span",127),c(1),s()),i&2&&(d(),P("Mi reserva"))}function _i(i,o){if(i&1&&(r(0,"span",127),c(1),s()),i&2){let t=u().$implicit;d(),$(" ",t.hora_inicio," - ",t.novedad_desc&&t.novedad_desc.length>10?t.novedad_desc.slice(0,8)+"...":t.novedad_desc," ")}}function vi(i,o){if(i&1&&(r(0,"span",125),c(1),s()),i&2){let t=u().$implicit;d(),y(" ",t.hora_inicio," ")}}function pi(i,o){if(i&1){let t=w();r(0,"button",123),b("click",function(){let a=x(t).$implicit,n=u(4);return S(a.mi_reserva?n.verMiReserva(a.id_reserva):a.disponible?n.iniciarReserva(n.espacioDetallesQuery,a):null)}),h(1,di,2,1,"div",124),h(2,ci,2,1,"span",125)(3,ui,2,1,"span",126)(4,mi,2,1,"span",127)(5,_i,2,2,"span",127)(6,vi,2,1,"span",125),s()}if(i&2){let t=o.$implicit;me("btn-disabled",t.reserva_pasada&&!t.mi_reserva&&!t.novedad&&!t.reservada)("btn-accent",t.disponible)("btn-success",t.mi_reserva)("btn-error",!t.mi_reserva&&t.reservada)("btn-warning",t.novedad&&!t.mi_reserva)("tooltip",t.novedad_desc&&t.novedad_desc.length>10)("pointer-events-none",!t.disponible&&t.reserva_pasada&&!t.mi_reserva),C("disabled",t.reserva_pasada&&!t.mi_reserva&&!t.novedad&&!t.reservada)("ngClass",W(18,st,t.disponible)),d(),g(t.novedad_desc&&t.novedad_desc.length>10?1:-1),d(),g(t.disponible&&!t.reservada&&!t.mi_reserva?2:t.reservada&&!t.mi_reserva?3:t.mi_reserva?4:!t.reservada&&t.novedad?5:6)}}function hi(i,o){if(i&1&&(r(0,"div",81)(1,"div",82)(2,"div",102),h(3,ti,1,1,"app-web-icon",103)(4,ii,1,1,"img",104),s(),r(5,"div",105)(6,"div",106),f(7,"app-web-icon",107),r(8,"span",108),c(9),I(10,"uppercase"),s()(),r(11,"span",109)(12,"span",56),c(13,"Disponible para reservar desde: "),s(),c(14),s(),r(15,"span",110)(16,"span",111),c(17,"Fecha de reserva: "),s(),r(18,"span",112),c(19),I(20,"date"),s()(),h(21,ai,2,0,"span",113),h(22,ni,2,1,"span",114),h(23,si,3,2,"button",115),h(24,li,4,8,"span",114),s()(),r(25,"div",116)(26,"span",117),c(27," Disponibilidad: "),s(),r(28,"div",41)(29,"div",93),N(30,pi,7,20,"button",118,K),s()()(),r(32,"div",116)(33,"span",117),c(34," Notas importantes: "),s(),r(35,"div",119),f(36,"quill-view-html",120),s()()()),i&2){let t=u(3);d(2),C("ngClass",W(15,rt,!t.getImagenUrl(t.espacioDetallesQuery==null||t.espacioDetallesQuery.imagen==null?null:t.espacioDetallesQuery.imagen.ubicacion))),d(),g(t.getImagenUrl(t.espacioDetallesQuery==null||t.espacioDetallesQuery.imagen==null?null:t.espacioDetallesQuery.imagen.ubicacion)?4:3),d(6),y(" Sede: ",ve(10,10,t.espacioDetallesQuery==null||t.espacioDetallesQuery.sede==null?null:t.espacioDetallesQuery.sede.nombre)," "),d(5),y(" ",t.obtenerFechaDeApertura(t.espacioDetallesQuery==null?null:t.espacioDetallesQuery.configuracion,t.espacioDetallesQuery==null?null:t.espacioDetallesQuery.tipo_usuario_config)," "),d(5),y(" ",J(20,12,t.dreservasService.fecha(),"dd/MM/yyyy")," "),d(2),g(t.espacioDetallesQuery!=null&&t.espacioDetallesQuery.pago_mensual&&!(t.espacioDetallesQuery!=null&&t.espacioDetallesQuery.usuario_mensualidad_activa)?21:-1),d(),g(t.espacioDetallesQuery!=null&&t.espacioDetallesQuery.usuario_mensualidad_activa&&(t.espacioDetallesQuery!=null&&t.espacioDetallesQuery.pago_mensual)?22:-1),d(),g(t.espacioDetallesQuery!=null&&t.espacioDetallesQuery.pago_mensual&&!(t.espacioDetallesQuery!=null&&t.espacioDetallesQuery.usuario_mensualidad_activa)?23:-1),d(),g(t.espacioDetallesQuery!=null&&t.espacioDetallesQuery.usuario_mensualidad_activa&&(t.espacioDetallesQuery!=null&&t.espacioDetallesQuery.mensualidad)?24:-1),d(6),Q(t.espacioDetallesQuery==null?null:t.espacioDetallesQuery.disponibilidad),d(6),C("content",(t.espacioDetallesQuery==null?null:t.espacioDetallesQuery.descripcion)||"")}}function gi(i,o){if(i&1&&h(0,ei,22,2,"div",80)(1,hi,37,17,"div",81),i&2){let t=u(2);g(t.dreservasService.espacioDetallesQuery.isPending()?0:1)}}function fi(i,o){if(i&1&&(r(0,"div",10),h(1,_t,6,2,"div",20)(2,vt,5,6,"div",21)(3,pt,5,0,"div",20)(4,ht,5,0,"div",20),r(5,"div",22),h(6,ft,3,2,"div",23)(7,St,4,3,"div",23)(8,Bt,16,7,"div",24)(9,Wt,14,5,"div",24)(10,gi,2,1),s()()),i&2){let t=u();d(),g(t.dreservasService.mostrandoResumenNueva()?1:t.dreservasService.mostrandoResumenExistente()?2:t.dreservasService.mostrandoJugadores()?3:t.dreservasService.mostrandoDetalles()?4:-1),d(5),g(t.dreservasService.mostrandoResumenNueva()?6:t.dreservasService.mostrandoResumenExistente()?7:t.dreservasService.mostrandoJugadores()?8:t.dreservasService.mostrandoDetalles()?9:10)}}function Ci(i,o){}function xi(i,o){if(i&1){let t=w();r(0,"button",128),b("click",function(){x(t);let a=u();return S(a.cancelarReserva())}),f(1,"app-web-icon",129),c(2," Cancelar reserva "),s()}if(i&2){let t=u();C("disabled",t.cargando())}}function Si(i,o){if(i&1){let t=w();r(0,"button",130),b("click",function(){x(t);let a=u();return S(a.mostrarAgregarJugadores())}),f(1,"app-web-icon",131),c(2," Participantes "),s()}if(i&2){let t=u();C("disabled",t.cargando())}}function bi(i,o){if(i&1){let t=w();r(0,"button",132),b("click",function(){x(t);let a=u();return S(a.mostrarAgregarDetalles())}),f(1,"app-web-icon",133),c(2," Elementos "),s()}if(i&2){let t=u();C("disabled",t.cargando())}}function yi(i,o){if(i&1){let t=w();r(0,"button",45),b("click",function(){x(t);let a=u(2);return S(a.confirmarReservaFinal())}),f(1,"app-web-icon",137),c(2," Confirmar "),s()}if(i&2){let t=u(2);C("disabled",t.confirmarReservaDisabled())}}function Ei(i,o){if(i&1){let t=w();r(0,"button",138),b("click",function(){x(t);let a=u(2);return S(a.confirmadaConCambiosPendientes()?a.confirmarYPagarConSaldo():a.yaConfirmadaSinPago()?a.procesarPagoConSaldo():a.confirmarYPagarConSaldo())}),f(1,"app-web-icon",139),c(2),s()}if(i&2){let t=u(2);C("disabled",t.cargando()||t.confirmarReservaDisabled()),d(2),y(" ",t.confirmadaConCambiosPendientes()?"Confirmar y pagar con cr\xE9ditos":t.yaConfirmadaSinPago()?"Pagar con cr\xE9ditos":"Confirmar y pagar con cr\xE9ditos"," ")}}function Mi(i,o){if(i&1){let t=w();r(0,"button",140),b("click",function(){x(t);let a=u(2);return S(a.confirmadaConCambiosPendientes()?a.confirmarYPagar():a.yaConfirmadaSinPago()?a.procesarPago():a.confirmarYPagar())}),f(1,"app-web-icon",137),c(2),s()}if(i&2){let t=u(2);C("disabled",t.cargando()||t.confirmarReservaDisabled()),d(2),y(" ",t.confirmadaConCambiosPendientes()?"Confirmar y pagar":t.yaConfirmadaSinPago()?"Pagar":"Confirmar y pagar"," ")}}function Ri(i,o){if(i&1&&(r(0,"div",17),h(1,yi,3,1,"button",134),h(2,Ei,3,2,"button",135)(3,Mi,3,2,"button",136),s()),i&2){let t=u();d(),g(!t.necesitaPago()&&!t.esReservaPasada()&&t.noConfirmada()?1:-1),d(),g(t.necesitaPago()&&t.puedePagarConSaldo()?2:t.necesitaPago()?3:-1)}}var va=(()=>{let o=class o{constructor(){this.injector=T(re),this.appService=T(we),this.authService=T(De),this.alertaService=T(Ae),this.cdr=T(fe),this.estilosAlerta="flex justify-center transition-all mx-auto ease-in-out w-[80%] text-lg",this.dreservasService=T(Ye),this.pagandoMensualidad=M(!1),this.dreservasModal=ee("dreservasModal"),this.alertaModalReservas=ee.required("alertaModalReservas",{read:Y}),this.cargando=p(()=>this.dreservasService.cargando()),this.permiteElementoDespuesReservado=p(()=>this.getEstadoActual()?.id?te.elementosPostReserva:!0),this.esEstudiante=p(()=>this.authService.usuario()?.tipo_usuario.includes(G.Estudiante)),this.estadoResumen=p(()=>{let e=this.dreservasService.estadoResumen(),a=this.appService.creditosQuery.data()??0;if(!e||!e.fecha)return e;let{fecha:n,es_pasada:l,estado:m,valor_descuento:v,necesita_aprobacion:_,reserva_aprovada:R}=e,k=this.authService.usuario(),V=!l&&(v??0)>0&&(!_||R),z=e?.valor_total_reserva??v??0,Ze=V&&(a??0)>=(z??0),ne=ie(n);return A(j({},e),{fecha:ne?O(ne,"eeee, d 'de' MMMM 'de' yyyy"):n,pagar_con_saldo:Ze})}),this.miReserva=p(()=>{let e=this.dreservasService.miReserva(),a=this.appService.creditosQuery.data()??0;if(e&&e.fecha){let n=this.authService.usuario(),l=!e.es_pasada&&(e.valor_descuento??0)>0&&(!e.necesita_aprobacion||e.reserva_aprovada),m=e?.valor_total_reserva??(e.valor_descuento||0),v=l&&n?a>=(m??0):!1,_=ie(e.fecha);return A(j({},e),{fecha:_?O(_,"eeee, d 'de' MMMM 'de' yyyy"):e.fecha,pagar_con_saldo:v})}return e}),this.necesitaPago=p(()=>{let e=this.getEstadoActual();if(!e||this.isEstadoVacio(e)||this.esReservaPasada()||e.necesita_aprobacion||e.estado==="completada"||e.pago&&e.pago.estado==="OK")return!1;let a=Math.max(0,e?.valor_descuento??0);e.cubierta_por_mensualidad&&(a=0);let n=e?.valor_total_reserva??a;return n<=0?!1:this.dreservasService.mostrandoResumenExistente()?!0:!e.pago&&n>0}),this.puedePagarConSaldo=p(()=>{let e=this.getEstadoActual(),a=this.appService.creditosQuery.data()??0,n=e?.valor_total_reserva??0;return e?.estado==="completada"||this.esReservaPasada()||!e||a<=0||n>a?!1:e.pagar_con_saldo}),this.noConfirmada=p(()=>!this.getEstadoActual()?.id),this.noCancelada=p(()=>!this.getEstadoActual()?.estado?.toLowerCase().includes("cancelada")),this.puedeAgregarElementos=p(()=>{let e=this.getEstadoActual();return!e||this.dreservasService.mostrandoDisponibilidad()||this.dreservasService.mostrandoDetalles()||this.dreservasService.mostrandoJugadores()||!this.permiteElementoDespuesReservado()||!this.noCancelada()||this.esReservaPasada()?!1:e.puede_agregar_elementos}),this.yaConfirmadaSinPago=p(()=>{let e=this.getEstadoActual();if(!e)return!1;let a=e.id,n=!0,l=e.pago;return l?("codigo"in l&&"estado"in l&&(n=l.estado!=="OK"),a&&n):(n=!0,a&&n)}),this.confirmadaConCambiosPendientes=p(()=>(this.dreservasService.requiereReconfirmacion(),this.yaConfirmadaSinPago()&&this.dreservasService.requiereReconfirmacion())),this.pudeCancelar=p(()=>{let e=this.getEstadoActual();return this.esReservaPasada()?!1:e?.puede_cancelar}),this.esReservaPasada=p(()=>this.getEstadoActual()?.es_pasada),this.mostrarJugadores=this.dreservasService.mostrarJugadores,this.mostrarDetalles=this.dreservasService.mostrarDetalles,this.terminoBusquedaJugadores=this.dreservasService.terminoBusquedaJugadores,this.jugadoresQuery=this.dreservasService.jugadoresQuery,this.jugadoresSeleccionados=this.dreservasService.jugadoresSeleccionados,this.detallesSeleccionados=this.dreservasService.detallesSeleccionados,this.userIdActual=p(()=>this.authService.usuario()?.id),this.reservanteActual=p(()=>{let e=this.authService.usuario();return e?{id:e.id,nombre:e.nombre,apellido:e.apellido,email:e.email}:null}),this.listaJugadoresSeleccionados=p(()=>{let e=this.dreservasService.jugadoresSeleccionados(),a=this.reservanteActual();return a?[a,...e]:e}),this.cantidadPorAgregar={},this.confirmarReservaDisabled=p(()=>{let e=this.getEstadoActual();if(!e)return!0;if(e.estado==="pendienteap"&&e.id===null)return!1;if(e.puede_agregar_jugadores){let a=Math.max(0,(e.minimo_jugadores||0)-1);return(e.jugadores?.length||0)<a||this.cargando()}return this.cargando()}),this.limitesJugadores=p(()=>this.dreservasService.obtenerLimiteJugadores()),this.puedeAgregarMasJugadores=p(()=>this.dreservasService.puedeAgregarMasJugadores()),this.puedeSeleccionarJugador=p(()=>this.dreservasService.puedeSeleccionarJugador()),this.mensajeEstado=p(()=>{let e=this.limitesJugadores();if(e.maximo===0)return"";let a=e.maximo-e.totalFinal;return a<=0?`\u26A0\uFE0F Ya no puedes agregar m\xE1s jugadores. M\xE1ximo de acompa\xF1antes: ${e.maximo}`:`\u{1F4CA} Jugadores (incluy\xE9ndote): ${e.actual+1}/${e.maximo+1} - Puedes agregar ${a} m\xE1s`})}showError(e,a=5e3){this.alertaService.error(e,a,this.alertaModalReservas(),this.estilosAlerta)}showSuccess(e,a=4e3){this.alertaService.success(e,a,this.alertaModalReservas(),this.estilosAlerta)}getEstadoActual(){return this.dreservasService.estadoResumen()||this.dreservasService.miReserva()}isEstadoVacio(e){return!e||typeof e=="object"&&Object.keys(e).length===0}restoreResumenView(){this.dreservasService.estadoResumen()?this.dreservasService.setMostrarResumenNueva(this.dreservasService.estadoResumen()):this.dreservasService.miReserva()&&this.dreservasService.setMostrarResumenExistente(this.dreservasService.miReserva())}validarDatosReserva(e,a,n){let l=e.puede_agregar_jugadores?Math.max(0,(e?.minimo_jugadores??0)-1):0,m=e.puede_agregar_jugadores?e?.jugadores?.length??0:0;if(!n&&l>0&&m<l||n&&e?.puede_agregar_jugadores&&l>0&&m<l)return`Debes agregar al menos ${l} jugador(es) adem\xE1s del reservante.`;let v=a?.configuracion?.id??0;return!v||v<=0?"Falta la configuraci\xF3n base del espacio.":e?.fecha?e?.hora_inicio?null:"Falta la hora de inicio de la reserva.":"Falta la fecha de la reserva."}confirmarReservaEnServidor(e){return D(this,null,function*(){this.dreservasService.setCargando("Confirmando reserva...");try{let a=yield this.dreservasService.confirmarReservaFinal();return typeof a!="object"||!("data"in a)||!a.data?(this.showError("No se pudo confirmar la reserva."),this.dreservasService.setMostrarResumenNueva(e),!1):(this.showSuccess("Reserva creada exitosamente.",4*1e3),!0)}catch(a){let n=a?.error?.error||"Error al confirmar la reserva.";return this.showError(n),this.dreservasService.setMostrarResumenNueva(e),!1}})}getPrecioUnitario(e){switch(this.authService.usuario()?.tipo_usuario?.[0]){case G.Estudiante:return e.valor_estudiante??0;case G.Egresado:return e.valor_egresado??0;case G.Administrativo:return e.valor_administrativo??0;case G.Externo:default:return e.valor_externo??0}}puedeSeleccionarJugadorEspecifico(e){return this.dreservasService.puedeSeleccionarJugador(e)}ngOnInit(){ge(()=>{let e=this.dreservasModal()?.nativeElement;e&&(this.dreservasService.modalAbierta()?this.abrirModal(e):this.cerrarModal(e))},{injector:this.injector})}onDialogCancel(e){e.preventDefault(),this.manejarCierreModal()}abrirModal(e){e.showModal()}cerrarModal(e){e.close(),this.dreservasService.cerrarModal()}get espacioDetallesQuery(){return this.dreservasService.espacioDetallesQuery.data()}getImagenUrl(e){return e?`${te.apiUrl}${e}`:""}obtenerFechaDeApertura(e,a){try{if(!e)return"No disponible";let n=this.dreservasService.fecha(),l=n?U(n,"yyyy-MM-dd",new Date):new Date,m=Ke(l,e.dias_previos_apertura),[v,_]=e.hora_apertura.split(":").map(V=>parseInt(V,10)),R=a.find(V=>V.tipo_usuario[0]===this.authService.usuario()?.tipo_usuario[0]),k=R?_+R.retraso_reserva:_;return m=We(m,{hours:v,minutes:k,seconds:0,milliseconds:0}),O(m,"dd/MM/yyyy HH:mm a")}catch(n){return console.error("Error al calcular fecha de apertura:",n),"No disponible"}}iniciarReserva(e,a){return D(this,null,function*(){if(!e||a.novedad||!a.disponible||a.reserva_pasada||a.reservada)return;let n=this.dreservasService.fecha(),l=n?Pe(U(n,"yyyy-MM-dd",new Date),"yyyy-MM-dd"):O(new Date,"yyyy-MM-dd");this.dreservasService.setCargando("Configurando reserva..."),yield new Promise(m=>setTimeout(m,1e3)),this.dreservasService.iniciarReserva(e,l,a.hora_inicio,a.hora_fin).then(m=>{if(!m.data){this.showError("Error al iniciar la reserva. Por favor, int\xE9ntelo de nuevo.",5*1e3),this.dreservasService.setMostrarDisponibilidad();return}this.dreservasService.setMostrarResumenNueva(m.data)}).catch(m=>{let v=m.error?.error||"Error al iniciar la reserva. Por favor, int\xE9ntelo de nuevo.";this.showError(v,5*1e3),this.dreservasService.setMostrarDisponibilidad()})})}ejecutarPago(e,a=!1){return D(this,null,function*(){let n=this.getEstadoActual();if(this.isEstadoVacio(n)){this.showError("No se encontr\xF3 informaci\xF3n de reserva.");return}let l=!!this.dreservasService.estadoResumen();if(!a&&!this.dreservasService.requiereReconfirmacion()){if(!n?.id){let z=e==="saldo"?"No se pudo procesar el pago con saldo.":"No se pudo procesar el pago. Por favor, int\xE9ntelo de nuevo.";this.showError(z),this.restoreResumenView();return}let V=this.getEstadoActual()??n;yield this.realizarPago(e,V);return}if(!l&&!this.dreservasService.requiereReconfirmacion()){this.necesitaPago()&&(yield this.realizarPago(e,n));return}let m=this.dreservasService.espacioDetallesQuery.data(),v=e==="normal",_=this.validarDatosReserva(n,m,v);if(_){this.showError(_);return}if(!(yield this.confirmarReservaEnServidor(n))||!this.necesitaPago())return;let k=this.getEstadoActual()??n;yield this.realizarPago(e,k)})}realizarPago(e,a){return D(this,null,function*(){if(e==="normal"){if(this.dreservasService.setProcesandoPago(),!a||!a.id){this.showError("No se pudo procesar el pago. Por favor, int\xE9ntelo de nuevo."),this.restoreResumenView();return}yield new Promise(n=>setTimeout(n,1e3));try{let n=yield this.dreservasService.pagarReserva(a.id);if(!n?.data){this.showError("Error al procesar el pago. Por favor, int\xE9ntelo de nuevo."),this.restoreResumenView();return}this.dreservasService.cerrarModal(),window.location.href=n.data}catch(n){let l=n?.error?.error||"Error al procesar el pago. Por favor, int\xE9ntelo de nuevo.";this.showError(l),this.restoreResumenView()}return}if(this.dreservasService.setProcesandoPago(),!a||!a.id){this.showError("No se pudo procesar el pago con saldo."),this.restoreResumenView();return}yield new Promise(n=>setTimeout(n,1e3));try{yield this.dreservasService.pagarReservaConSaldo(a.id),this.dreservasService.setIdMiReserva(a.id),yield new Promise(n=>setTimeout(n,100));try{let l=(yield this.dreservasService.miReservaQuery.refetch()).data||this.dreservasService.miReserva();l?this.dreservasService.setMostrarResumenExistente(l):this.dreservasService.miReserva()&&this.dreservasService.setMostrarResumenExistente(this.dreservasService.miReserva())}catch{this.dreservasService.miReserva()&&this.dreservasService.setMostrarResumenExistente(this.dreservasService.miReserva())}this.showSuccess("Pago realizado con saldo exitosamente.",4*1e3),this.appService.creditosQuery.refetch()}catch(n){let l=n?.error?.error||"Error al procesar el pago con saldo.";this.showError(l),this.restoreResumenView()}})}procesarPago(){return this.ejecutarPago("normal")}procesarPagoConSaldo(){return this.ejecutarPago("saldo")}verMiReserva(e){return D(this,null,function*(){if(e){this.dreservasService.setCargando("Cargando reserva..."),this.dreservasService.setIdMiReserva(e),yield new Promise(a=>setTimeout(a,100));try{let n=(yield this.dreservasService.miReservaQuery.refetch()).data;n?this.dreservasService.setMostrarResumenExistente(n):(this.showError("No se pudo cargar la reserva.",5*1e3),this.dreservasService.setMostrarDisponibilidad())}catch(a){console.error("Error al obtener mi reserva:",a),this.showError("Error al obtener la reserva. Por favor, int\xE9ntelo de nuevo.",5*1e3),this.dreservasService.setMostrarDisponibilidad()}}})}mostrarAgregarJugadores(){this.dreservasService.setMostrarJugadores()}mostrarAgregarDetalles(){this.dreservasService.setMostrarDetalles()}onBuscarElementos(e){let a=e.target;this.dreservasService.setTerminoBusquedaElementos(a?.value??"")}onCantidadInput(e,a){let n=a.target,l=Math.max(1,parseInt(n?.value||"1",10)||1);this.cantidadPorAgregar[e]=l}agregarElemento(e){if(!e)return;let a=this.cantidadPorAgregar[e.id]||1;this.dreservasService.agregarElemento(e,a)}onBuscarJugadores(e){let a=e.target;this.dreservasService.setTerminoBusquedaJugadores(a.value)}agregarJugador(e){let a=this.userIdActual();if(a&&e.id===a){this.showError("Ya eres parte de la reserva como reservante. No es necesario agregarte.",3*1e3);return}if(!this.puedeSeleccionarJugadorEspecifico(e.id)){if(this.esJugadorSeleccionado(e.id))return;let n=this.limitesJugadores(),l=n.maximo-n.totalFinal;this.showError(`No puedes seleccionar m\xE1s jugadores. L\xEDmite m\xE1ximo alcanzado: ${n.maximo}`,3*1e3);return}this.dreservasService.agregarJugadorSeleccionado(e)}removerJugador(e){this.dreservasService.removerJugadorSeleccionado(e)}esJugadorSeleccionado(e){return this.dreservasService.jugadoresSeleccionados().some(n=>n.id===e)}yaEstaEnReserva(e){return((this.dreservasService.estadoResumen()||this.dreservasService.miReserva())?.jugadores||[]).some(l=>l.id===e)}cancelarAgregarJugadores(){this.dreservasService.estadoResumen()?this.dreservasService.setMostrarResumenNueva(this.dreservasService.estadoResumen()):this.dreservasService.miReserva()&&this.dreservasService.setMostrarResumenExistente(this.dreservasService.miReserva()),this.dreservasService.limpiarJugadoresSeleccionados(),this.dreservasService.setTerminoBusquedaJugadores("")}cancelarAgregarDetalles(){this.dreservasService.estadoResumen()?this.dreservasService.setMostrarResumenNueva(this.dreservasService.estadoResumen()):this.dreservasService.miReserva()&&this.dreservasService.setMostrarResumenExistente(this.dreservasService.miReserva()),this.dreservasService.limpiarDetallesSeleccionados(),this.dreservasService.setTerminoBusquedaElementos(""),this.cantidadPorAgregar={}}confirmarAgregarJugadores(){return D(this,null,function*(){let e=!!this.dreservasService.estadoResumen();if(!(e?this.dreservasService.estadoResumen():this.dreservasService.miReserva())){this.showError("No hay una reserva para agregar jugadores.",5*1e3);return}let n=this.dreservasService.obtenerLimiteJugadores();if(n.totalFinal>n.maximo){let m=n.maximo-n.actual;this.showError(`Solo puedes agregar ${m} jugador(es) m\xE1s. M\xE1ximo permitido: ${n.maximo}`,5*1e3);return}let l=this.dreservasService.jugadoresSeleccionados().length;e?(this.dreservasService.confirmarAgregarJugadoresLocal(),this.dreservasService.setMostrarResumenNueva(this.dreservasService.estadoResumen())):(this.dreservasService.confirmarAgregarJugadoresLocalEnExistente(),this.dreservasService.setMostrarResumenExistente(this.dreservasService.miReserva())),this.dreservasService.setTerminoBusquedaJugadores(""),this.cdr.detectChanges(),setTimeout(()=>{this.alertaService.success(`Se agregaron ${l} jugador(es) localmente.`,4*1e3,this.alertaModalReservas(),this.estilosAlerta)},50)})}confirmarAgregarDetalles(){let e=!!this.dreservasService.estadoResumen();if(!(e?this.dreservasService.estadoResumen():this.dreservasService.miReserva())){this.showError("No hay una reserva para agregar detalles.",5*1e3);return}let n=this.dreservasService.detallesSeleccionados().length;if(n===0){this.showError("Agrega al menos un elemento antes de confirmar.",3*1e3);return}let m=this.dreservasService.detallesSeleccionados().reduce((v,_)=>{let R=this.getPrecioUnitario(_),k=_.cantidad_seleccionada||1;return R>0&&k>0?v+R*k:v},0);if(e){this.dreservasService.confirmarAgregarDetallesLocal();let v=this.dreservasService.estadoResumen(),_=v.valor_descuento||0,R=A(j({},v),{valor:v.valor||0,valor_descuento:v.valor_descuento||0,valor_elementos:(v.valor_elementos||0)+m,valor_total_reserva:_+(v.valor_elementos||0)+m});this.dreservasService.setMostrarResumenNueva(R)}else{this.dreservasService.confirmarAgregarDetallesLocalEnExistente();let v=this.dreservasService.miReserva(),_=A(j({},v),{valor:v.valor||0,valor_descuento:v.valor_descuento||0,valor_elementos:(v.valor_elementos||0)+m,valor_total_reserva:(v.valor_elementos||0)+m});this.dreservasService.setMostrarResumenExistente(_)}this.cdr.detectChanges(),setTimeout(()=>{let v=this.dreservasService.detallesSeleccionados().length||n;this.showSuccess(`Se agregaron ${v} detalle(s) localmente.`,4*1e3)},50),this.cantidadPorAgregar={}}removerElementoSeleccionado(e,a){this.dreservasService.removerElemento(a)}confirmarReservaFinal(){return D(this,null,function*(){if(!!!this.dreservasService.estadoResumen()){this.dreservasService.miReserva()&&this.necesitaPago()&&this.procesarPago();return}let a=this.dreservasService.estadoResumen(),n=this.dreservasService.espacioDetallesQuery.data(),l=this.validarDatosReserva(a,n,a.puede_agregar_jugadores);if(l){this.showError(l);return}yield this.confirmarReservaEnServidor(a)})}confirmarYPagar(){return D(this,null,function*(){return this.ejecutarPago("normal",!0)})}confirmarYPagarConSaldo(){return D(this,null,function*(){return this.ejecutarPago("saldo",!0)})}cancelarReserva(){return D(this,null,function*(){if(!(yield this.alertaService.confirmacion({tipo:"error",titulo:"Cancelar reserva",mensaje:"\xBFDeseas cancelar esta reserva? Esta acci\xF3n no se puede deshacer.",referencia:this.alertaModalReservas(),botones:[{texto:"No, volver",tipo:"cancelar",estilo:"btn-ghost"},{texto:"S\xED, cancelar",tipo:"confirmar"}]})))return;this.dreservasService.setCancelandoReserva();let a=!!this.estadoResumen(),n=this.getEstadoActual();if(!n||!n.id){this.showError("No se pudo cancelar la reserva. Por favor, int\xE9ntelo de nuevo."),a&&this.restoreResumenView();return}yield new Promise(l=>setTimeout(l,500));try{if(!(yield this.dreservasService.cancelarReserva(n.id)).data){this.showError("No se pudo cancelar la reserva."),a?this.dreservasService.setMostrarResumenNueva(this.dreservasService.estadoResumen()||n):this.dreservasService.setMostrarResumenExistente(this.dreservasService.miReserva()||n);return}this.showSuccess("Reserva cancelada exitosamente.",4*1e3),this.appService.creditosQuery.refetch(),this.dreservasService.setMostrarDisponibilidad()}catch(l){let m=l?.error?.error||l?.errors?.error||"Error al cancelar la reserva.";this.showError(m),a?this.dreservasService.setMostrarResumenNueva(this.dreservasService.estadoResumen()||n):this.dreservasService.setMostrarResumenExistente(this.dreservasService.miReserva()||n)}})}pagarMensualidad(){return D(this,null,function*(){if(!this.pagandoMensualidad()){this.pagandoMensualidad.set(!0);try{let a=(yield this.dreservasService.pagarMensualidad())?.data;if(!a){this.showError("No se obtuvo la URL de pago de la mensualidad."),this.pagandoMensualidad.set(!1);return}window.location.assign(a)}catch(e){let a=e?.error?.error||"Error al iniciar el pago de la mensualidad.";this.showError(a),this.pagandoMensualidad.set(!1)}}})}manejarCierreModal(){if(this.dreservasService.abiertaDesdeMisReservas()){this.dreservasService.cerrarModal();return}!this.dreservasService.mostrandoResumenNueva()&&!this.dreservasService.mostrandoResumenExistente()&&!this.dreservasService.mostrandoJugadores()&&!this.dreservasService.mostrandoDetalles()?this.dreservasService.cerrarModal():this.dreservasService.setMostrarDisponibilidad()}};o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=le({type:o,selectors:[["modal-dreservas"]],viewQuery:function(a,n){a&1&&(X(n.dreservasModal,tt,5),X(n.alertaModalReservas,it,5,Y)),a&2&&ue(2)},decls:20,vars:6,consts:[["dreservasModal",""],["alertaModalReservas",""],[1,"modal","p-0","z-50",2,"scrollbar-gutter","unset",3,"cancel"],[1,"modal-box","p-0","max-w-[95dvw]","lg:max-w-[80dvw]","xl:max-w-[50rem]","w-full","max-h-[95dvh]","lg:!max-h-[98dvh]","overflow-hidden","relative","flex","flex-col"],[1,"sticky","top-0","bg-base-100","z-10","border-b","border-base-300","px-2","lg:px-6","py-4","flex-shrink-0","flex","justify-between","items-center"],[1,"mx-auto","skeleton","bg-gray-300","h-7","rounded-xl","block","max-w-[65%]"],[1,"text-2xl","font-bold","block","truncate"],["type","button","aria-label","Cerrar modal",1,"btn","btn-xs","btn-circle","btn-neutral","btn-outline",3,"click"],["nombreIcono","close-outline","estilos","h-5 w-5"],[1,"flex","flex-row","items-center","justify-center","h-full","min-h-[40vh]","p-2","lg:p-4","xl:p-6","flex-grow"],[1,"flex-grow","overflow-hidden","flex","flex-col"],[1,"sticky","bottom-0","pt-2","bg-base-100","border-t","border-base-300","px-2","pb-2","lg:px-4","lg:pb-4","xl:px-6","xl:pb-6","z-10","flex-shrink-0"],[1,"modal-action","!mt-0","flex-wrap"],["type","button",1,"btn","max-sm:btn-sm","btn-ghost","md:h-11","rounded-lg","mr-auto",3,"click"],["type","button",1,"btn","max-sm:btn-sm","btn-error","md:h-11","rounded-lg",3,"disabled"],["type","button",1,"btn","max-sm:btn-sm","btn-accent","md:h-11","rounded-lg",3,"disabled"],["type","button",1,"btn","max-sm:btn-sm","btn-secondary","md:h-11","rounded-lg",3,"disabled"],[1,"flex","gap-2"],[1,"loading","loading-spinner","loading-xl","text-primary"],[1,"ml-2","text-base-content"],[1,"alert","alert-info","rounded-lg","mt-2","mx-2","lg:mx-6","flex-shrink-0"],[1,"alert","rounded-lg","mt-2","mx-2","lg:mx-6","flex-shrink-0",3,"ngClass"],[1,"flex-grow","overflow-y-auto","max-h-full","px-2","lg:px-6","max-sm:py-1","py-2"],[1,"flex","flex-col","h-full"],[1,"flex","flex-col","h-fit"],[1,"flex","items-center","justify-center","w-full"],["estilos","h-6 w-6 mr-2",3,"nombreIcono"],[1,"text-xl","font-bold"],["nombreIcono","people-outline","estilos","h-6 w-6 mr-2"],["nombreIcono","briefcase-outline","estilos","h-6 w-6 mr-2"],[3,"resumen"],[1,"alert","alert-warning","mt-4","rounded-lg","text-sm"],[1,"flex","items-start","gap-2"],["nombreIcono","alert-circle-outline","estilos","h-5 w-5"],[1,"alert","alert-info","mt-4","rounded-lg","text-sm"],["nombreIcono","time-outline","estilos","h-5 w-5"],[1,"alert","alert-warning","mb-4","rounded-lg","text-sm"],[1,"form-control","w-full","max-sm:mb-0.5","mb-2"],[1,"label"],[1,"label-text","font-semibold"],["type","text","placeholder","Escribe el nombre, email o documento...",1,"input","input-bordered","w-full",3,"input","value"],[1,"flex-1"],[1,"border-t","flex-1","pt-2"],[1,"flex","justify-end","h-full","flex-1","gap-2"],["type","button",1,"btn","max-sm:btn-sm","btn-ghost","md:h-11","rounded-lg",3,"click"],["type","button",1,"btn","max-sm:btn-sm","btn-success","md:h-11","rounded-lg",3,"click","disabled"],[1,"loading","loading-spinner","loading-sm"],[1,"flex","justify-center","items-center","py-4"],[1,"loading","loading-spinner","loading-md","text-primary"],[1,"ml-2"],[1,"text-center","py-4","text-base-content/70"],[1,"space-y-1","mb-3"],[1,"font-semibold","text-lg","mb-3"],[1,"card","shadow-sm","rounded-xl",3,"ngClass"],[1,"card-body","px-2","py-1","flex","flex-row","items-center","justify-between"],[1,"flex","flex-col"],[1,"font-semibold"],[1,"text-purple-700"],[1,"text-sm","text-base-content"],["type","button",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"space-y-2","mb-4"],[1,"flex","items-center","justify-between","bg-success/10","rounded-lg","p-2"],["type","button",1,"btn","btn-error","btn-xs"],["type","button",1,"btn","btn-error","btn-xs",3,"click"],["nombreIcono","trash-outline","estilos","h-4 w-4"],["type","text","placeholder","Escribe el nombre del elemento...",1,"input","input-bordered","w-full",3,"input","value"],[1,"text-center","py-2","text-base-content/70"],[1,"font-semibold","text-lg","mb-2"],[1,"card","shadow-sm","rounded-xl","bg-base-300/70"],[1,"card-body","px-2","py-1","flex","flex-row","items-center","justify-between","gap-2"],[1,"text-xs","text-base-content/70"],[1,"flex","items-center","gap-2"],[1,"label-text","text-xs"],["type","number","min","1",1,"input","input-sm","input-bordered","w-20","text-right",3,"input","value"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"flex","items-center","justify-between","bg-success/10","rounded-lg","p-2","gap-2"],[1,"flex","flex-col","min-w-0"],[1,"font-medium","truncate"],[1,"flex","items-center","gap-3"],[1,"text-sm","font-semibold","text-base-content/80"],[1,"h-full","flex","flex-col","gap-6","animate-pulse"],[1,"h-full","flex","flex-col"],[1,"flex","gap-4","w-full","flex-shrink-0"],[1,"flex","flex-col","w-1/2","mb-2"],[1,"w-full","h-[13rem]","rounded-lg","skeleton","bg-gray-300"],[1,"flex","flex-col","w-1/2","gap-3"],[1,"skeleton","bg-gray-300","h-5","w-5","rounded-full"],[1,"skeleton","bg-gray-300","h-5","w-40","rounded"],[1,"skeleton","bg-gray-300","h-4","w-52","rounded"],[1,"skeleton","bg-gray-300","h-5","w-48","rounded"],[1,"flex","flex-col","gap-3","w-full","flex-1"],[1,"skeleton","bg-gray-300","h-6","w-48","mx-auto","rounded"],[1,"flex-1","overflow-y-auto","overflow-x-auto"],[1,"grid","p-1","gap-2","items-center","grid-cols-[repeat(auto-fill,minmax(7rem,1fr))]","min-w-max"],[4,"ngFor","ngForOf"],[1,"skeleton","bg-gray-300","h-6","w-56","mx-auto","rounded"],[1,"border","border-base-content/30","rounded-lg","p-4","space-y-3"],[1,"skeleton","bg-gray-300","h-4","w-full","rounded"],[1,"skeleton","bg-gray-300","h-4","w-11/12","rounded"],[1,"skeleton","bg-gray-300","h-4","w-10/12","rounded"],[1,"skeleton","bg-gray-300","h-4","w-8/12","rounded"],[1,"h-12","skeleton","bg-gray-300","rounded-lg","w-full"],[1,"flex","flex-col","w-1/2","mb-2",3,"ngClass"],["nombreIcono","image-outline",3,"estilos"],["alt","",1,"w-full","h-[13rem]","object-cover","rounded-lg",3,"src"],[1,"flex","flex-col","w-1/2","gap-2"],[1,"w-full","flex","items-center"],["nombreIcono","location-outline","estilos","h-5 w-5 font-bold text-secondary !fill-secondary"],[1,"font-bold","text-sm","lg:text-base","ml-1"],[1,"inline-block","max-sm:text-sm"],[1,"inline-block","max-sm:text-sm","align-middle"],[1,"font-bold"],[1,"badge","badge-info","border-2","font-bold","badge-lg"],[1,"inline-block","alert","alert-error","p-2","font-semibold","rounded-lg","max-sm:text-sm","align-middle"],[1,"alert","alert-success","font-semibold","rounded-lg","p-2"],[1,"btn","btn-secondary","max-md:p-1","p-2","max-sm:h-fit","sm:h-10",3,"disabled"],[1,"flex","flex-col","gap-1","w-full","flex-1"],[1,"flex","w-full","text-lg","font-bold","text-center","flex-shrink-0"],["type","button",1,"h-12","text-semibold","text-lg","w-full","items-center","justify-center","rounded-lg","btn","disabled:text-sm","disabled:text-gray-500","px-2","gap-0",3,"disabled","btn-disabled","btn-accent","btn-success","btn-error","btn-warning","tooltip","pointer-events-none","ngClass"],[1,"border","border-base-content/70","rounded-lg","prose","quill-reset","text-base"],[1,"max-sm:text-sm","text-base",3,"content"],[1,"btn","btn-secondary","max-md:p-1","p-2","max-sm:h-fit","sm:h-10",3,"click","disabled"],[1,"loading","loading-spinner","loading-sm","mr-2"],["type","button",1,"h-12","text-semibold","text-lg","w-full","items-center","justify-center","rounded-lg","btn","disabled:text-sm","disabled:text-gray-500","px-2","gap-0",3,"click","disabled","ngClass"],[1,"tooltip-content","w-min","text-sm"],[1,"inline-block","w-full"],[1,"text-wrap","text-base","leading-tight"],[1,"text-sm"],["type","button",1,"btn","max-sm:btn-sm","btn-error","md:h-11","rounded-lg",3,"click","disabled"],["nombreIcono","trash-outline","estilos","h-5 w-5 max-md:hidden mr-2"],["type","button",1,"btn","max-sm:btn-sm","btn-accent","md:h-11","rounded-lg",3,"click","disabled"],["nombreIcono","people-outline","estilos","h-5 w-5 max-md:hidden mr-2"],["type","button",1,"btn","max-sm:btn-sm","btn-secondary","md:h-11","rounded-lg",3,"click","disabled"],["nombreIcono","briefcase-outline","estilos","h-5 w-5 max-md:hidden mr-2"],["type","button",1,"btn","max-sm:btn-sm","btn-success","md:h-11","rounded-lg",3,"disabled"],["type","button",1,"btn","max-sm:btn-sm","btn-warning","md:h-11","rounded-lg",3,"disabled"],["type","button",1,"btn","max-sm:btn-sm","btn-primary","md:h-11","rounded-lg",3,"disabled"],["nombreIcono","checkmark-done-circle-outline","estilos","h-5 w-5 max-md:hidden mr-2"],["type","button",1,"btn","max-sm:btn-sm","btn-warning","md:h-11","rounded-lg",3,"click","disabled"],["nombreIcono","wallet-outline","estilos","h-5 w-5 max-md:hidden mr-2"],["type","button",1,"btn","max-sm:btn-sm","btn-primary","md:h-11","rounded-lg",3,"click","disabled"]],template:function(a,n){if(a&1){let l=w();r(0,"dialog",2,0),b("cancel",function(v){return x(l),S(n.onDialogCancel(v))}),r(2,"div",3)(3,"div",4),h(4,lt,1,0,"span",5)(5,dt,2,1,"span",6),r(6,"button",7),b("click",function(){return x(l),S(n.manejarCierreModal())}),f(7,"app-web-icon",8),s()(),h(8,ct,4,1,"div",9)(9,fi,11,2,"div",10),H(10,Ci,0,0,"ng-template",null,1,he),r(12,"div",11)(13,"div",12)(14,"button",13),b("click",function(){return x(l),S(n.manejarCierreModal())}),c(15," Cerrar "),s(),h(16,xi,3,1,"button",14),h(17,Si,3,1,"button",15),h(18,bi,3,1,"button",16),h(19,Ri,4,2,"div",17),s()()()()}a&2&&(d(4),g(n.dreservasService.espacioDetallesQuery.isPending()?4:5),d(4),g(n.dreservasService.cargando()?8:9),d(8),g(n.pudeCancelar()&&n.noCancelada()&&!n.esReservaPasada()&&n.dreservasService.mostrandoResumenExistente()?16:-1),d(),g(n.puedeAgregarMasJugadores()&&!n.dreservasService.mostrandoDisponibilidad()&&!n.dreservasService.mostrandoDetalles()&&!n.dreservasService.mostrandoJugadores()&&!n.esReservaPasada()&&n.noCancelada()?17:-1),d(),g(n.puedeAgregarElementos()?18:-1),d(),g(n.dreservasService.mostrandoResumenNueva()||n.dreservasService.mostrandoResumenExistente()&&n.noCancelada()?19:-1))},dependencies:[Me,Ce,xe,Se,ye,Ee,be,je,ze,ke],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let i=o;return i})();export{Ye as a,va as b};
