import{a as xe,b as he}from"./chunk-IYAUDCXT.js";import"./chunk-OCOUEVTR.js";import{a as ve}from"./chunk-KZG6SVMM.js";import"./chunk-LHBRERJU.js";import{b as ge}from"./chunk-WXQYSXFO.js";import"./chunk-SVZGXVR3.js";import"./chunk-AMCW56AE.js";import{a as Ce}from"./chunk-VILVOQXR.js";import{b as I}from"./chunk-WNVXENDG.js";import"./chunk-ZU7Q4APP.js";import{b as V}from"./chunk-KTGXZBKE.js";import{m as T}from"./chunk-LKADUWP6.js";import"./chunk-6CQPCFUJ.js";import"./chunk-AI3LD7IZ.js";import"./chunk-ODBDBKE7.js";import"./chunk-XPPSGRKL.js";import{a as fe,f as be,h as P}from"./chunk-4HN4PAFJ.js";import{i as ue}from"./chunk-AV73RGVI.js";import{f as de}from"./chunk-N4CCYIXR.js";import"./chunk-UAEYNMJW.js";import{G as k,c as te,g as ie,h as ne,i as oe,j as M,k as re,n as ae,p as le,q as se,r as ce,s as me,z as pe}from"./chunk-YPFPCNBD.js";import{Aa as w,Ba as p,Ca as i,Da as n,Db as Z,Ea as m,H as g,Ia as h,Ja as d,Ka as u,Lb as F,N as v,O as x,P as U,Q as R,R as L,Ra as $,Sa as z,T as G,Ua as H,Xa as c,Ya as Y,Za as C,bb as q,bc as ee,cb as W,da as s,ia as D,pb as S,qb as J,rb as K,sb as E,ta as Q,tb as X,u as N,ua as B,va as f,wa as b,x as j,ya as O,za as y}from"./chunk-U6U25BWF.js";import"./chunk-B3LSNZRN.js";import"./chunk-WUBXWBRT.js";import"./chunk-B52GHH4C.js";import"./chunk-KZ3CI6ZI.js";import"./chunk-HC6MZPB3.js";import"./chunk-SV2ZKNWA.js";import"./chunk-IA5KSSRM.js";import"./chunk-RS5W3JWO.js";import"./chunk-XENCGOZ2.js";import"./chunk-XZRAAXKF.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-QY5CJPR3.js";import"./chunk-MCRJI3T3.js";import"./chunk-ZD4SBDZ6.js";import"./chunk-NCLOD2DI.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-BAKMWPBW.js";import"./chunk-AESNPOCP.js";import"./chunk-H3ZVKW6B.js";import"./chunk-HMK4XMX7.js";import"./chunk-E7UUDSES.js";import"./chunk-JQ3FRJ6A.js";import"./chunk-3IVKBF6N.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import{i as we}from"./chunk-LVXXLD6S.js";var ye=we(Ce());function Ee(e,r){e&1&&(i(0,"div",2),m(1,"app-web-icon",8),n()),e&2&&(s(),p("nombreIcono","image-outline")("estilos","w-16 h-16 text-white/80"))}var _e=(()=>{let r=class r{constructor(){this.imagenUrl=E(),this.calificacion=E(),this.ubicacion=E(),this.titulo=E(),this.env=k,this.abrirEspacioEvent=K()}abrirEspacio(){this.abrirEspacioEvent.emit()}};r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=D({type:r,selectors:[["espacio-booking-item"]],inputs:{imagenUrl:[1,"imagenUrl"],calificacion:[1,"calificacion"],ubicacion:[1,"ubicacion"],titulo:[1,"titulo"]},outputs:{abrirEspacioEvent:"abrirEspacioEvent"},decls:11,vars:5,consts:[[1,"relative","rounded-xl","overflow-hidden","shadow-md","bg-cover","bg-center","h-60","w-full","cursor-pointer","bg-gray-200","dark:bg-gray-800",3,"click"],[1,"absolute","inset-0","bg-gradient-to-b","from-transparent","via-transparent","to-black/60"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"absolute","bottom-3","left-3","text-white","tooltip"],[1,"text-xl","font-semibold","mb-1","leading-tight","text-wrap","w-32","text-shadow-[0_0_4px_rgba(0,0,0,0.7)]"],[1,"text-base","flex","items-center","gap-1","opacity-90"],["viewBox","0 0 24 24",1,"w-4","h-4","fill-white"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5 14.5 7.62 14.5 9 13.38 11.5 12 11.5z"],[3,"nombreIcono","estilos"]],template:function(o,l){o&1&&(i(0,"div",0),d("click",function(){return l.abrirEspacio()}),m(1,"div",1),f(2,Ee,2,2,"div",2),i(3,"div",3)(4,"div",4),c(5),n(),i(6,"div",5),U(),i(7,"svg",6),m(8,"path",7),n(),R(),i(9,"span"),c(10),n()()()()),o&2&&(H("background-image",l.imagenUrl()?"url("+l.imagenUrl()+")":null),s(2),b(l.imagenUrl()?-1:2),s(3),C(" ",l.titulo()," "),s(5),Y(l.ubicacion()))},dependencies:[F,P],styles:["[_nghost-%COMP%]{display:block;width:100%}"]});let e=r;return e})();var Me=["fechaPicker"],ke=e=>({"text-gray-400":e}),De=()=>[1,2,3,4,5,6,7,8],A=(e,r)=>r.id;function Fe(e,r){if(e&1){let a=h();i(0,"button",32),d("click",function(){v(a);let o=u();return x(o.navegarAdminReservas())}),m(1,"app-web-icon",33),i(2,"span",10),c(3,"Administrar reservas"),n(),i(4,"span",11),c(5,"Administrar"),n()()}}function Pe(e,r){if(e&1){let a=h();i(0,"button",34),d("click",function(){v(a);let o=u();return x(o.limpiarTodosFiltros())}),m(1,"app-web-icon",35),i(2,"span",10),c(3,"Limpiar filtros"),n(),i(4,"span",11),c(5,"Limpiar"),n()()}if(e&2){let a=u();Q("title","Limpiar filtros: "+a.filtrosActivos().join(", "))}}function Ie(e,r){if(e&1&&(i(0,"option",22),c(1),n()),e&2){let a=r.$implicit;p("value",a.id),s(),C(" ",a.nombre," ")}}function Ve(e,r){if(e&1){let a=h();i(0,"button",36),d("click",function(){v(a);let o=u();return x(o.limpiarGrupo())}),m(1,"app-web-icon",37),n()}}function Te(e,r){if(e&1&&(i(0,"option",22),c(1),n()),e&2){let a=r.$implicit;p("value",a.id),s(),C(" ",a.nombre," ")}}function Ae(e,r){if(e&1){let a=h();i(0,"button",38),d("click",function(){v(a);let o=u();return x(o.limpiarCategoria())}),m(1,"app-web-icon",37),n()}}function Ne(e,r){if(e&1&&(i(0,"option",22),c(1),n()),e&2){let a=r.$implicit;p("value",a.id),s(),C(" ",a.nombre," ")}}function je(e,r){if(e&1){let a=h();i(0,"button",39),d("click",function(){v(a);let o=u();return x(o.limpiarUbicacion())}),m(1,"app-web-icon",37),n()}}function Ue(e,r){e&1&&m(0,"div",40)}function Re(e,r){e&1&&(i(0,"div",30),y(1,Ue,1,0,"div",40,O),n()),e&2&&(s(),w(q(0,De)))}function Le(e,r){if(e&1){let a=h();i(0,"espacio-booking-item",42),d("abrirEspacioEvent",function(){let o=v(a).$implicit,l=u(2);return x(l.abrirEspacio(o.id))}),n()}if(e&2){let a=r.$implicit,t=u(2);p("ubicacion",a.sede)("titulo",a.nombre)("imagenUrl",t.getImagenUrl(a.imagen_url))}}function Ge(e,r){if(e&1&&(i(0,"div",30),y(1,Le,1,3,"espacio-booking-item",41,B().trackByEspacioId,!0),n()),e&2){let a=u();s(),w(a.espacios())}}function Qe(e,r){e&1&&(i(0,"div",31),m(1,"app-web-icon",18),i(2,"h3",43),c(3,"No se encontraron espacios"),n(),i(4,"p",44),c(5," Intenta ajustar los filtros para encontrar espacios disponibles. "),n()()),e&2&&(s(),p("nombreIcono","search-circle-outline")("estilos","h-16 w-16"))}var vt=(()=>{let r=class r{constructor(){this.injector=g(L),this.router=g(ee),this.destroyRef=g(G),this.dreservasService=g(xe),this.espacioConfigService=g(ve),this.appService=g(ue),this.authService=g(de),this.environment=k,this.DEFAULT_IMAGE="",this.permisos=be,this.filtrosForm=new oe({fecha:new M(""),sede:new M(""),grupo:new M(""),categoria:new M("")}),this.filtros=ge(this.filtrosForm.valueChanges.pipe(j(this.filtrosForm.value),N(300)),{initialValue:this.filtrosForm.value,equal:(t,o)=>JSON.stringify(t)===JSON.stringify(o)}),this.fechaPicker=X.required("fechaPicker"),this.espacios=S(()=>this.dreservasService.allEspaciosQuery.data()??[]),this.isLoadingEspacios=S(()=>this.dreservasService.allEspaciosQuery.isPending()),this.espacioFull=S(()=>this.espacioConfigService.espacioQuery.data()??null),this.hasFilters=S(()=>{let t=this.filtros();return!!(t?.sede||t?.grupo||t?.categoria)}),this.filtrosActivos=S(()=>{let t=this.filtros(),o=[];return t?.sede&&o.push("Sede"),t?.grupo&&o.push("Grupo"),t?.categoria&&o.push("Categor\xEDa"),o})}ngOnInit(){this.initializePikaday(),this.setupFiltersEffect()}setupFiltersEffect(){J(()=>{let t=this.filtros();this.dreservasService.setFiltros({fecha:t?.fecha?T(I(t.fecha,"dd/MM/yyyy",new Date),"yyyy-MM-dd"):null,idGrupo:t?.grupo?Number(t.grupo):null,idSede:t?.sede?Number(t.sede):null,idCategoria:t?.categoria?Number(t.categoria):null})},{injector:this.injector})}initializePikaday(){let t=V(new Date,"dd/MM/yyyy");this.filtrosForm.controls.fecha.setValue(t),this.pikaday=new ye.default({field:this.fechaPicker()?.nativeElement,minDate:I(V(new Date,"yyyy-MM-dd"),"yyyy-MM-dd",new Date),i18n:fe,format:"DD/MM/YYYY",setDefaultDate:!0,defaultDate:I(V(new Date,"yyyy-MM-dd"),"yyyy-MM-dd",new Date),onSelect:o=>{this.filtrosForm.controls.fecha.setValue(T(o,"dd/MM/yyyy"))}})}limpiarFecha(){this.pikaday?.setDate(null),this.filtrosForm.controls.fecha.setValue("")}limpiarUbicacion(){this.filtrosForm.controls.sede.setValue("")}limpiarCategoria(){this.filtrosForm.controls.categoria.setValue("")}limpiarGrupo(){this.filtrosForm.controls.grupo.setValue("")}limpiarTodosFiltros(){this.filtrosForm.patchValue({sede:"",categoria:"",grupo:""})}getImagenUrl(t){return t?`${k.apiUrl}${t}`:this.DEFAULT_IMAGE}trackByEspacioId(t,o){return o.id}abrirEspacio(t){this.dreservasService.abrirModal(),this.dreservasService.setIdEspacio(t)}navegarMisReservas(){this.router.navigate(["reservas","mis-reservas"])}navegarAdminReservas(){this.router.navigate(["reservas","admin"])}ngOnDestroy(){this.pikaday?.destroy()}};r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=D({type:r,selectors:[["app-dreservas-main"]],viewQuery:function(o,l){o&1&&$(l.fechaPicker,Me,5),o&2&&z()},hostAttrs:[1,"flex","flex-col","h-full","w-full","sm:pl-3","overflow-y-auto"],decls:57,vars:12,consts:[["fechaPicker",""],[1,"flex","flex-col","sm:flex-row","justify-start","items-center","flex-wrap","gap-x-4","gap-y-1"],[1,"flex","flex-row","w-full","justify-between","mb-2","gap-1","sticky","top-0","z-10","bg-base-300","pt-2","pb-1","px-1"],[1,"w-1/2","flex","flex-col","md:flex-row","justify-between","md:justify-start"],[1,"font-bold","max-md:text-2xl","text-4xl","text-left","text-base-content","md:mr-4","mb-2"],[1,"btn","btn-accent","max-sm:btn-sm","md:h-11","rounded-box"],[1,"flex","flex-col","md:flex-row","gap-2","w-1/2","justify-between","md:justify-end"],[1,"btn","btn-warning","max-sm:btn-sm","md:h-11","rounded-box"],[1,"btn","btn-primary","max-sm:btn-sm","md:h-11","rounded-box",3,"click"],["nombreIcono","file-tray-full-outline","estilos","h-5 w-5 mr-1"],[1,"max-lg:hidden","text-sm","md:text-base"],[1,"hidden","max-lg:inline","text-sm","md:text-base"],[1,"grid","gap-1","w-full","items-center","grid-cols-[repeat(auto-fit,minmax(10rem,1fr))]",3,"formGroup"],[1,"flex","flex-col","items-center","flex-1","md:max-w-56"],["for","fecha",1,"label","w-full","text-sm","font-[600]","text-base-content","mb-0","px-1"],[1,"flex","items-center","w-full","px-1"],[1,"input","max-sm:input-sm","input-bordered","w-full","md:h-11","rounded-box",3,"ngClass"],["autocomplete","off","id","fecha","name","fecha","formControlName","fecha","type","text","placeholder","dd/mm/yyyy",1,"grow","pika-single","placeholder:text-gray-400","placeholder:text-xs","md:placeholder:text-sm"],[3,"nombreIcono","estilos"],["for","grupo",1,"label","w-full","text-sm","font-[600]","text-base-content","mb-0","px-1"],["id","grupo","name","grupo","formControlName","grupo",1,"select","max-sm:select-sm","grow","input-bordered","w-full","md:h-11","rounded-box"],["value","","disabled",""],[3,"value"],["data-tip","Limpiar grupo",1,"btn","max-sm:btn-xs","btn-sm","btn-error","btn-soft","btn-circle","tooltip","tooltip-left","lg:tooltip-right","ml-1","xl:ml-2"],["for","categoria",1,"label","w-full","text-sm","font-[600]","text-base-content","mb-0","px-1"],["id","categoria","name","categoria","formControlName","categoria",1,"select","max-sm:select-sm","grow","input-bordered","w-full","md:h-11","rounded-box"],["data-tip","Limpiar tipo de espacio",1,"btn","max-sm:btn-xs","btn-sm","btn-error","btn-soft","btn-circle","tooltip","tooltip-left","lg:tooltip-right","ml-1","xl:ml-2"],["for","sede",1,"label","w-full","text-sm","font-[600]","text-base-content","mb-0","px-1"],["id","sede","name","sede","formControlName","sede",1,"select","max-sm:select-sm","grow","input-bordered","w-full","md:h-11","rounded-box"],["data-tip","Limpiar ubicaci\xF3n",1,"btn","max-sm:btn-xs","btn-sm","btn-error","btn-soft","btn-circle","tooltip","tooltip-left","lg:tooltip-right","ml-1","xl:ml-2"],[1,"grid","w-full","justify-center","sm:justify-start","auto-rows-[15rem]","grid-cols-[repeat(auto-fill,minmax(10rem,1fr))]","max-sm:gap-2","gap-3","mt-2","place-items-center"],[1,"alert","alert-error","mt-2","alert-dash","flex","flex-col","gap-1","items-center","justify-center","w-full","text-center"],[1,"btn","btn-accent","max-sm:btn-sm","md:h-11","rounded-box",3,"click"],["nombreIcono","calendar-number-outline","estilos","h-5 w-5 mr-1"],[1,"btn","btn-warning","max-sm:btn-sm","md:h-11","rounded-box",3,"click"],["nombreIcono","close-circle-outline","estilos","h-5 w-5 mr-1"],["data-tip","Limpiar grupo",1,"btn","max-sm:btn-xs","btn-sm","btn-error","btn-soft","btn-circle","tooltip","tooltip-left","lg:tooltip-right","ml-1","xl:ml-2",3,"click"],["nombreIcono","close-circle-outline","estilos","max-sm:h-5 max-sm:w-5 h-6 w-6"],["data-tip","Limpiar tipo de espacio",1,"btn","max-sm:btn-xs","btn-sm","btn-error","btn-soft","btn-circle","tooltip","tooltip-left","lg:tooltip-right","ml-1","xl:ml-2",3,"click"],["data-tip","Limpiar ubicaci\xF3n",1,"btn","max-sm:btn-xs","btn-sm","btn-error","btn-soft","btn-circle","tooltip","tooltip-left","lg:tooltip-right","ml-1","xl:ml-2",3,"click"],[1,"relative","bg-gray-300","rounded-xl","shadow-md","h-60","w-full","skeleton"],[3,"ubicacion","titulo","imagenUrl"],[3,"abrirEspacioEvent","ubicacion","titulo","imagenUrl"],[1,"text-2xl","font-semibold","mb-1"],[1,"text-lg"]],template:function(o,l){if(o&1){let _=h();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),c(4," Reservas "),n(),f(5,Fe,6,0,"button",5),n(),i(6,"div",6),f(7,Pe,6,1,"button",7),i(8,"button",8),d("click",function(){return v(_),x(l.navegarMisReservas())}),m(9,"app-web-icon",9),i(10,"span",10),c(11,"Historial de reservas"),n(),i(12,"span",11),c(13,"Historial"),n()()()(),i(14,"form",12)(15,"div",13)(16,"label",14),c(17," Seleccione la fecha: "),n(),i(18,"div",15)(19,"label",16),m(20,"input",17,0)(22,"app-web-icon",18),n()()(),i(23,"div",13)(24,"label",19),c(25," Grupo: "),n(),i(26,"div",15)(27,"select",20)(28,"option",21),c(29,"Seleccione"),n(),y(30,Ie,2,2,"option",22,A),n(),f(32,Ve,2,0,"button",23),n()(),i(33,"div",13)(34,"label",24),c(35," Categor\xEDa: "),n(),i(36,"div",15)(37,"select",25)(38,"option",21),c(39,"Seleccione"),n(),y(40,Te,2,2,"option",22,A),n(),f(42,Ae,2,0,"button",26),n()(),i(43,"div",13)(44,"label",27),c(45," Ubicaci\xF3n: "),n(),i(46,"div",15)(47,"select",28)(48,"option",21),c(49,"Seleccione"),n(),y(50,Ne,2,2,"option",22,A),n(),f(52,je,2,0,"button",29),n()()()(),f(53,Re,3,1,"div",30)(54,Ge,3,0,"div",30)(55,Qe,6,2,"div",31),m(56,"modal-dreservas")}if(o&2){let _;s(5),b(((_=l.authService.usuario())==null||_.rol==null||_.rol.nombre==null?null:_.rol.nombre.toLowerCase())==="administrador"||l.authService.tienePermisos(l.permisos.ADMINISTRAR_RESERVAS)?5:-1),s(2),b(l.hasFilters()?7:-1),s(7),p("formGroup",l.filtrosForm),s(5),p("ngClass",W(10,ke,!l.filtrosForm.value.fecha)),s(3),p("nombreIcono","calendar-outline")("estilos","h-5 w-5"),s(8),w(l.appService.gruposQuery.data()),s(2),b(l.filtrosForm.value.grupo?32:-1),s(8),w(l.appService.categoriasQuery.data()),s(2),b(l.filtrosForm.value.categoria?42:-1),s(8),w(l.appService.sedesQuery.data()),s(2),b(l.filtrosForm.value.sede?52:-1),s(),b(l.isLoadingEspacios()?53:l.espacios().length>0?54:55)}},dependencies:[F,Z,P,pe,re,ce,me,te,se,ie,ne,ae,le,_e,he],encapsulation:2,changeDetection:0});let e=r;return e})();export{vt as default};
