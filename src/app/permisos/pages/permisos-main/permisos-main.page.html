<div
  class="flex flex-col md:flex-row md:pr-2 w-full pb-2 md:pb-4 items-stretch justify-center md:justify-between sticky top-0 z-30 bg-base-300"
>
  <div class="flex items-center gap-2 justify-center md:justify-start">
    <h2 class="font-bold text-4xl max-sm:text-2xl mb-2 md:mb-0">
      Roles y permisos
    </h2>
    @if (permisosService.filtroTexto() && permisosService.pestana() === 'rol') {
    <div
      class="badge badge-secondary h-fit md:h-6 badge-sm my-auto text-sm md:text-base"
    >
      Filtrando: "{{ permisosService.filtroTexto() }}"
      <button
        class="btn h-5 w-5 btn-circle btn-secondary ml-1"
        (click)="limpiarFiltro()"
        title="Limpiar filtro"
      >
        <app-web-icon
          estilos="h-4 w-4"
          nombreIcono="close-circle-outline"
        ></app-web-icon>
      </button>
    </div>
    }
  </div>
  <div class="flex flex-col md:flex-row gap-2 mt-1">
    @if (permisosService.pestana() === 'rol') {
    <input
      type="text"
      placeholder="Buscar por nombre, email o rol..."
      class="input max-sm:input-sm input-bordered input-primary w-full sm:h-11 rounded-box md:max-w-xs placeholder:text-gray-500 placeholder:text-sm"
      [value]="permisosService.filtroTexto()"
      (input)="aplicarFiltro($any($event.target).value)"
    />
    } @if (authService.tienePermisos('PER000001')) {
    <button
      [disabled]="appService.editando()"
      class="btn max-sm:btn-sm btn-primary sm:h-11 rounded-box"
      (click)="crearRol()"
    >
      <app-web-icon estilos="h-6 w-6" nombreIcono="add-outline"></app-web-icon>
      Nuevo Rol
    </button>
    }
  </div>
</div>

@if (rolesQuery.isPending()) {
<div class="flex justify-center items-center py-8">
  <span class="loading loading-spinner loading-lg text-primary"></span>
  <span class="ml-2 text-base-content">Cargando roles...</span>
</div>
} @else if (rolesQuery.isError()) {
<div class="alert alert-error mb-4">
  <app-web-icon
    estilos="h-6 w-6"
    nombreIcono="alert-circle-outline"
  ></app-web-icon>
  <span>Error al cargar los roles. </span>
  <button class="btn btn-sm btn-outline">Reintentar</button>
</div>
} @else {
<tabla-roles [ngClass]="'flex flex-col'"></tabla-roles>
}
