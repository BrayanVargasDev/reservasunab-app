<div class="h-dvh overflow-hidden bg-base-200 flex flex-col">
  <!-- Loading State -->
  @if (loading()) {
  <app-loading-spinner
    title="Verificando información del pago"
    message="Por favor espera mientras procesamos tu solicitud..."
  >
  </app-loading-spinner>
  }
  <!-- Error State -->
  @if (error() && !loading()) {
  <app-error-display
    [titulo]="'¡Ups! Algo salió mal'"
    [mensaje]="error() ?? ''"
    [showRetry]="!!codigo"
    (retry)="reintentar()"
    (goHome)="volver()"
  >
  </app-error-display>
  }

  <!-- Success State -->
  @if (pagoInfo() && !loading()) {
  <div class="flex-1 overflow-y-auto h-dvh">
    <app-pago-info-card
      [pagoInfo]="pagoInfo()!"
      [formatearMonto]="formatearMonto.bind(this)"
      [formatearFecha]="formatearFecha.bind(this)"
      [obtenerMensajeEstado]="obtenerMensajeEstado.bind(this)"
    >
    </app-pago-info-card>

    <!-- Acciones -->
    <div class="w-full">
      <div
        class="flex flex-col md:flex-row items-center justify-center max-w-4xl mx-auto p-2 gap-2"
      >
        <button
          class="btn btn-outline btn-ghost font-semibold h-11"
          (click)="volver()"
        >
          <app-web-icon
            nombreIcono="arrow-back-circle-outline"
            estilos="h-5 w-5"
          ></app-web-icon>
          Volver al inicio
        </button>

        @if (pagoInfo()?.pago?.estado === 'pendiente' ||
        pagoInfo()?.pago?.estado === 'procesando') {
        <button
          class="btn btn-primary font-semibold h-11"
          (click)="reintentar()"
        >
          <app-web-icon nombreIcono="refresh-outline" estilos="h-5 w-5"></app-web-icon>
          Actualizar estado
        </button>
        }
      </div>
    </div>
  </div>
  }
</div>
